import{j as e,d as s}from"./index-DWFic46w.js";import{r as t,u as r}from"./react-vendor-E1AgTUZ9.js";import{u as a,L as i,G as n,d as l}from"./ui-vendor-CQy3HONI.js";import"./recharts-wIacPPq0.js";function c(){const[c,o]=t.useState([]),[d,x]=t.useState(!0),m=r();t.useEffect(()=>{h()},[]);const h=async()=>{try{const e=await fetch("https://pkochbpmcgaa.sealoshzh.site/api/categories");if(e.ok){const s=await e.json();o(s.data||[])}}catch(e){a.error("加载分类失败")}finally{x(!1)}};return d?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#F2F4F3]",children:e.jsx(i,{className:"w-10 h-10 animate-spin text-primary"})}):e.jsx("div",{className:"min-h-screen bg-[#F2F4F3] py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[e.jsxs("div",{className:"mb-12 text-center",children:[e.jsx("h1",{className:"text-4xl font-serif font-bold text-primary mb-3",children:"商品分类"}),e.jsx("p",{className:"text-stone-500 uppercase tracking-widest text-xs",children:"PRODUCT CATEGORIES"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:c.filter(e=>!e.parentId).map(t=>e.jsxs("div",{onClick:()=>m(`/products?category=${t.slug||t._id}`),className:"bg-white rounded-2xl border border-stone-200 overflow-hidden hover:shadow-lg transition-all hover:border-primary group cursor-pointer",children:[e.jsx("div",{className:"aspect-square bg-stone-100 overflow-hidden",children:t.image?e.jsx("img",{src:s(t.image),alt:t.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:e=>{const s=e.target;s.style.display="none",s.parentElement&&(s.parentElement.innerHTML='<div class="w-full h-full flex items-center justify-center"><svg class="w-16 h-16 text-stone-300" viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line></svg></div>')}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(n,{className:"w-16 h-16 text-stone-300"})})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-serif font-bold text-primary",children:t.name}),e.jsx(l,{className:"w-5 h-5 text-stone-400 group-hover:text-primary transition-colors"})]}),t.description&&e.jsx("p",{className:"text-sm text-stone-500 line-clamp-2 mb-2",children:t.description}),t.children&&t.children.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[t.children.slice(0,3).map(s=>e.jsx("span",{onClick:e=>{e.stopPropagation(),m(`/products?category=${s.slug||s._id}`)},className:"text-xs px-2 py-0.5 bg-stone-100 rounded-full text-stone-600 hover:bg-primary/10 hover:text-primary",children:s.name},s._id)),t.children.length>3&&e.jsxs("span",{className:"text-xs px-2 py-0.5 text-stone-400",children:["+",t.children.length-3]})]})]})]},t._id))}),0===c.length&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx(n,{className:"w-16 h-16 text-stone-300 mx-auto mb-4"}),e.jsx("p",{className:"text-stone-400 font-serif italic",children:"暂无分类"})]})]})})}export{c as default};
