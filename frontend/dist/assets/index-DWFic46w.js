const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/react-vendor-E1AgTUZ9.js"])))=>i.map(i=>d[i]);
import{r as e,b as t,g as r,R as s,O as a,u as n,d as i,e as o,L as l,B as c,f as d,h as u,N as m}from"./react-vendor-E1AgTUZ9.js";import{X as p,L as h,A as f,u as g,U as x,C as y,S as b,a as j,P as v,b as w,T as _,c as N,d as E,G as S,H as k,e as O,f as P,g as A,M as R,h as C,i as T,j as I,k as L,l as D,m as z,n as M,o as U,$ as F}from"./ui-vendor-CQy3HONI.js";import{c as q}from"./recharts-wIacPPq0.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var $={exports:{}},B={},V=e,J=Symbol.for("react.element"),H=Symbol.for("react.fragment"),W=Object.prototype.hasOwnProperty,G=V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,K={key:!0,ref:!0,__self:!0,__source:!0};function X(e,t,r){var s,a={},n=null,i=null;for(s in void 0!==r&&(n=""+r),void 0!==t.key&&(n=""+t.key),void 0!==t.ref&&(i=t.ref),t)W.call(t,s)&&!K.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===a[s]&&(a[s]=t[s]);return{$$typeof:J,type:e,key:n,ref:i,props:a,_owner:G.current}}B.Fragment=H,B.jsx=X,B.jsxs=X,$.exports=B;var Y=$.exports,Q={},Z=t;Q.createRoot=Z.createRoot,Q.hydrateRoot=Z.hydrateRoot;const ee={},te=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));s=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in ee)return;ee[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,r&&a.setAttribute("nonce",r),document.head.appendChild(a),t?new Promise((t,r)=>{a.addEventListener("load",t),a.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})},re=e=>{let t;const r=new Set,s=(e,s)=>{const a="function"==typeof e?e(t):e;if(!Object.is(a,t)){const e=t;t=(null!=s?s:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,n={setState:s,getState:a,getInitialState:()=>i,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{r.clear()}},i=t=e(s,a,n);return n};var se={exports:{}},ae={},ne={exports:{}},ie={},oe=e;var le="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ce=oe.useState,de=oe.useEffect,ue=oe.useLayoutEffect,me=oe.useDebugValue;function pe(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!le(e,r)}catch(s){return!0}}var he="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),s=ce({inst:{value:r,getSnapshot:t}}),a=s[0].inst,n=s[1];return ue(function(){a.value=r,a.getSnapshot=t,pe(a)&&n({inst:a})},[e,r,t]),de(function(){return pe(a)&&n({inst:a}),e(function(){pe(a)&&n({inst:a})})},[e]),me(r),r};ie.useSyncExternalStore=void 0!==oe.useSyncExternalStore?oe.useSyncExternalStore:he,ne.exports=ie;var fe=ne.exports,ge=e,xe=fe;var ye="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},be=xe.useSyncExternalStore,je=ge.useRef,ve=ge.useEffect,we=ge.useMemo,_e=ge.useDebugValue;ae.useSyncExternalStoreWithSelector=function(e,t,r,s,a){var n=je(null);if(null===n.current){var i={hasValue:!1,value:null};n.current=i}else i=n.current;n=we(function(){function e(e){if(!l){if(l=!0,n=e,e=s(e),void 0!==a&&i.hasValue){var t=i.value;if(a(t,e))return o=t}return o=e}if(t=o,ye(n,e))return t;var r=s(e);return void 0!==a&&a(t,r)?(n=e,t):(n=e,o=r)}var n,o,l=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,r,s,a]);var o=be(e,n[0],n[1]);return ve(function(){i.hasValue=!0,i.value=o},[o]),_e(o),o},se.exports=ae;const Ne=r(se.exports),Ee={},{useDebugValue:Se}=s,{useSyncExternalStoreWithSelector:ke}=Ne;let Oe=!1;const Pe=e=>e;const Ae=e=>{const t="function"==typeof e?(e=>e?re(e):re)(e):e,r=(e,r)=>function(e,t=Pe,r){"production"!==(Ee?"production":void 0)&&r&&!Oe&&(Oe=!0);const s=ke(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Se(s),s}(t,e,r);return Object.assign(r,t),r},Re=e=>e?Ae(e):Ae;function Ce(e,t){let r;try{r=e()}catch(s){return}return{getItem:e=>{var t;const s=e=>null===e?null:JSON.parse(e,void 0),a=null!=(t=r.getItem(e))?t:null;return a instanceof Promise?a.then(s):s(a)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}const Te=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then:e=>Te(e)(r),catch(e){return this}}}catch(r){return{then(e){return this},catch:e=>Te(e)(r)}}},Ie=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((e,t)=>(r,s,a)=>{let n={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},i=!1;const o=new Set,l=new Set;let c;try{c=n.getStorage()}catch(g){}if(!c)return e((...e)=>{r(...e)},s,a);const d=Te(n.serialize),u=()=>{const e=n.partialize({...s()});let t;const r=d({state:e,version:n.version}).then(e=>c.setItem(n.name,e)).catch(e=>{t=e});if(t)throw t;return r},m=a.setState;a.setState=(e,t)=>{m(e,t),u()};const p=e((...e)=>{r(...e),u()},s,a);let h;const f=()=>{var e;if(!c)return;i=!1,o.forEach(e=>e(s()));const t=(null==(e=n.onRehydrateStorage)?void 0:e.call(n,s()))||void 0;return Te(c.getItem.bind(c))(n.name).then(e=>{if(e)return n.deserialize(e)}).then(e=>{if(e){if("number"!=typeof e.version||e.version===n.version)return e.state;if(n.migrate)return n.migrate(e.state,e.version)}}).then(e=>{var t;return h=n.merge(e,null!=(t=s())?t:p),r(h,!0),u()}).then(()=>{null==t||t(h,void 0),i=!0,l.forEach(e=>e(h))}).catch(e=>{null==t||t(void 0,e)})};return a.persist={setOptions:e=>{n={...n,...e},e.getStorage&&(c=e.getStorage())},clearStorage:()=>{null==c||c.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>f(),hasHydrated:()=>i,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},f(),h||p})(e,t):((e,t)=>(r,s,a)=>{let n={storage:Ce(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},i=!1;const o=new Set,l=new Set;let c=n.storage;if(!c)return e((...e)=>{r(...e)},s,a);const d=()=>{const e=n.partialize({...s()});return c.setItem(n.name,{state:e,version:n.version})},u=a.setState;a.setState=(e,t)=>{u(e,t),d()};const m=e((...e)=>{r(...e),d()},s,a);let p;a.getInitialState=()=>m;const h=()=>{var e,t;if(!c)return;i=!1,o.forEach(e=>{var t;return e(null!=(t=s())?t:m)});const a=(null==(t=n.onRehydrateStorage)?void 0:t.call(n,null!=(e=s())?e:m))||void 0;return Te(c.getItem.bind(c))(n.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===n.version)return[!1,e.state];if(n.migrate)return[!0,n.migrate(e.state,e.version)]}return[!1,void 0]}).then(e=>{var t;const[a,i]=e;if(p=n.merge(i,null!=(t=s())?t:m),r(p,!0),a)return d()}).then(()=>{null==a||a(p,void 0),p=s(),i=!0,l.forEach(e=>e(p))}).catch(e=>{null==a||a(void 0,e)})};return a.persist={setOptions:e=>{n={...n,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>h(),hasHydrated:()=>i,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},n.skipHydration||h(),p||m})(e,t),Le=Re()(Ie(e=>({user:null,token:null,isAuthenticated:!1,login:(t,r)=>{localStorage.setItem("token",r),e({user:t,token:r,isAuthenticated:!0})},logout:()=>{localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})},updateUser:t=>{e(e=>({user:e.user?{...e.user,...t}:null}))},updateUserRole:t=>{e(e=>({user:e.user?{...e.user,role:t}:null}))}}),{name:"auth-storage"})),De=Re(e=>({isOpen:!1,mode:"login",openLogin:()=>e({isOpen:!0,mode:"login"}),openRegister:()=>e({isOpen:!0,mode:"register"}),close:()=>e({isOpen:!1})}));class ze extends e.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){var e,t;return this.state.hasError?Y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:Y.jsxs("div",{className:"max-w-2xl w-full bg-white rounded-lg shadow-lg p-8",children:[Y.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"页面加载错误"}),Y.jsx("p",{className:"text-gray-700 mb-4",children:"抱歉，页面加载时出现了错误。请查看下面的详细信息："}),Y.jsxs("details",{className:"mb-4",children:[Y.jsx("summary",{className:"cursor-pointer text-blue-600 hover:text-blue-800 mb-2",children:"错误详情"}),Y.jsxs("pre",{className:"bg-gray-100 p-4 rounded overflow-auto text-sm",children:[null==(e=this.state.error)?void 0:e.toString(),null==(t=this.state.errorInfo)?void 0:t.componentStack]})]}),Y.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()},className:"btn-primary",children:"重新加载页面"})]})}):this.props.children}}function Me(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ue}=Object.prototype,{getPrototypeOf:Fe}=Object,{iterator:qe,toStringTag:$e}=Symbol,Be=(e=>t=>{const r=Ue.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ve=e=>(e=e.toLowerCase(),t=>Be(t)===e),Je=e=>t=>typeof t===e,{isArray:He}=Array,We=Je("undefined");function Ge(e){return null!==e&&!We(e)&&null!==e.constructor&&!We(e.constructor)&&Ye(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ke=Ve("ArrayBuffer");const Xe=Je("string"),Ye=Je("function"),Qe=Je("number"),Ze=e=>null!==e&&"object"==typeof e,et=e=>{if("object"!==Be(e))return!1;const t=Fe(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||$e in e||qe in e)},tt=Ve("Date"),rt=Ve("File"),st=Ve("Blob"),at=Ve("FileList"),nt=Ve("URLSearchParams"),[it,ot,lt,ct]=["ReadableStream","Request","Response","Headers"].map(Ve);function dt(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let s,a;if("object"!=typeof e&&(e=[e]),He(e))for(s=0,a=e.length;s<a;s++)t.call(null,e[s],s,e);else{if(Ge(e))return;const a=r?Object.getOwnPropertyNames(e):Object.keys(e),n=a.length;let i;for(s=0;s<n;s++)i=a[s],t.call(null,e[i],i,e)}}function ut(e,t){if(Ge(e))return null;t=t.toLowerCase();const r=Object.keys(e);let s,a=r.length;for(;a-- >0;)if(s=r[a],t===s.toLowerCase())return s;return null}const mt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,pt=e=>!We(e)&&e!==mt;const ht=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&Fe(Uint8Array)),ft=Ve("HTMLFormElement"),gt=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),xt=Ve("RegExp"),yt=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};dt(r,(r,a)=>{let n;!1!==(n=t(r,a,e))&&(s[a]=n||r)}),Object.defineProperties(e,s)};const bt=Ve("AsyncFunction"),jt=(vt="function"==typeof setImmediate,wt=Ye(mt.postMessage),vt?setImmediate:wt?(_t=`axios@${Math.random()}`,Nt=[],mt.addEventListener("message",({source:e,data:t})=>{e===mt&&t===_t&&Nt.length&&Nt.shift()()},!1),e=>{Nt.push(e),mt.postMessage(_t,"*")}):e=>setTimeout(e));var vt,wt,_t,Nt;const Et="undefined"!=typeof queueMicrotask?queueMicrotask.bind(mt):"undefined"!=typeof process&&process.nextTick||jt,St={isArray:He,isArrayBuffer:Ke,isBuffer:Ge,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Ye(e.append)&&("formdata"===(t=Be(e))||"object"===t&&Ye(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Ke(e.buffer),t},isString:Xe,isNumber:Qe,isBoolean:e=>!0===e||!1===e,isObject:Ze,isPlainObject:et,isEmptyObject:e=>{if(!Ze(e)||Ge(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:it,isRequest:ot,isResponse:lt,isHeaders:ct,isUndefined:We,isDate:tt,isFile:rt,isBlob:st,isRegExp:xt,isFunction:Ye,isStream:e=>Ze(e)&&Ye(e.pipe),isURLSearchParams:nt,isTypedArray:ht,isFileList:at,forEach:dt,merge:function e(){const{caseless:t,skipUndefined:r}=pt(this)&&this||{},s={},a=(a,n)=>{const i=t&&ut(s,n)||n;et(s[i])&&et(a)?s[i]=e(s[i],a):et(a)?s[i]=e({},a):He(a)?s[i]=a.slice():r&&We(a)||(s[i]=a)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&dt(arguments[n],a);return s},extend:(e,t,r,{allOwnKeys:s}={})=>(dt(t,(t,s)=>{r&&Ye(t)?e[s]=Me(t,r):e[s]=t},{allOwnKeys:s}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,s)=>{let a,n,i;const o={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),n=a.length;n-- >0;)i=a[n],s&&!s(i,e,t)||o[i]||(t[i]=e[i],o[i]=!0);e=!1!==r&&Fe(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:Be,kindOfTest:Ve,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return-1!==s&&s===r},toArray:e=>{if(!e)return null;if(He(e))return e;let t=e.length;if(!Qe(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[qe]).call(e);let s;for(;(s=r.next())&&!s.done;){const r=s.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const s=[];for(;null!==(r=e.exec(t));)s.push(r);return s},isHTMLForm:ft,hasOwnProperty:gt,hasOwnProp:gt,reduceDescriptors:yt,freezeMethods:e=>{yt(e,(t,r)=>{if(Ye(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const s=e[r];Ye(s)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},s=e=>{e.forEach(e=>{r[e]=!0})};return He(e)?s(e):s(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:ut,global:mt,isContextDefined:pt,isSpecCompliantForm:function(e){return!!(e&&Ye(e.append)&&"FormData"===e[$e]&&e[qe])},toJSONObject:e=>{const t=new Array(10),r=(e,s)=>{if(Ze(e)){if(t.indexOf(e)>=0)return;if(Ge(e))return e;if(!("toJSON"in e)){t[s]=e;const a=He(e)?[]:{};return dt(e,(e,t)=>{const n=r(e,s+1);!We(n)&&(a[t]=n)}),t[s]=void 0,a}}return e};return r(e,0)},isAsyncFn:bt,isThenable:e=>e&&(Ze(e)||Ye(e))&&Ye(e.then)&&Ye(e.catch),setImmediate:jt,asap:Et,isIterable:e=>null!=e&&Ye(e[qe])};function kt(e,t,r,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}St.inherits(kt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:St.toJSONObject(this.config),code:this.code,status:this.status}}});const Ot=kt.prototype,Pt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Pt[e]={value:e}}),Object.defineProperties(kt,Pt),Object.defineProperty(Ot,"isAxiosError",{value:!0}),kt.from=(e,t,r,s,a,n)=>{const i=Object.create(Ot);St.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const o=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return kt.call(i,o,l,r,s,a),e&&null==i.cause&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",n&&Object.assign(i,n),i};function At(e){return St.isPlainObject(e)||St.isArray(e)}function Rt(e){return St.endsWith(e,"[]")?e.slice(0,-2):e}function Ct(e,t,r){return e?e.concat(t).map(function(e,t){return e=Rt(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const Tt=St.toFlatObject(St,{},null,function(e){return/^is[A-Z]/.test(e)});function It(e,t,r){if(!St.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const s=(r=St.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!St.isUndefined(t[e])})).metaTokens,a=r.visitor||c,n=r.dots,i=r.indexes,o=(r.Blob||"undefined"!=typeof Blob&&Blob)&&St.isSpecCompliantForm(t);if(!St.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(St.isDate(e))return e.toISOString();if(St.isBoolean(e))return e.toString();if(!o&&St.isBlob(e))throw new kt("Blob is not supported. Use a Buffer instead.");return St.isArrayBuffer(e)||St.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,a){let o=e;if(e&&!a&&"object"==typeof e)if(St.endsWith(r,"{}"))r=s?r:r.slice(0,-2),e=JSON.stringify(e);else if(St.isArray(e)&&function(e){return St.isArray(e)&&!e.some(At)}(e)||(St.isFileList(e)||St.endsWith(r,"[]"))&&(o=St.toArray(e)))return r=Rt(r),o.forEach(function(e,s){!St.isUndefined(e)&&null!==e&&t.append(!0===i?Ct([r],s,n):null===i?r:r+"[]",l(e))}),!1;return!!At(e)||(t.append(Ct(a,r,n),l(e)),!1)}const d=[],u=Object.assign(Tt,{defaultVisitor:c,convertValue:l,isVisitable:At});if(!St.isObject(e))throw new TypeError("data must be an object");return function e(r,s){if(!St.isUndefined(r)){if(-1!==d.indexOf(r))throw Error("Circular reference detected in "+s.join("."));d.push(r),St.forEach(r,function(r,n){!0===(!(St.isUndefined(r)||null===r)&&a.call(t,r,St.isString(n)?n.trim():n,s,u))&&e(r,s?s.concat(n):[n])}),d.pop()}}(e),t}function Lt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Dt(e,t){this._pairs=[],e&&It(e,this,t)}const zt=Dt.prototype;function Mt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ut(e,t,r){if(!t)return e;const s=r&&r.encode||Mt;St.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let n;if(n=a?a(t,r):St.isURLSearchParams(t)?t.toString():new Dt(t,r).toString(s),n){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}zt.append=function(e,t){this._pairs.push([e,t])},zt.toString=function(e){const t=e?function(t){return e.call(this,t,Lt)}:Lt;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class Ft{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){St.forEach(this.handlers,function(t){null!==t&&e(t)})}}const qt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$t={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Dt,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Bt="undefined"!=typeof window&&"undefined"!=typeof document,Vt="object"==typeof navigator&&navigator||void 0,Jt=Bt&&(!Vt||["ReactNative","NativeScript","NS"].indexOf(Vt.product)<0),Ht="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Wt=Bt&&window.location.href||"http://localhost",Gt={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Bt,hasStandardBrowserEnv:Jt,hasStandardBrowserWebWorkerEnv:Ht,navigator:Vt,origin:Wt},Symbol.toStringTag,{value:"Module"})),...$t};function Kt(e){function t(e,r,s,a){let n=e[a++];if("__proto__"===n)return!0;const i=Number.isFinite(+n),o=a>=e.length;if(n=!n&&St.isArray(s)?s.length:n,o)return St.hasOwnProp(s,n)?s[n]=[s[n],r]:s[n]=r,!i;s[n]&&St.isObject(s[n])||(s[n]=[]);return t(e,r,s[n],a)&&St.isArray(s[n])&&(s[n]=function(e){const t={},r=Object.keys(e);let s;const a=r.length;let n;for(s=0;s<a;s++)n=r[s],t[n]=e[n];return t}(s[n])),!i}if(St.isFormData(e)&&St.isFunction(e.entries)){const r={};return St.forEachEntry(e,(e,s)=>{t(function(e){return St.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),s,r,0)}),r}return null}const Xt={transitional:qt,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",s=r.indexOf("application/json")>-1,a=St.isObject(e);a&&St.isHTMLForm(e)&&(e=new FormData(e));if(St.isFormData(e))return s?JSON.stringify(Kt(e)):e;if(St.isArrayBuffer(e)||St.isBuffer(e)||St.isStream(e)||St.isFile(e)||St.isBlob(e)||St.isReadableStream(e))return e;if(St.isArrayBufferView(e))return e.buffer;if(St.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let n;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return It(e,new Gt.classes.URLSearchParams,{visitor:function(e,t,r,s){return Gt.isNode&&St.isBuffer(e)?(this.append(t,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((n=St.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return It(n?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||s?(t.setContentType("application/json",!1),function(e,t,r){if(St.isString(e))try{return(t||JSON.parse)(e),St.trim(e)}catch(s){if("SyntaxError"!==s.name)throw s}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Xt.transitional,r=t&&t.forcedJSONParsing,s="json"===this.responseType;if(St.isResponse(e)||St.isReadableStream(e))return e;if(e&&St.isString(e)&&(r&&!this.responseType||s)){const r=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(a){if(r){if("SyntaxError"===a.name)throw kt.from(a,kt.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gt.classes.FormData,Blob:Gt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};St.forEach(["delete","get","head","post","put","patch"],e=>{Xt.headers[e]={}});const Yt=St.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Qt=Symbol("internals");function Zt(e){return e&&String(e).trim().toLowerCase()}function er(e){return!1===e||null==e?e:St.isArray(e)?e.map(er):String(e)}function tr(e,t,r,s,a){return St.isFunction(s)?s.call(this,t,r):(a&&(t=r),St.isString(t)?St.isString(s)?-1!==t.indexOf(s):St.isRegExp(s)?s.test(t):void 0:void 0)}let rr=class{constructor(e){e&&this.set(e)}set(e,t,r){const s=this;function a(e,t,r){const a=Zt(t);if(!a)throw new Error("header name must be a non-empty string");const n=St.findKey(s,a);(!n||void 0===s[n]||!0===r||void 0===r&&!1!==s[n])&&(s[n||t]=er(e))}const n=(e,t)=>St.forEach(e,(e,r)=>a(e,r,t));if(St.isPlainObject(e)||e instanceof this.constructor)n(e,t);else if(St.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))n((e=>{const t={};let r,s,a;return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),r=e.substring(0,a).trim().toLowerCase(),s=e.substring(a+1).trim(),!r||t[r]&&Yt[r]||("set-cookie"===r?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t})(e),t);else if(St.isObject(e)&&St.isIterable(e)){let r,s,a={};for(const t of e){if(!St.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[s=t[0]]=(r=a[s])?St.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}n(a,t)}else null!=e&&a(t,e,r);return this}get(e,t){if(e=Zt(e)){const r=St.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}(e);if(St.isFunction(t))return t.call(this,e,r);if(St.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Zt(e)){const r=St.findKey(this,e);return!(!r||void 0===this[r]||t&&!tr(0,this[r],r,t))}return!1}delete(e,t){const r=this;let s=!1;function a(e){if(e=Zt(e)){const a=St.findKey(r,e);!a||t&&!tr(0,r[a],a,t)||(delete r[a],s=!0)}}return St.isArray(e)?e.forEach(a):a(e),s}clear(e){const t=Object.keys(this);let r=t.length,s=!1;for(;r--;){const a=t[r];e&&!tr(0,this[a],a,e,!0)||(delete this[a],s=!0)}return s}normalize(e){const t=this,r={};return St.forEach(this,(s,a)=>{const n=St.findKey(r,a);if(n)return t[n]=er(s),void delete t[a];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(a):String(a).trim();i!==a&&delete t[a],t[i]=er(s),r[i]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return St.forEach(this,(r,s)=>{null!=r&&!1!==r&&(t[s]=e&&St.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){const t=(this[Qt]=this[Qt]={accessors:{}}).accessors,r=this.prototype;function s(e){const s=Zt(e);t[s]||(!function(e,t){const r=St.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(e,r,a){return this[s].call(this,t,e,r,a)},configurable:!0})})}(r,e),t[s]=!0)}return St.isArray(e)?e.forEach(s):s(e),this}};function sr(e,t){const r=this||Xt,s=t||r,a=rr.from(s.headers);let n=s.data;return St.forEach(e,function(e){n=e.call(r,n,a.normalize(),t?t.status:void 0)}),a.normalize(),n}function ar(e){return!(!e||!e.__CANCEL__)}function nr(e,t,r){kt.call(this,null==e?"canceled":e,kt.ERR_CANCELED,t,r),this.name="CanceledError"}function ir(e,t,r){const s=r.config.validateStatus;r.status&&s&&!s(r.status)?t(new kt("Request failed with status code "+r.status,[kt.ERR_BAD_REQUEST,kt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}rr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),St.reduceDescriptors(rr.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),St.freezeMethods(rr),St.inherits(nr,kt,{__CANCEL__:!0});const or=(e,t,r=3)=>{let s=0;const a=function(e,t){e=e||10;const r=new Array(e),s=new Array(e);let a,n=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=s[i];a||(a=l),r[n]=o,s[n]=l;let d=i,u=0;for(;d!==n;)u+=r[d++],d%=e;if(n=(n+1)%e,n===i&&(i=(i+1)%e),l-a<t)return;const m=c&&l-c;return m?Math.round(1e3*u/m):void 0}}(50,250);return function(e,t){let r,s,a=0,n=1e3/t;const i=(t,n=Date.now())=>{a=n,r=null,s&&(clearTimeout(s),s=null),e(...t)};return[(...e)=>{const t=Date.now(),o=t-a;o>=n?i(e,t):(r=e,s||(s=setTimeout(()=>{s=null,i(r)},n-o)))},()=>r&&i(r)]}(r=>{const n=r.loaded,i=r.lengthComputable?r.total:void 0,o=n-s,l=a(o);s=n;e({loaded:n,total:i,progress:i?n/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&n<=i?(i-n)/l:void 0,event:r,lengthComputable:null!=i,[t?"download":"upload"]:!0})},r)},lr=(e,t)=>{const r=null!=e;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},cr=e=>(...t)=>St.asap(()=>e(...t)),dr=Gt.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Gt.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Gt.origin),Gt.navigator&&/(msie|trident)/i.test(Gt.navigator.userAgent)):()=>!0,ur=Gt.hasStandardBrowserEnv?{write(e,t,r,s,a,n,i){if("undefined"==typeof document)return;const o=[`${e}=${encodeURIComponent(t)}`];St.isNumber(r)&&o.push(`expires=${new Date(r).toUTCString()}`),St.isString(s)&&o.push(`path=${s}`),St.isString(a)&&o.push(`domain=${a}`),!0===n&&o.push("secure"),St.isString(i)&&o.push(`SameSite=${i}`),document.cookie=o.join("; ")},read(e){if("undefined"==typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function mr(e,t,r){let s=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(s||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const pr=e=>e instanceof rr?{...e}:e;function hr(e,t){t=t||{};const r={};function s(e,t,r,s){return St.isPlainObject(e)&&St.isPlainObject(t)?St.merge.call({caseless:s},e,t):St.isPlainObject(t)?St.merge({},t):St.isArray(t)?t.slice():t}function a(e,t,r,a){return St.isUndefined(t)?St.isUndefined(e)?void 0:s(void 0,e,0,a):s(e,t,0,a)}function n(e,t){if(!St.isUndefined(t))return s(void 0,t)}function i(e,t){return St.isUndefined(t)?St.isUndefined(e)?void 0:s(void 0,e):s(void 0,t)}function o(r,a,n){return n in t?s(r,a):n in e?s(void 0,r):void 0}const l={url:n,method:n,data:n,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,r)=>a(pr(e),pr(t),0,!0)};return St.forEach(Object.keys({...e,...t}),function(s){const n=l[s]||a,i=n(e[s],t[s],s);St.isUndefined(i)&&n!==o||(r[s]=i)}),r}const fr=e=>{const t=hr({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:n,headers:i,auth:o}=t;if(t.headers=i=rr.from(i),t.url=Ut(mr(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),St.isFormData(r))if(Gt.hasStandardBrowserEnv||Gt.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(St.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,r])=>{t.includes(e.toLowerCase())&&i.set(e,r)})}if(Gt.hasStandardBrowserEnv&&(s&&St.isFunction(s)&&(s=s(t)),s||!1!==s&&dr(t.url))){const e=a&&n&&ur.read(n);e&&i.set(a,e)}return t},gr="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const s=fr(e);let a=s.data;const n=rr.from(s.headers).normalize();let i,o,l,c,d,{responseType:u,onUploadProgress:m,onDownloadProgress:p}=s;function h(){c&&c(),d&&d(),s.cancelToken&&s.cancelToken.unsubscribe(i),s.signal&&s.signal.removeEventListener("abort",i)}let f=new XMLHttpRequest;function g(){if(!f)return;const s=rr.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());ir(function(e){t(e),h()},function(e){r(e),h()},{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:s,config:e,request:f}),f=null}f.open(s.method.toUpperCase(),s.url,!0),f.timeout=s.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(r(new kt("Request aborted",kt.ECONNABORTED,e,f)),f=null)},f.onerror=function(t){const s=new kt(t&&t.message?t.message:"Network Error",kt.ERR_NETWORK,e,f);s.event=t||null,r(s),f=null},f.ontimeout=function(){let t=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const a=s.transitional||qt;s.timeoutErrorMessage&&(t=s.timeoutErrorMessage),r(new kt(t,a.clarifyTimeoutError?kt.ETIMEDOUT:kt.ECONNABORTED,e,f)),f=null},void 0===a&&n.setContentType(null),"setRequestHeader"in f&&St.forEach(n.toJSON(),function(e,t){f.setRequestHeader(t,e)}),St.isUndefined(s.withCredentials)||(f.withCredentials=!!s.withCredentials),u&&"json"!==u&&(f.responseType=s.responseType),p&&([l,d]=or(p,!0),f.addEventListener("progress",l)),m&&f.upload&&([o,c]=or(m),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(s.cancelToken||s.signal)&&(i=t=>{f&&(r(!t||t.type?new nr(null,e,f):t),f.abort(),f=null)},s.cancelToken&&s.cancelToken.subscribe(i),s.signal&&(s.signal.aborted?i():s.signal.addEventListener("abort",i)));const x=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(s.url);x&&-1===Gt.protocols.indexOf(x)?r(new kt("Unsupported protocol "+x+":",kt.ERR_BAD_REQUEST,e)):f.send(a||null)})},xr=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,s=new AbortController;const a=function(e){if(!r){r=!0,i();const t=e instanceof Error?e:this.reason;s.abort(t instanceof kt?t:new nr(t instanceof Error?t.message:t))}};let n=t&&setTimeout(()=>{n=null,a(new kt(`timeout ${t} of ms exceeded`,kt.ETIMEDOUT))},t);const i=()=>{e&&(n&&clearTimeout(n),n=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));const{signal:o}=s;return o.unsubscribe=()=>St.asap(i),o}},yr=function*(e,t){let r=e.byteLength;if(r<t)return void(yield e);let s,a=0;for(;a<r;)s=a+t,yield e.slice(a,s),a=s},br=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},jr=(e,t,r,s)=>{const a=async function*(e,t){for await(const r of br(e))yield*yr(r,t)}(e,t);let n,i=0,o=e=>{n||(n=!0,s&&s(e))};return new ReadableStream({async pull(e){try{const{done:t,value:s}=await a.next();if(t)return o(),void e.close();let n=s.byteLength;if(r){let e=i+=n;r(e)}e.enqueue(new Uint8Array(s))}catch(t){throw o(t),t}},cancel:e=>(o(e),a.return())},{highWaterMark:2})},{isFunction:vr}=St,wr=(({Request:e,Response:t})=>({Request:e,Response:t}))(St.global),{ReadableStream:_r,TextEncoder:Nr}=St.global,Er=(e,...t)=>{try{return!!e(...t)}catch(r){return!1}},Sr=e=>{e=St.merge.call({skipUndefined:!0},wr,e);const{fetch:t,Request:r,Response:s}=e,a=t?vr(t):"function"==typeof fetch,n=vr(r),i=vr(s);if(!a)return!1;const o=a&&vr(_r),l=a&&("function"==typeof Nr?(e=>t=>e.encode(t))(new Nr):async e=>new Uint8Array(await new r(e).arrayBuffer())),c=n&&o&&Er(()=>{let e=!1;const t=new r(Gt.origin,{body:new _r,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),d=i&&o&&Er(()=>St.isReadableStream(new s("").body)),u={stream:d&&(e=>e.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!u[e]&&(u[e]=(t,r)=>{let s=t&&t[e];if(s)return s.call(t);throw new kt(`Response type '${e}' is not supported`,kt.ERR_NOT_SUPPORT,r)})});const m=async(e,t)=>{const s=St.toFiniteNumber(e.getContentLength());return null==s?(async e=>{if(null==e)return 0;if(St.isBlob(e))return e.size;if(St.isSpecCompliantForm(e)){const t=new r(Gt.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return St.isArrayBufferView(e)||St.isArrayBuffer(e)?e.byteLength:(St.isURLSearchParams(e)&&(e+=""),St.isString(e)?(await l(e)).byteLength:void 0)})(t):s};return async e=>{let{url:a,method:i,data:o,signal:l,cancelToken:p,timeout:h,onDownloadProgress:f,onUploadProgress:g,responseType:x,headers:y,withCredentials:b="same-origin",fetchOptions:j}=fr(e),v=t||fetch;x=x?(x+"").toLowerCase():"text";let w=xr([l,p&&p.toAbortSignal()],h),_=null;const N=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let E;try{if(g&&c&&"get"!==i&&"head"!==i&&0!==(E=await m(y,o))){let e,t=new r(a,{method:"POST",body:o,duplex:"half"});if(St.isFormData(o)&&(e=t.headers.get("content-type"))&&y.setContentType(e),t.body){const[e,r]=lr(E,or(cr(g)));o=jr(t.body,65536,e,r)}}St.isString(b)||(b=b?"include":"omit");const t=n&&"credentials"in r.prototype,l={...j,signal:w,method:i.toUpperCase(),headers:y.normalize().toJSON(),body:o,duplex:"half",credentials:t?b:void 0};_=n&&new r(a,l);let p=await(n?v(_,j):v(a,l));const h=d&&("stream"===x||"response"===x);if(d&&(f||h&&N)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=p[t]});const t=St.toFiniteNumber(p.headers.get("content-length")),[r,a]=f&&lr(t,or(cr(f),!0))||[];p=new s(jr(p.body,65536,r,()=>{a&&a(),N&&N()}),e)}x=x||"text";let S=await u[St.findKey(u,x)||"text"](p,e);return!h&&N&&N(),await new Promise((t,r)=>{ir(t,r,{data:S,headers:rr.from(p.headers),status:p.status,statusText:p.statusText,config:e,request:_})})}catch(S){if(N&&N(),S&&"TypeError"===S.name&&/Load failed|fetch/i.test(S.message))throw Object.assign(new kt("Network Error",kt.ERR_NETWORK,e,_),{cause:S.cause||S});throw kt.from(S,S&&S.code,e,_)}}},kr=new Map,Or=e=>{let t=e&&e.env||{};const{fetch:r,Request:s,Response:a}=t,n=[s,a,r];let i,o,l=n.length,c=kr;for(;l--;)i=n[l],o=c.get(i),void 0===o&&c.set(i,o=l?new Map:Sr(t)),c=o;return o};Or();const Pr={http:null,xhr:gr,fetch:{get:Or}};St.forEach(Pr,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(r){}Object.defineProperty(e,"adapterName",{value:t})}});const Ar=e=>`- ${e}`,Rr=e=>St.isFunction(e)||null===e||!1===e;const Cr={getAdapter:function(e,t){e=St.isArray(e)?e:[e];const{length:r}=e;let s,a;const n={};for(let i=0;i<r;i++){let r;if(s=e[i],a=s,!Rr(s)&&(a=Pr[(r=String(s)).toLowerCase()],void 0===a))throw new kt(`Unknown adapter '${r}'`);if(a&&(St.isFunction(a)||(a=a.get(t))))break;n[r||"#"+i]=a}if(!a){const e=Object.entries(n).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new kt("There is no suitable adapter to dispatch the request "+(r?e.length>1?"since :\n"+e.map(Ar).join("\n"):" "+Ar(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return a},adapters:Pr};function Tr(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new nr(null,e)}function Ir(e){Tr(e),e.headers=rr.from(e.headers),e.data=sr.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Cr.getAdapter(e.adapter||Xt.adapter,e)(e).then(function(t){return Tr(e),t.data=sr.call(e,e.transformResponse,t),t.headers=rr.from(t.headers),t},function(t){return ar(t)||(Tr(e),t&&t.response&&(t.response.data=sr.call(e,e.transformResponse,t.response),t.response.headers=rr.from(t.response.headers))),Promise.reject(t)})}const Lr="1.13.2",Dr={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Dr[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const zr={};Dr.transitional=function(e,t,r){return(s,a,n)=>{if(!1===e)throw new kt(function(e,t){return"[Axios v"+Lr+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}(a," has been removed"+(t?" in "+t:"")),kt.ERR_DEPRECATED);return t&&!zr[a]&&(zr[a]=!0),!e||e(s,a,n)}},Dr.spelling=function(e){return(e,t)=>!0};const Mr={assertOptions:function(e,t,r){if("object"!=typeof e)throw new kt("options must be an object",kt.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let a=s.length;for(;a-- >0;){const n=s[a],i=t[n];if(i){const t=e[n],r=void 0===t||i(t,n,e);if(!0!==r)throw new kt("option "+n+" must be "+r,kt.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new kt("Unknown option "+n,kt.ERR_BAD_OPTION)}},validators:Dr},Ur=Mr.validators;let Fr=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Ft,response:new Ft}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(s){}}throw r}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=hr(this.defaults,t);const{transitional:r,paramsSerializer:s,headers:a}=t;void 0!==r&&Mr.assertOptions(r,{silentJSONParsing:Ur.transitional(Ur.boolean),forcedJSONParsing:Ur.transitional(Ur.boolean),clarifyTimeoutError:Ur.transitional(Ur.boolean)},!1),null!=s&&(St.isFunction(s)?t.paramsSerializer={serialize:s}:Mr.assertOptions(s,{encode:Ur.function,serialize:Ur.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Mr.assertOptions(t,{baseUrl:Ur.spelling("baseURL"),withXsrfToken:Ur.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let n=a&&St.merge(a.common,a[t.method]);a&&St.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=rr.concat(n,a);const i=[];let o=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!o){const e=[Ir.bind(this),void 0];for(e.unshift(...i),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let m=t;for(;u<d;){const e=i[u++],t=i[u++];try{m=e(m)}catch(p){t.call(this,p);break}}try{c=Ir.call(this,m)}catch(p){return Promise.reject(p)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return Ut(mr((e=hr(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};St.forEach(["delete","get","head","options"],function(e){Fr.prototype[e]=function(t,r){return this.request(hr(r||{},{method:e,url:t,data:(r||{}).data}))}}),St.forEach(["post","put","patch"],function(e){function t(t){return function(r,s,a){return this.request(hr(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:s}))}}Fr.prototype[e]=t(),Fr.prototype[e+"Form"]=t(!0)});const qr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(qr).forEach(([e,t])=>{qr[t]=e});const $r=function e(t){const r=new Fr(t),s=Me(Fr.prototype.request,r);return St.extend(s,Fr.prototype,r,{allOwnKeys:!0}),St.extend(s,r,null,{allOwnKeys:!0}),s.create=function(r){return e(hr(t,r))},s}(Xt);$r.Axios=Fr,$r.CanceledError=nr,$r.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const s=new Promise(e=>{r.subscribe(e),t=e}).then(e);return s.cancel=function(){r.unsubscribe(t)},s},e(function(e,s,a){r.reason||(r.reason=new nr(e,s,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e(function(e){t=e}),cancel:t}}},$r.isCancel=ar,$r.VERSION=Lr,$r.toFormData=It,$r.AxiosError=kt,$r.Cancel=$r.CanceledError,$r.all=function(e){return Promise.all(e)},$r.spread=function(e){return function(t){return e.apply(null,t)}},$r.isAxiosError=function(e){return St.isObject(e)&&!0===e.isAxiosError},$r.mergeConfig=hr,$r.AxiosHeaders=rr,$r.formToJSON=e=>Kt(St.isHTMLForm(e)?new FormData(e):e),$r.getAdapter=Cr.getAdapter,$r.HttpStatusCode=qr,$r.default=$r;const{Axios:Br,AxiosError:Vr,CanceledError:Jr,isCancel:Hr,CancelToken:Wr,VERSION:Gr,all:Kr,Cancel:Xr,isAxiosError:Yr,spread:Qr,toFormData:Zr,AxiosHeaders:es,HttpStatusCode:ts,formToJSON:rs,getAdapter:ss,mergeConfig:as}=$r,ns="auth_redirecting",is=$r.create({baseURL:"/api",timeout:3e4,withCredentials:!1});is.interceptors.request.use(e=>{const t=Le.getState().token;return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),is.interceptors.response.use(e=>e,e=>{var t;return 401===(null==(t=e.response)?void 0:t.status)&&"true"!==sessionStorage.getItem(ns)&&(sessionStorage.setItem(ns,"true"),setTimeout(()=>sessionStorage.removeItem(ns),5e3),Le.getState().logout(),setTimeout(()=>{window.location.href="/"},100)),Promise.reject(e)});const os=async e=>{var t,r;try{return(await is.post("/auth/register",e)).data}catch(s){throw new Error((null==(r=null==(t=s.response)?void 0:t.data)?void 0:r.message)||"注册失败，请稍后再试")}},ls=async(e,t)=>{var r,s;try{return(await is.post("/auth/register",{phone:e,verifyCode:t})).data}catch(a){throw new Error((null==(s=null==(r=a.response)?void 0:r.data)?void 0:s.message)||"登录失败")}};function cs({isOpen:t,onClose:r,initialMode:s="login"}){const[a,n]=e.useState(s),[i,o]=e.useState("password"),[l,c]=e.useState(!1),[d,u]=e.useState(0),{login:m}=Le(),[x,y]=e.useState({phone:"",password:"",verifyCode:""}),[b,j]=e.useState({phone:"",verifyCode:""});e.useEffect(()=>{n(s)},[s]),e.useEffect(()=>{if(d>0){const e=setTimeout(()=>u(d-1),1e3);return()=>clearTimeout(e)}},[d]);const v=async(e=!1)=>{const t=e?b.phone:x.phone;if(t)if(/^1[3-9]\d{9}$/.test(t))try{c(!0);const e=await(async e=>{var t,r;try{return(await is.post("/auth/send-code",{phone:e})).data}catch(s){throw new Error((null==(r=null==(t=s.response)?void 0:t.data)?void 0:r.message)||"发送验证码失败")}})(t);e.success&&(g.success("验证码已发送"),u(60),e.code&&g.info(`验证码: ${e.code}`))}catch(r){g.error((null==r?void 0:r.message)||"发送验证码失败")}finally{c(!1)}else g.error("请输入正确的手机号");else g.error("请输入手机号")};return t?Y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in-up",children:[Y.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:r}),Y.jsxs("div",{className:"relative bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden",children:[Y.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 hover:bg-stone-100 rounded-full transition-colors z-10",children:Y.jsx(p,{className:"w-5 h-5 text-stone-400"})}),Y.jsx("div",{className:"p-10 pt-12",children:"login"===a?Y.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),x.phone)if("password"!==i||x.password)if("code"!==i||x.verifyCode)try{let e;c(!0),e="code"===i?await ls(x.phone,x.verifyCode):await(async e=>{var t,r;try{const t={username:e.username,password:e.password};return(await is.post("/auth/login",t)).data}catch(s){throw new Error((null==(r=null==(t=s.response)?void 0:t.data)?void 0:r.message)||"登录失败，请检查您的凭证")}})({username:x.phone,password:x.password}),e.success&&e.data?(m(e.data.user,e.data.token),g.success("登录成功！"),r()):g.error(e.message||"登录失败")}catch(t){g.error((null==t?void 0:t.message)||"登录失败")}finally{c(!1)}else g.error("请输入验证码");else g.error("请输入密码");else g.error("请输入手机号")},children:[Y.jsxs("div",{className:"text-center mb-6",children:[Y.jsx("h2",{className:"text-xl font-semibold text-stone-900 mb-1",children:"欢迎回来"}),Y.jsx("p",{className:"text-stone-400 text-xs",children:"登录以访问您的定制需求和订单"})]}),Y.jsxs("div",{className:"space-y-3",children:[Y.jsxs("div",{children:[Y.jsx("label",{className:"text-xs text-stone-600 block mb-1.5",children:"手机号码"}),Y.jsx("input",{type:"tel",placeholder:"请输入手机号",value:x.phone,onChange:e=>y({...x,phone:e.target.value}),className:"w-full bg-stone-50 border-0 rounded-lg px-4 py-3 text-sm focus:ring-1 focus:ring-primary outline-none transition-all"})]}),"password"===i?Y.jsxs("div",{children:[Y.jsx("label",{className:"text-xs text-stone-600 block mb-1.5",children:"密码"}),Y.jsx("input",{type:"password",placeholder:"请输入密码",value:x.password,onChange:e=>y({...x,password:e.target.value}),className:"w-full bg-stone-50 border-0 rounded-lg px-4 py-3 text-sm focus:ring-1 focus:ring-primary outline-none transition-all"})]}):Y.jsxs("div",{children:[Y.jsx("label",{className:"text-xs text-stone-600 block mb-1.5",children:"验证码"}),Y.jsxs("div",{className:"flex gap-2",children:[Y.jsx("input",{type:"text",placeholder:"0000",maxLength:6,value:x.verifyCode,onChange:e=>y({...x,verifyCode:e.target.value}),className:"flex-1 bg-stone-50 border-0 rounded-lg px-4 py-3 text-sm text-center tracking-widest focus:ring-1 focus:ring-primary outline-none transition-all"}),Y.jsx("button",{type:"button",onClick:()=>v(!1),disabled:d>0||l,className:"px-4 py-3 bg-stone-50 text-stone-600 rounded-lg text-xs font-medium hover:bg-stone-100 transition-colors disabled:opacity-50 whitespace-nowrap",children:d>0?`${d}s`:"获取验证码"})]})]}),Y.jsx("button",{type:"submit",disabled:l,className:"w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-primary-900 transition-all flex items-center justify-center gap-2 mt-4 disabled:opacity-70",children:l?Y.jsx(h,{className:"w-4 h-4 animate-spin"}):Y.jsxs(Y.Fragment,{children:["登录",Y.jsx(f,{className:"w-4 h-4"})]})}),Y.jsx("div",{className:"text-center text-xs text-stone-400 mt-3",children:Y.jsx("button",{type:"button",onClick:()=>o("password"===i?"code":"password"),className:"hover:text-primary transition-colors",children:"password"===i?"验证码登录":"密码登录"})})]}),Y.jsxs("div",{className:"mt-5 text-center text-xs text-stone-400",children:["还没有账号？",Y.jsx("button",{type:"button",onClick:()=>n("register"),className:"text-primary ml-1 hover:underline",children:"立即注册"})]})]}):Y.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),b.phone&&b.verifyCode)try{c(!0);const e=await ls(b.phone,b.verifyCode);e.success&&e.data?(g.success("登录成功！"),m(e.data.user,e.data.token),r()):g.error(e.message||"登录失败")}catch(t){g.error((null==t?void 0:t.message)||"登录失败")}finally{c(!1)}else g.error("请填写手机号和验证码")},className:"space-y-4",children:[Y.jsxs("div",{className:"text-center mb-4",children:[Y.jsx("h3",{className:"text-lg font-semibold text-stone-800",children:"立即注册"}),Y.jsx("p",{className:"text-xs text-stone-500 mt-1",children:"只需手机号+验证码，无需密码"})]}),Y.jsxs("div",{className:"space-y-3",children:[Y.jsxs("div",{children:[Y.jsx("label",{className:"text-xs text-stone-600 block mb-1.5",children:"手机号码"}),Y.jsx("input",{type:"tel",placeholder:"请输入手机号",value:b.phone,onChange:e=>j({...b,phone:e.target.value}),className:"w-full bg-stone-50 border-0 rounded-lg px-4 py-3 text-sm focus:ring-1 focus:ring-primary outline-none transition-all"})]}),Y.jsxs("div",{children:[Y.jsx("label",{className:"text-xs text-stone-600 block mb-1.5",children:"验证码"}),Y.jsxs("div",{className:"flex gap-2",children:[Y.jsx("input",{type:"text",placeholder:"0000",maxLength:6,value:b.verifyCode,onChange:e=>j({...b,verifyCode:e.target.value}),className:"flex-1 bg-stone-50 border-0 rounded-lg px-4 py-3 text-sm text-center tracking-widest focus:ring-1 focus:ring-primary outline-none transition-all"}),Y.jsx("button",{type:"button",onClick:()=>v(!0),disabled:d>0||l,className:"px-4 py-3 bg-stone-50 text-stone-600 rounded-lg text-xs font-medium hover:bg-stone-100 transition-colors disabled:opacity-50 whitespace-nowrap",children:d>0?`${d}s`:"获取验证码"})]})]}),Y.jsx("button",{type:"submit",disabled:l,className:"w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-primary-900 transition-all flex items-center justify-center gap-2 mt-4 disabled:opacity-70",children:l?Y.jsx(h,{className:"w-5 h-5 animate-spin"}):Y.jsxs(Y.Fragment,{children:["立即注册",Y.jsx(f,{className:"w-4 h-4"})]})})]}),Y.jsxs("div",{className:"mt-5 text-center text-xs text-stone-400",children:["已有账号？",Y.jsx("button",{type:"button",onClick:()=>n("login"),className:"text-primary ml-1 hover:underline",children:"去登录"})]})]})})]})]}):null}function ds({isOpen:t,onClose:r}){const{user:s,updateUser:a}=Le(),[n,i]=e.useState(!1),[o,l]=e.useState({nickname:"",gender:""});e.useEffect(()=>{s&&l({nickname:s.nickname||"",gender:s.gender||""})},[s]);return t?Y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 backdrop-blur-sm bg-black/30",children:Y.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-fade-in-up",children:[Y.jsx("div",{className:"bg-gradient-to-r from-primary to-primary-800 p-6 text-white",children:Y.jsxs("div",{className:"flex items-center justify-between",children:[Y.jsxs("div",{className:"flex items-center gap-3",children:[Y.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center",children:Y.jsx(x,{className:"w-6 h-6"})}),Y.jsxs("div",{children:[Y.jsx("h2",{className:"text-xl font-bold",children:"完善个人信息"}),Y.jsx("p",{className:"text-sm text-white/80",children:"欢迎加入小迪严选"})]})]}),Y.jsx("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:Y.jsx(p,{className:"w-5 h-5"})})]})}),Y.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),o.nickname.trim())if(o.gender)try{i(!0);const e=await fetch("https://pkochbpmcgaa.sealoshzh.site/api/users/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({nickname:o.nickname.trim(),gender:o.gender})}),t=await e.json();if(t.success){a({...s,nickname:o.nickname.trim(),gender:o.gender});const e=(null==s?void 0:s._id)||(null==s?void 0:s.id);e&&localStorage.setItem(`profile_completed_${e}`,"true"),g.success("信息保存成功！"),r()}else g.error(t.message||"保存失败")}catch(t){g.error("保存失败，请重试")}finally{i(!1)}else g.error("请选择您的性别");else g.error("请输入您的姓名")},className:"p-6 space-y-5",children:[Y.jsxs("div",{children:[Y.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["您的姓名 ",Y.jsx("span",{className:"text-red-500",children:"*"})]}),Y.jsx("input",{type:"text",placeholder:"请输入您的姓名",value:o.nickname,onChange:e=>l({...o,nickname:e.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all"})]}),Y.jsxs("div",{children:[Y.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["您的性别 ",Y.jsx("span",{className:"text-red-500",children:"*"})]}),Y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[Y.jsxs("button",{type:"button",onClick:()=>l({...o,gender:"male"}),className:"py-3 px-4 rounded-xl border-2 flex items-center justify-center gap-2 transition-all "+("male"===o.gender?"border-primary bg-primary/5 text-primary":"border-gray-200 text-gray-600 hover:border-gray-300"),children:["male"===o.gender&&Y.jsx(y,{className:"w-4 h-4"}),"男"]}),Y.jsxs("button",{type:"button",onClick:()=>l({...o,gender:"female"}),className:"py-3 px-4 rounded-xl border-2 flex items-center justify-center gap-2 transition-all "+("female"===o.gender?"border-primary bg-primary/5 text-primary":"border-gray-200 text-gray-600 hover:border-gray-300"),children:["female"===o.gender&&Y.jsx(y,{className:"w-4 h-4"}),"女"]})]})]}),Y.jsx("button",{type:"submit",disabled:n,className:"w-full py-3 rounded-xl bg-primary text-white font-medium hover:bg-primary-800 transition-colors disabled:opacity-50",children:n?"保存中...":"保存并继续"}),Y.jsx("p",{className:"text-xs text-center text-gray-400",children:"完善信息后可享受更好的购物体验"})]})]})}):null}function us(){return null}const ms=e.lazy(()=>te(()=>import("./AdminSidebar-gJzMtIA2.js"),__vite__mapDeps([0]))),ps=e.lazy(()=>te(()=>import("./AdminHeader-D7S6tmiu.js"),__vite__mapDeps([0])));function hs(){const[t,r]=e.useState(!0);return Y.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[Y.jsx(e.Suspense,{fallback:Y.jsx("div",{className:"w-64 bg-white"}),children:Y.jsx(ms,{open:t,setOpen:r})}),Y.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64",children:[Y.jsx(e.Suspense,{fallback:Y.jsx("div",{className:"h-16 bg-white border-b"}),children:Y.jsx(ps,{toggleSidebar:()=>r(!t)})}),Y.jsx("main",{className:"flex-1 p-6 overflow-auto bg-gray-50",children:Y.jsx(e.Suspense,{fallback:Y.jsx("div",{className:"text-center py-8",children:"加载中..."}),children:Y.jsx(a,{})})})]})]})}const fs=e=>{if(!e)return"";const t=Object.keys(e).sort(),r=[];return t.forEach(t=>{e[t]&&r.push(`${t}:${e[t]}`)}),r.join("|")},gs=Re()(Ie((e,t)=>({items:[],conciergeMode:!1,conciergeOrderInfo:void 0,addItem:(t,r,s=1,a,n)=>{e(e=>{const i=((e,t)=>{const r=e.discountPrice&&e.discountPrice>0&&e.discountPrice<e.price?e.discountPrice:e.price,s=e.materialUpgradePrices||{};let a=0;const n={};if(t){const e=Object.values(t).filter(e=>!!e),r=new Set;e.forEach(e=>{const t=(i=e).includes("普通皮")?"普通皮":i.includes("全青皮")?"全青皮":i.includes("牛皮")?"牛皮":i.includes("绒布")?"绒布":i.includes("麻布")?"麻布":"other";var i;const o=s[t]||s[e]||0;n[e]=o,r.has(t)||(a+=o,r.add(t))})}return{price:r+a,materialPriceMap:n}})(r,a),o=void 0!==n?n:i.price,l=i.materialPriceMap,c=fs(a);return e.items.find(e=>{const s=fs(e.selectedMaterials);return e.product._id===t._id&&e.sku._id===r._id&&s===c})?{items:e.items.map(e=>{const a=fs(e.selectedMaterials);return e.product._id===t._id&&e.sku._id===r._id&&a===c?{...e,quantity:e.quantity+s}:e})}:{items:[...e.items,{product:t,sku:r,quantity:s,price:o,selectedMaterials:a,materialUpgradePrices:l}]}})},removeItem:(t,r,s)=>{e(e=>{const a=fs(s);return{items:e.items.filter(e=>{const s=fs(e.selectedMaterials);return!(e.product._id===t&&e.sku._id===r&&s===a)})}})},updateQuantity:(t,r,s,a)=>{e(e=>{const n=fs(a);return{items:e.items.map(e=>{const a=fs(e.selectedMaterials);return e.product._id===t&&e.sku._id===r&&a===n?{...e,quantity:s}:e})}})},clearCart:()=>e({items:[]}),getTotalItems:()=>t().items.reduce((e,t)=>e+t.quantity,0),getTotalPrice:()=>t().items.reduce((e,t)=>e+t.price*t.quantity,0),loadFromSimpleItems:t=>{const r=(new Date).toISOString(),s=t.map((e,t)=>{const s=e.image||"/placeholder.svg",a=e.id||`temp-product-${Date.now()}-${t}`,n={_id:`${a}-sku`,material:"默认",stock:999,price:e.price,discountPrice:e.price,images:[s]};return{product:{_id:a,name:e.name,description:e.description||"代客下单生成的临时商品，修改后即可再次提交。",category:"sofa",style:"modern",basePrice:e.price,images:[s],skus:[n],isCombo:!1,tags:["代客下单"],specifications:{},status:"active",views:0,sales:0,rating:5,reviews:0,order:0,createdAt:r,updatedAt:r},sku:n,quantity:e.quantity,price:e.price}});e({items:s})},enterConciergeMode:(t,r,s,a,n)=>{const i=a.map(e=>({id:e.id,name:e.name,price:e.price,quantity:e.quantity,image:e.image,description:e.description}));e(e=>{const a=(new Date).toISOString();return{items:i.map((e,t)=>{const r=e.image||"/placeholder.svg",s=e.id||`temp-product-${Date.now()}-${t}`,n={_id:`${s}-sku`,material:"默认",stock:999,price:e.price,discountPrice:e.price,images:[r]};return{product:{_id:s,name:e.name,description:e.description||"代客下单生成的临时商品，修改后即可再次提交。",category:"sofa",style:"modern",basePrice:e.price,images:[r],skus:[n],isCombo:!1,tags:["代客下单"],specifications:{},status:"active",views:0,sales:0,rating:5,reviews:0,order:0,createdAt:a,updatedAt:a},sku:n,quantity:e.quantity,price:e.price}}),conciergeMode:!0,conciergeOrderInfo:{orderId:t,customerName:r,customerPhone:s,orderSource:n}}})},exitConciergeMode:()=>{e({items:[],conciergeMode:!1,conciergeOrderInfo:void 0})}}),{name:"cart-storage"})),xs=Re((e,t)=>({favorites:[],loadFavorites:async()=>{try{const t=await(async(e=1,t=10)=>{var r,s;try{return(await is.get("/favorites",{params:{page:e,limit:t}})).data.data}catch(a){throw new Error((null==(s=null==(r=a.response)?void 0:r.data)?void 0:s.message)||"获取收藏列表失败")}})();e({favorites:t})}catch(t){}},addFavorite:async e=>{var r,s,a;try{const n=e;return await(async(e,t)=>{var r,s;try{return(await is.post("/favorites",{productId:e,...t})).data}catch(a){throw new Error((null==(s=null==(r=a.response)?void 0:r.data)?void 0:s.message)||"添加收藏失败")}})(e._id,{productName:e.name,thumbnail:(null==(r=e.images)?void 0:r[0])||n.thumbnail||"",price:n.price||(null==(a=null==(s=e.skus)?void 0:s[0])?void 0:a.price)||0}),await t().loadFavorites(),!0}catch(n){return!1}},removeFavorite:async e=>{try{await t().loadFavorites();const r=t().favorites.find(t=>{var r;if(!t)return!1;return("string"==typeof t.product?t.product:null==(r=t.product)?void 0:r._id)===e});if(!r)throw new Error("未找到该收藏记录");await(async e=>{var t,r;try{await is.delete(`/favorites/${e}`)}catch(s){throw new Error((null==(r=null==(t=s.response)?void 0:t.data)?void 0:r.message)||"删除收藏失败")}})(r._id),await t().loadFavorites()}catch(r){throw r}},toggleFavorite:async e=>{try{return await t().isFavorited(e._id)?(await t().removeFavorite(e._id),!1):await t().addFavorite(e)}catch(r){return!1}},isFavorited:async e=>{try{const t=await(async e=>{var t,r;try{return(await is.get(`/favorites/check/${e}`)).data.data}catch(s){throw new Error((null==(r=null==(t=s.response)?void 0:t.data)?void 0:r.message)||"检查收藏状态失败")}})(e);return t.isFavorited}catch(t){return!1}},clearAll:async()=>{try{await(async()=>{var e,t;try{await is.delete("/favorites")}catch(r){throw new Error((null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.message)||"清空收藏失败")}})(),e({favorites:[]})}catch(t){}},getFavoriteCount:()=>t().favorites.length})),ys=async()=>{var e,t,r;try{return(await is.get("/compare")).data.data.items||[]}catch(s){if(401===(null==(e=s.response)?void 0:e.status))return[];throw new Error((null==(r=null==(t=s.response)?void 0:t.data)?void 0:r.message)||"获取对比列表失败")}},bs=async(e,t,r)=>{var s,a;try{return{success:!0,message:(await is.post("/compare",{productId:e,skuId:t,selectedMaterials:r})).data.message||"已添加到对比"}}catch(n){return{success:!1,message:(null==(a=null==(s=n.response)?void 0:s.data)?void 0:a.message)||"添加对比失败"}}},js=async(e,t,r)=>{var s,a;try{await is.delete(`/compare/${e}`,{data:{skuId:t,selectedMaterials:r}})}catch(n){throw new Error((null==(a=null==(s=n.response)?void 0:s.data)?void 0:a.message)||"移除对比失败")}},vs=async(e,t,r)=>{try{return(await ys()).some(t=>t.productId===e)}catch(s){return!1}},ws=async()=>{var e,t;try{await is.delete("/compare")}catch(r){throw new Error((null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.message)||"清空对比列表失败")}},_s=async()=>{try{return(await is.get("/compare/stats")).data.data.total||0}catch(e){return 0}},Ns=Re((e,t)=>({compareItems:[],isModalOpen:!1,loadCompareItems:async()=>{try{const t=await ys();e({compareItems:t})}catch(t){e({compareItems:[]})}},addToCompare:async(e,r,s)=>{const a=await bs(e,r,s);return a.success&&await t().loadCompareItems(),a},removeFromCompare:async(e,r,s)=>{await js(e,r,s),await t().loadCompareItems()},isInCompare:async(e,t,r)=>await vs(e),clearAll:async()=>{await ws(),e({compareItems:[]})},getCount:()=>t().compareItems.length,openModal:()=>e({isModalOpen:!0}),closeModal:()=>e({isModalOpen:!1})})),Es=async()=>{try{const e=await is.get("/categories");return(e.data.data||[]).map(e=>({...e,discounts:e.discounts||[],hasDiscount:e.hasDiscount||!1,productCount:e.productCount||0,level:e.level||1,children:e.children||[]}))}catch(e){throw e}},Ss=async()=>Es(),ks=async e=>{try{return(await is.post("/categories",e)).data.data}catch(t){throw t}},Os=async(e,t)=>{try{return(await is.put(`/categories/${e}`,t)).data.data}catch(r){throw r}},Ps=async e=>{try{return(await is.delete(`/categories/${e}`)).data.success}catch(t){throw t}},As=async e=>{try{return(await is.patch(`/categories/${e}/status`)).data.success}catch(t){throw t}},Rs=async(e,t)=>{try{return(await is.post(`/categories/${e}/discounts`,{discounts:t})).data.success}catch(r){throw r}},Cs=async e=>{try{return(await is.post("/categories/discounts/batch",{discounts:e})).data.success}catch(t){throw t}},Ts=async()=>{try{return(await is.get("/categories/stats")).data.data}catch(e){throw e}},Is=async(e,t)=>{try{const r=(e.size/1024).toFixed(2),s=(e.size/1024/1024).toFixed(2),a=(e.size,new FormData);a.append("file",e);return(await is.post("/files/upload",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(e.total){const r=Math.round(100*e.loaded/e.total);t&&t(r)}}})).data}catch(r){throw r}},Ls=(e,t)=>{if(!e||""===e.trim())return"/placeholder.svg";if(e.startsWith("http")||e.startsWith("/api/"))return e;if(e.startsWith("/"))return e;if(e.startsWith("data:"))return"/placeholder.svg";let r=`/api/files/${e}`;if(t){const e=new URLSearchParams;t.width&&e.append("w",t.width.toString()),t.height&&e.append("h",t.height.toString()),t.quality&&e.append("q",t.quality.toString());const s=e.toString();s&&(r+=`?${s}`)}return r},Ds=(e,t=200)=>Ls(e,{width:t,height:t,quality:t<=100?60:t<=300?70:80}),zs=async e=>{try{return(await is.get("/products",{params:e})).data}catch(t){throw t}},Ms=async e=>{try{return(await is.get(`/products/${e}`)).data.data}catch(t){return null}},Us=async e=>{try{return(await is.post("/products",e)).data}catch(t){throw t}},Fs=async(e,t)=>{try{return(await is.put(`/products/${e}`,t)).data}catch(r){throw r}},qs=async e=>{try{return(await is.delete(`/products/${e}`)).data}catch(t){throw t}},$s=async e=>{try{return(await is.patch(`/products/${e}/status`)).data}catch(t){throw t}};function Bs(...e){return q(e)}function Vs(e){return`¥${Math.round(e).toLocaleString("zh-CN")}`}function Js(e){return new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})}const Hs=["沙发","茶几","餐桌","床","衣柜","书柜","电视柜","鞋柜"];function Ws({isOpen:t,onClose:r}){const s=n(),a=e.useRef(null),[i,o]=e.useState(""),[l,c]=e.useState([]),[d,u]=e.useState([]),[m,h]=e.useState([]),[g,x]=e.useState([]),[y,N]=e.useState(!1),[E,S]=e.useState([]),k=e.useRef(null);e.useEffect(()=>{const e=localStorage.getItem("recent_searches");e&&S(JSON.parse(e));(async()=>{try{const[e,t]=await Promise.all([zs({pageSize:200}),Es()]);h(e.data||[]),x(t||[])}catch(e){}})()},[]),e.useEffect(()=>{t&&setTimeout(()=>{var e;return null==(e=a.current)?void 0:e.focus()},100)},[t]);const O=e.useCallback(e=>{if(!e.trim())return c([]),void u([]);N(!0);const t=e.toLowerCase(),r=new Set;m.forEach(e=>{const s=e.name||"";s.toLowerCase().includes(t)&&r.add(s)}),g.forEach(e=>{e.name.toLowerCase().includes(t)&&r.add(e.name)}),u(Array.from(r).slice(0,5));const s=m.filter(e=>{const r=(e.name||"").toLowerCase(),s=(e.categoryName||"").toLowerCase();return r.includes(t)||s.includes(t)});c(s.slice(0,6)),N(!1)},[m,g]);e.useEffect(()=>(k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{O(i)},300),()=>{k.current&&clearTimeout(k.current)}),[i,O]);const P=e=>{if(!e.trim())return;const t=[e,...E.filter(t=>t!==e)].slice(0,10);S(t),localStorage.setItem("recent_searches",JSON.stringify(t)),s(`/products?search=${encodeURIComponent(e.trim())}`),r(),o("")};return e.useEffect(()=>{const e=e=>{"Escape"===e.key&&r()};return t&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t,r]),t?Y.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-20 bg-black/50 backdrop-blur-sm",onClick:r,children:Y.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden",onClick:e=>e.stopPropagation(),children:[Y.jsxs("div",{className:"flex items-center gap-3 p-4 border-b",children:[Y.jsx(b,{className:"w-5 h-5 text-gray-400"}),Y.jsx("input",{ref:a,type:"text",value:i,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"===e.key&&P(i)},placeholder:"搜索商品名称、型号、分类...",className:"flex-1 text-lg outline-none placeholder:text-gray-400"}),i&&Y.jsx("button",{onClick:()=>o(""),className:"p-1 hover:bg-gray-100 rounded-full",children:Y.jsx(p,{className:"w-4 h-4 text-gray-400"})}),Y.jsx("button",{onClick:()=>P(i),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:"搜索"})]}),Y.jsxs("div",{className:"max-h-[60vh] overflow-y-auto",children:[i&&d.length>0&&Y.jsxs("div",{className:"px-4 pt-4",children:[Y.jsxs("h3",{className:"text-sm font-medium text-gray-500 mb-2 flex items-center gap-2",children:[Y.jsx(j,{className:"w-4 h-4"}),"猜你想搜"]}),Y.jsx("div",{className:"flex flex-wrap gap-2",children:d.map((e,t)=>Y.jsx("button",{onClick:()=>P(e),className:"px-3 py-1.5 bg-primary/5 hover:bg-primary/10 rounded-full text-sm text-primary transition-colors",children:e},t))})]}),i&&l.length>0&&Y.jsxs("div",{className:"p-4",children:[Y.jsxs("h3",{className:"text-sm font-medium text-gray-500 mb-3 flex items-center gap-2",children:[Y.jsx(v,{className:"w-4 h-4"}),"相关商品"]}),Y.jsx("div",{className:"space-y-2",children:l.map(e=>Y.jsxs("div",{onClick:()=>{return t=e._id,s(`/products/${t}`),r(),void o("");var t},className:"flex items-center gap-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer group transition-colors",children:[Y.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0",children:e.images&&e.images[0]?Y.jsx("img",{src:Ls(e.images[0]),alt:e.name,className:"w-full h-full object-cover"}):Y.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-300",children:Y.jsx(v,{className:"w-6 h-6"})})}),Y.jsxs("div",{className:"flex-1 min-w-0",children:[Y.jsx("p",{className:"font-medium text-gray-900 truncate group-hover:text-primary transition-colors",children:e.name}),e.categoryName&&Y.jsx("p",{className:"text-sm text-gray-500",children:e.categoryName})]}),Y.jsx("div",{className:"text-right",children:Y.jsxs("p",{className:"font-bold text-red-600",children:["¥",Vs(e.basePrice)]})}),Y.jsx(f,{className:"w-4 h-4 text-gray-300 group-hover:text-primary transition-colors"})]},e._id))}),Y.jsxs("button",{onClick:()=>P(i),className:"w-full mt-3 py-2.5 text-center text-primary hover:bg-primary/5 rounded-xl transition-colors text-sm font-medium",children:['查看全部 "',i,'" 的搜索结果 →']})]}),y&&i&&Y.jsxs("div",{className:"p-8 text-center text-gray-500",children:[Y.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto mb-2"}),"搜索中..."]}),i&&!y&&0===l.length&&Y.jsxs("div",{className:"p-8 text-center text-gray-500",children:[Y.jsx("p",{children:"未找到相关商品"}),Y.jsx("p",{className:"text-sm mt-1",children:"试试其他关键词"})]}),!i&&Y.jsxs("div",{className:"p-4 space-y-6",children:[E.length>0&&Y.jsxs("div",{children:[Y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Y.jsxs("h3",{className:"text-sm font-medium text-gray-500 flex items-center gap-2",children:[Y.jsx(w,{className:"w-4 h-4"}),"最近搜索"]}),Y.jsx("button",{onClick:()=>{S([]),localStorage.removeItem("recent_searches")},className:"text-xs text-gray-400 hover:text-gray-600",children:"清除"})]}),Y.jsx("div",{className:"flex flex-wrap gap-2",children:E.map((e,t)=>Y.jsx("button",{onClick:()=>P(e),className:"px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-full text-sm text-gray-700 transition-colors",children:e},t))})]}),Y.jsxs("div",{children:[Y.jsxs("h3",{className:"text-sm font-medium text-gray-500 flex items-center gap-2 mb-3",children:[Y.jsx(_,{className:"w-4 h-4"}),"热门搜索"]}),Y.jsx("div",{className:"flex flex-wrap gap-2",children:Hs.map((e,t)=>Y.jsx("button",{onClick:()=>P(e),className:"px-3 py-1.5 bg-primary/5 hover:bg-primary/10 rounded-full text-sm text-primary transition-colors",children:e},t))})]})]})]})]})}):null}function Gs(){const{isAuthenticated:t,user:r,logout:s}=Le(),{openLogin:a}=De(),{getTotalItems:c}=gs(),{getFavoriteCount:d,loadFavorites:u}=xs(),{getCount:m,loadCompareItems:p,openModal:h}=Ns(),f=n(),[g,y]=e.useState(""),[j,v]=e.useState(!1),[w,_]=e.useState(!1),D=e.useRef(null),[z,M]=e.useState(!1),[U,F]=e.useState([]),q=e.useRef(null),$=e.useRef(null),[B,V]=e.useState(()=>localStorage.getItem("language")||"CN"),[J]=i(),H=o(),W=J.get("category")||"";e.useEffect(()=>{const e=e=>{D.current&&!D.current.contains(e.target)&&v(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),e.useEffect(()=>{t&&(u(),p())},[t]),e.useEffect(()=>{(async()=>{try{const e=await Es();F(e||[])}catch(e){}})()},[]);const G=()=>{$.current&&clearTimeout($.current),M(!0)},K=()=>{$.current=setTimeout(()=>{M(!1)},150)},X=e=>{M(!1),f(e?`/products?category=${e}`:"/categories")},Q=()=>{if(!W)return null;const e=U.find(e=>e.slug===W||e._id===W||e.name===W);return(null==e?void 0:e.name)||W},Z=e=>{const t="cursor-pointer transition-colors relative ";return H.pathname===e?t+"text-primary font-bold after:content-[''] after:absolute after:bottom-[-4px] after:left-0 after:w-full after:h-0.5 after:bg-primary":t+"hover:text-primary"};return Y.jsxs("header",{className:"sticky top-0 z-50 glass border-b border-primary/5",children:[Y.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center justify-between",children:[Y.jsxs("nav",{className:"hidden md:flex items-center space-x-8 text-stone-500 text-sm tracking-wide font-medium",children:[Y.jsx(l,{to:"/",className:Z("/"),children:"首页"}),Y.jsx("span",{onClick:()=>{t?f("/products"):a()},className:`${Z("/products")} cursor-pointer`,children:"商城"}),Y.jsxs("div",{className:"relative",ref:q,onMouseEnter:G,onMouseLeave:K,children:[Y.jsxs("span",{className:`${Z("/categories")} cursor-pointer flex items-center gap-1`,children:["商品分类",Q()&&Y.jsx("span",{className:"text-primary font-medium text-xs bg-primary/10 px-2 py-0.5 rounded-full ml-1",children:Q()}),Y.jsx(N,{className:"w-3 h-3 transition-transform "+(z?"rotate-180":"")})]}),z&&Y.jsxs("div",{className:"absolute left-0 top-full mt-2 bg-white rounded-2xl shadow-2xl border border-stone-100 z-50 min-w-[600px] p-6",onMouseEnter:G,onMouseLeave:K,children:[Y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Y.jsx("h3",{className:"font-serif font-bold text-lg text-primary",children:"商品分类"}),Y.jsxs("button",{onClick:()=>X(),className:"text-sm text-primary hover:text-primary-700 flex items-center gap-1",children:["查看全部 ",Y.jsx(E,{className:"w-4 h-4"})]})]}),Y.jsx("div",{className:"grid grid-cols-4 gap-4",children:U.filter(e=>!e.parentId).slice(0,8).map(e=>Y.jsxs("div",{onClick:()=>X(e.slug||e._id),className:"group cursor-pointer rounded-xl overflow-hidden border border-stone-100 hover:border-primary/30 hover:shadow-lg transition-all",children:[Y.jsx("div",{className:"aspect-square bg-stone-50 overflow-hidden",children:e.image?Y.jsx("img",{src:Ls(e.image),alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:e=>{const t=e.target;t.style.display="none",t.parentElement.innerHTML='<div class="w-full h-full flex items-center justify-center"><svg class="w-12 h-12 text-stone-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line></svg></div>'}}):Y.jsx("div",{className:"w-full h-full flex items-center justify-center",children:Y.jsx(S,{className:"w-12 h-12 text-stone-300"})})}),Y.jsxs("div",{className:"p-3 bg-white",children:[Y.jsx("h4",{className:"font-medium text-stone-800 group-hover:text-primary transition-colors text-sm truncate",children:e.name}),e.children&&e.children.length>0&&Y.jsxs("p",{className:"text-xs text-stone-400 mt-1",children:[e.children.length," 个子分类"]})]})]},e._id))}),W&&Y.jsxs("div",{className:"mt-4 pt-4 border-t border-stone-100 flex items-center justify-between",children:[Y.jsxs("p",{className:"text-sm text-stone-500",children:["当前选中：",Y.jsx("span",{className:"text-primary font-medium ml-1",children:Q()})]}),Y.jsx("button",{onClick:()=>f("/products"),className:"text-xs text-stone-400 hover:text-red-500",children:"清除筛选"})]})]})]}),Y.jsx(l,{to:"/packages",className:Z("/packages"),children:"套餐专区"}),Y.jsx(l,{to:"/buying-service",className:Z("/buying-service"),children:"陪买服务"})]}),Y.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 flex items-center justify-center cursor-pointer",onClick:()=>f("/"),children:Y.jsxs("div",{className:"flex flex-col items-center",children:[Y.jsx("div",{className:"text-2xl font-serif font-bold tracking-tighter text-primary leading-none",children:"XIAODI"}),Y.jsx("span",{className:"text-[10px] font-sans font-normal tracking-[0.3em] text-accent uppercase leading-tight mt-1",children:"SUPPLY CHAIN"})]})}),Y.jsxs("div",{className:"flex items-center space-x-3 md:space-x-5",children:[Y.jsxs("button",{onClick:()=>_(!0),className:"hidden lg:flex items-center bg-stone-100/50 rounded-full px-4 py-2 hover:bg-stone-100 transition-all border border-transparent hover:border-primary/20 cursor-pointer",children:[Y.jsx(b,{className:"text-stone-400 w-4 h-4 mr-2"}),Y.jsx("span",{className:"text-sm text-stone-400",children:"搜索型号/产品..."})]}),Y.jsx("button",{onClick:()=>_(!0),className:"lg:hidden p-2 text-stone-500 hover:text-primary transition-colors",children:Y.jsx(b,{className:"w-5 h-5"})}),Y.jsxs(l,{to:"/favorites",className:"relative hover:text-primary transition-colors group "+("/favorites"===H.pathname?"text-primary":"text-stone-500"),title:"收藏夹",children:[Y.jsx(k,{className:"w-5 h-5"}),d()>0&&Y.jsx("span",{className:"absolute -top-1 -right-1 bg-accent text-white text-[9px] w-3.5 h-3.5 flex items-center justify-center rounded-full",children:d()})]}),Y.jsxs("button",{onClick:h,className:"relative hover:text-primary transition-colors text-stone-500",title:"商品对比",children:[Y.jsx(O,{className:"w-5 h-5"}),m()>0&&Y.jsx("span",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-[9px] w-3.5 h-3.5 flex items-center justify-center rounded-full",children:m()})]}),Y.jsxs(l,{to:"/cart",className:"hover:text-primary transition-colors relative "+("/cart"===H.pathname?"text-primary":"text-stone-500"),title:"购物车",children:[Y.jsx(P,{className:"w-5 h-5"}),c()>0&&Y.jsx("span",{className:"absolute -top-1 -right-1 bg-accent text-white text-[9px] w-3.5 h-3.5 flex items-center justify-center rounded-full",children:c()})]}),Y.jsx(l,{to:"/orders",className:"hover:text-primary transition-colors flex items-center gap-1 "+("/orders"===H.pathname?"text-primary":"text-stone-500"),title:"订单管理",children:Y.jsx(A,{className:"w-5 h-5"})}),Y.jsx("div",{className:"h-4 w-px bg-stone-300 mx-2"}),t?Y.jsxs("div",{className:"relative",ref:D,children:[Y.jsxs("button",{onClick:()=>v(!j),className:"flex items-center gap-1 hover:text-primary transition-colors",children:[Y.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center border border-primary/20",children:Y.jsx(x,{className:"w-4 h-4 text-primary"})}),Y.jsx(N,{className:"w-3 h-3 text-stone-400 transition-transform "+(j?"rotate-180":"")})]}),j&&Y.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white rounded-xl shadow-lg border border-stone-100 py-2 z-50",children:[Y.jsxs("div",{className:"px-4 py-2 border-b border-stone-100",children:[Y.jsx("p",{className:"text-sm font-medium text-primary",children:(null==r?void 0:r.nickname)||(null==r?void 0:r.phone)||"用户"}),Y.jsx("p",{className:"text-xs text-stone-400",children:"admin"===(null==r?void 0:r.role)||"super_admin"===(null==r?void 0:r.role)?"管理员":"普通用户"})]}),Y.jsxs(l,{to:"/profile",onClick:()=>v(!1),className:"flex items-center gap-3 px-4 py-2.5 text-sm text-stone-600 hover:bg-stone-50 hover:text-primary transition-colors",children:[Y.jsx(x,{className:"w-4 h-4"}),"编辑资料"]}),Y.jsxs(l,{to:"/orders",onClick:()=>v(!1),className:"flex items-center gap-3 px-4 py-2.5 text-sm text-stone-600 hover:bg-stone-50 hover:text-primary transition-colors",children:[Y.jsx(A,{className:"w-4 h-4"}),"我的订单"]}),Y.jsxs(l,{to:"/addresses",onClick:()=>v(!1),className:"flex items-center gap-3 px-4 py-2.5 text-sm text-stone-600 hover:bg-stone-50 hover:text-primary transition-colors",children:[Y.jsx(R,{className:"w-4 h-4"}),"我的地址"]}),("admin"===(null==r?void 0:r.role)||"super_admin"===(null==r?void 0:r.role))&&Y.jsxs(l,{to:"/admin",onClick:()=>v(!1),className:"flex items-center gap-3 px-4 py-2.5 text-sm text-stone-600 hover:bg-stone-50 hover:text-primary transition-colors",children:[Y.jsx(C,{className:"w-4 h-4"}),"管理后台"]}),Y.jsxs("button",{onClick:()=>{s(),v(!1),f("/")},className:"flex items-center gap-3 px-4 py-2.5 text-sm text-stone-600 hover:bg-stone-50 hover:text-red-500 transition-colors w-full",children:[Y.jsx(T,{className:"w-4 h-4"}),"退出登录"]})]})]}):Y.jsxs("button",{onClick:a,className:"text-xs font-bold border border-stone-300 rounded px-2 py-1 hover:border-primary flex items-center gap-1 text-stone-500",children:[Y.jsx(I,{className:"w-3 h-3"})," 登录"]}),Y.jsxs("button",{onClick:()=>{const e="CN"===B?"EN":"CN";V(e),localStorage.setItem("language",e),window.dispatchEvent(new CustomEvent("languageChange",{detail:e}))},className:"flex items-center gap-1 text-xs font-bold text-stone-500 hover:text-primary transition-colors ml-2",title:"CN"===B?"切换到英文":"Switch to Chinese",children:[Y.jsx(L,{className:"w-4 h-4"}),B]})]})]}),Y.jsx(Ws,{isOpen:w,onClose:()=>_(!1)})]})}function Ks(){return Y.jsx("footer",{className:"bg-white border-t border-stone-200 relative z-50",children:Y.jsx("div",{className:"container-custom py-8",children:Y.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[Y.jsxs("div",{className:"max-w-md",children:[Y.jsx("h3",{className:"text-3xl font-serif font-bold text-stone-900 mb-3 tracking-wide",children:"XiaoDi Yanxuan"}),Y.jsx("p",{className:"text-sm text-stone-500 leading-relaxed",children:"源头好货，一键也是出厂价"})]}),Y.jsxs("div",{className:"flex gap-8 text-sm",children:[Y.jsx(l,{to:"/about",className:"text-stone-600 hover:text-primary transition-colors",children:"关于我们"}),Y.jsx(l,{to:"/buying-service",className:"text-stone-600 hover:text-primary transition-colors",children:"陪选服务"}),Y.jsx(l,{to:"/contact",className:"text-stone-600 hover:text-primary transition-colors",children:"版权政策"}),Y.jsx("span",{className:"text-stone-400",children:"© 2025 XiaoDi Yanxuan."})]})]})})})}function Xs(){const[t,r]=e.useState(!1);return Y.jsxs(Y.Fragment,{children:[!t&&Y.jsxs("button",{onClick:()=>r(!0),className:"fixed bottom-6 right-6 z-[999] bg-primary hover:bg-green-900 text-white rounded-full p-4 shadow-2xl transition-all duration-300 hover:scale-110 flex items-center gap-2 group",children:[Y.jsx(D,{className:"w-6 h-6"}),Y.jsx("span",{className:"hidden group-hover:inline-block text-sm font-semibold pr-2",children:"联系我们"})]}),t&&Y.jsxs("div",{className:"fixed bottom-6 right-6 z-[999] bg-white rounded-2xl shadow-2xl border border-stone-200 w-80 overflow-hidden animate-in slide-in-from-bottom-4",children:[Y.jsxs("div",{className:"bg-gradient-to-r from-primary to-green-800 text-white p-4 flex justify-between items-center",children:[Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx(D,{className:"w-5 h-5"}),Y.jsx("h3",{className:"font-bold text-lg",children:"联系我们"})]}),Y.jsx("button",{onClick:()=>r(!1),className:"hover:bg-white/20 rounded-full p-1 transition-colors",children:Y.jsx(p,{className:"w-5 h-5"})})]}),Y.jsxs("div",{className:"p-6 space-y-6",children:[Y.jsxs("div",{className:"flex items-start gap-3",children:[Y.jsx("div",{className:"bg-primary/10 rounded-full p-2",children:Y.jsx(z,{className:"w-5 h-5 text-primary"})}),Y.jsxs("div",{className:"flex-1",children:[Y.jsx("div",{className:"text-sm text-stone-500 mb-1",children:"客服电话"}),Y.jsx("a",{href:"tel:18573402324",className:"text-lg font-bold text-primary hover:text-green-900 transition-colors",children:"185 7340 2324"}),Y.jsx("div",{className:"text-xs text-stone-400 mt-1",children:"工作时间: 9:00-18:00"})]})]}),Y.jsxs("div",{className:"text-center",children:[Y.jsx("div",{className:"text-sm text-stone-500 mb-3",children:"扫码添加微信"}),Y.jsx("div",{className:"inline-block p-3 bg-stone-50 rounded-xl",children:Y.jsx("img",{src:"/wechat-qr.png",alt:"微信二维码",className:"w-40 h-40 object-contain",onError:e=>{e.currentTarget.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="160" height="160"%3E%3Crect width="160" height="160" fill="%23f0f0f0"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-family="sans-serif" font-size="14" fill="%23999"%3E微信二维码%3C/text%3E%3C/svg%3E'}})}),Y.jsx("div",{className:"text-xs text-stone-400 mt-2",children:"7x24小时在线服务"})]}),Y.jsx("div",{className:"text-center pt-4 border-t border-stone-100",children:Y.jsxs("div",{className:"text-sm text-stone-600 leading-relaxed",children:["数字方式获取全球端到端全球化",Y.jsx("br",{}),"打造进一步的线上线下体验",Y.jsx("br",{}),"© 2024 Xiaodi Yanxuan"]})})]})]})]})}const Ys=Re(Ie(e=>({products:[],addProduct:t=>e(e=>({products:[t,...e.products]})),updateProduct:(t,r)=>e(e=>({products:e.products.map(e=>e._id===t?{...e,...r}:e)})),deleteProduct:t=>e(e=>({products:e.products.filter(e=>e._id!==t)})),toggleProductStatus:t=>e(e=>({products:e.products.map(e=>e._id===t?{...e,status:"active"===e.status?"inactive":"active"}:e)}))}),{name:"mock-products",storage:Ce(()=>{const e=new Map,t="undefined"!=typeof window?window.localStorage:void 0;return{get length(){return(null==t?void 0:t.length)??e.size},clear(){null==t||t.clear(),e.clear()},getItem:r=>(null==t?void 0:t.getItem(r))??e.get(r)??null,key(r){if(t)return t.key(r);return Array.from(e.keys())[r]??null},removeItem(r){null==t||t.removeItem(r),e.delete(r)},setItem(r,s){try{null==t||t.setItem(r,s)}catch(a){if(!(a instanceof DOMException&&"QuotaExceededError"===a.name))throw a;e.set(r,s)}t||e.set(r,s)}}})})),Qs=(e,t,r)=>{let s=null==e?void 0:e.material;s=s?"string"==typeof s?{fabric:[s],filling:[],frame:[],leg:[]}:{fabric:Array.isArray(s.fabric)?s.fabric:s.fabric?[s.fabric]:[],filling:Array.isArray(s.filling)?s.filling:s.filling?[s.filling]:[],frame:Array.isArray(s.frame)?s.frame:s.frame?[s.frame]:[],leg:Array.isArray(s.leg)?s.leg:s.leg?[s.leg]:[]}:{fabric:[],filling:[],frame:[],leg:[]};let a=null==e?void 0:e.materialUpgradePrices;return a&&"object"==typeof a||(a={}),{_id:(null==e?void 0:e._id)??(null==e?void 0:e.id)??`sku_${Date.now()}_${t}`,images:Array.isArray(null==e?void 0:e.images)?e.images:[],code:(null==e?void 0:e.code)??(null==e?void 0:e.spec)??`SKU-${t+1}`,spec:(null==e?void 0:e.spec)??(null==e?void 0:e.code)??`规格${t+1}`,length:(null==e?void 0:e.length)??0,width:(null==e?void 0:e.width)??0,height:(null==e?void 0:e.height)??0,material:s,materialUpgradePrices:a,stock:(null==e?void 0:e.stock)??0,price:(null==e?void 0:e.price)??r??0,discountPrice:null==e?void 0:e.discountPrice,sales:(null==e?void 0:e.sales)??0,isPro:(null==e?void 0:e.isPro)??!1,proFeature:(null==e?void 0:e.proFeature)??"",status:(null==e?void 0:e.status)??!0}},Zs=e=>{const t=Array.isArray(null==e?void 0:e.skus)&&e.skus.length>0?e.skus.map((t,r)=>Qs(t,r,(null==e?void 0:e.basePrice)??0)):[Qs({},0,(null==e?void 0:e.basePrice)??0)];return{_id:(null==e?void 0:e._id)??`mock_${Date.now()}`,productCode:(null==e?void 0:e.productCode)??"",name:(null==e?void 0:e.name)??"未命名商品",description:(null==e?void 0:e.description)??"暂无商品描述",category:(null==e?void 0:e.category)??"sofa",style:(null==e?void 0:e.style)??"modern",basePrice:(null==e?void 0:e.basePrice)??t[0].price??0,images:Array.isArray(null==e?void 0:e.images)?e.images:[],skus:t,isCombo:(null==e?void 0:e.isCombo)??!1,comboItems:(null==e?void 0:e.comboItems)??[],tags:Array.isArray(null==e?void 0:e.tags)?e.tags:[],specifications:(r=null==e?void 0:e.specifications,Array.isArray(r)?r.reduce((e,t,r)=>{const s=(null==t?void 0:t.name)||`规格${r+1}`,a=(null==t?void 0:t.unit)||"CM",n=(null==t?void 0:t.length)??0,i=(null==t?void 0:t.width)??0,o=(null==t?void 0:t.height)??0;return e[s]=`${n}x${i}x${o}${a}`,e},{}):r&&"object"==typeof r?r:{}),status:(null==e?void 0:e.status)??"active",views:(null==e?void 0:e.views)??0,sales:(null==e?void 0:e.sales)??0,rating:(null==e?void 0:e.rating)??5,reviews:(null==e?void 0:e.reviews)??0,order:null==e?void 0:e.order,createdAt:(null==e?void 0:e.createdAt)??(new Date).toISOString(),updatedAt:(null==e?void 0:e.updatedAt)??(new Date).toISOString(),videos:Array.isArray(null==e?void 0:e.videos)?e.videos:[],files:Array.isArray(null==e?void 0:e.files)?e.files:[]};var r},ea=async e=>{await(async()=>{const e=null==Ys?void 0:Ys.persist;if(null==e?void 0:e.rehydrate)try{await e.rehydrate()}catch(t){}})();const t=Ys.getState().products.map(Zs).find(t=>t._id===e)??null;return await((e=300)=>new Promise(t=>setTimeout(t,e)))(500),t};let ta=null,ra=null;const sa={},aa=async()=>ta||(ra||(ra=(async()=>{var e,t;try{const e=(await is.get("/materials",{params:{limit:1e4}})).data.data||[];return ta=e,e}catch(r){throw ra=null,new Error((null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.message)||"获取材质列表失败")}})(),ra)),na=async e=>{if(!e||0===e.length)return{};const t={},r=[];if(e.forEach(e=>{sa[e]?t[e]=sa[e]:r.push(e)}),0===r.length)return t;try{const e=50;for(let s=0;s<r.length;s+=e){const a=r.slice(s,s+e),n=(await is.post("/materials/images-by-names",{names:a})).data.data||{};Object.assign(t,n),Object.assign(sa,n)}return t}catch(s){return t}},ia=()=>{ta=null,ra=null},oa=()=>{Object.keys(sa).forEach(e=>{delete sa[e]})},la=async e=>{var t,r;try{return(await is.post("/materials",e)).data.data}catch(s){throw new Error((null==(r=null==(t=s.response)?void 0:t.data)?void 0:r.message)||"创建材质失败")}},ca=async(e,t)=>{var r,s;try{return(await is.put(`/materials/${e}`,t)).data.data||null}catch(a){throw new Error((null==(s=null==(r=a.response)?void 0:r.data)?void 0:s.message)||"更新材质失败")}},da=async e=>{var t,r;try{return await is.delete(`/materials/${e}`),!0}catch(s){throw new Error((null==(r=null==(t=s.response)?void 0:t.data)?void 0:r.message)||"删除材质失败")}},ua=async e=>{var t,r;try{return await is.post("/materials/batch-delete",{ids:e}),!0}catch(s){throw new Error((null==(r=null==(t=s.response)?void 0:t.data)?void 0:r.message)||"批量删除材质失败")}},ma=async(e,t,r,s)=>await ca(e,{status:t,reviewBy:r,reviewAt:(new Date).toISOString(),reviewNote:s}),pa=async()=>{try{return(await is.get("/materials/stats")).data.data||{total:0,pending:0,approved:0,rejected:0,offline:0}}catch(e){return{total:0,pending:0,approved:0,rejected:0,offline:0}}},ha=async()=>{try{const e=(await is.get("/materials/categories/list")).data.data||[],t=(e,r=null)=>e.filter(e=>e.parentId===r||!e.parentId&&null===r).sort((e,t)=>(e.order||0)-(t.order||0)).map(r=>({...r,children:t(e,r._id)}));return t(e)}catch(e){return[]}},fa=async()=>{try{return(await is.get("/materials/categories/list")).data.data||[]}catch(e){return[]}},ga=async e=>{var t,r;try{return(await is.post("/materials/categories",e)).data.data}catch(s){throw new Error((null==(r=null==(t=s.response)?void 0:t.data)?void 0:r.message)||"创建材质分类失败")}},xa=async(e,t)=>{var r,s;try{await is.put(`/materials/categories/${e}`,t)}catch(a){throw new Error((null==(s=null==(r=a.response)?void 0:r.data)?void 0:s.message)||"更新材质分类失败")}},ya=async e=>{var t,r;try{await is.delete(`/materials/categories/${e}`)}catch(s){throw new Error((null==(r=null==(t=s.response)?void 0:t.data)?void 0:r.message)||"删除材质分类失败")}},ba="notifications",ja=()=>{try{const e=localStorage.getItem(ba);return e?JSON.parse(e):[]}catch{return[]}},va=()=>ja().filter(e=>!e.read),wa=()=>va().length,_a=e=>{const t={...e,id:Math.random().toString(36).substr(2,9),createdAt:(new Date).toISOString()},r=ja();return r.push(t),localStorage.setItem(ba,JSON.stringify(r)),t},Na=()=>{localStorage.removeItem(ba)},Ea=e=>ja().filter(t=>t.type===e),Sa=(e,t,r)=>_a({type:"order",title:e,message:t,read:!1,relatedId:r,actionUrl:`/admin/orders/${r}`}),ka=(e,t)=>_a({type:"system",title:e,message:t,read:!1}),Oa=(e,t)=>_a({type:"message",title:e,message:t,read:!1}),Pa=()=>({total:ja().length,unread:wa(),order:Ea("order").length,system:Ea("system").length,message:Ea("message").length}),Aa=e=>{const t=ja(),r=e.toLowerCase();return t.filter(e=>e.title.toLowerCase().includes(r)||e.message.toLowerCase().includes(r))},Ra=(e="json")=>{const t="json"===e?(()=>{const e=ja();return JSON.stringify(e,null,2)})():[["ID","类型","标题","消息","已读","创建时间"],...ja().map(e=>[e.id,e.type,e.title,e.message,e.read?"是":"否",new Date(e.createdAt).toLocaleString("zh-CN")])].map(e=>e.map(e=>`"${e}"`).join(",")).join("\n"),r=new Blob([t],{type:"json"===e?"application/json":"text/csv"}),s=URL.createObjectURL(r),a=document.createElement("a");a.href=s,a.download=`notifications.${e}`,a.click(),URL.revokeObjectURL(s)},Ca=(e=30)=>{const t=ja(),r=new Date((new Date).getTime()-24*e*60*60*1e3),s=t.filter(e=>new Date(e.createdAt)>r),a=t.length-s.length;return localStorage.setItem(ba,JSON.stringify(s)),a},Ta=()=>{const e=ja(),t=e.filter(e=>!e.read);return{total:e.length,unread:t.length,read:e.length-t.length,order:e.filter(e=>"order"===e.type).length,system:e.filter(e=>"system"===e.type).length,message:e.filter(e=>"message"===e.type).length,today:e.filter(e=>{const t=new Date(e.createdAt),r=new Date;return t.toDateString()===r.toDateString()}).length}},Ia=(e,t)=>{const r=ja();if("delete"===t){const t=r.filter(t=>!e.includes(t.id));localStorage.setItem(ba,JSON.stringify(t))}else r.forEach(r=>{e.includes(r.id)&&(r.read="read"===t)}),localStorage.setItem(ba,JSON.stringify(r))},La=e=>{const t=ja();return"time"===e?[...t].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()):"type"===e?[...t].sort((e,t)=>e.type.localeCompare(t.type)):"read"===e?[...t].sort((e,t)=>(e.read?1:0)-(t.read?1:0)):t},Da=()=>{const e=ja(),t=e.slice(-5);return{total:e.length,recent:t,unreadCount:e.filter(e=>!e.read).length}},za=()=>ja().filter(e=>"order"===e.type&&!e.read),Ma=()=>({stats:Ta(),categorized:(()=>{const e=ja();return{order:e.filter(e=>"order"===e.type),system:e.filter(e=>"system"===e.type),message:e.filter(e=>"message"===e.type)}})(),grouped:(()=>{const e=ja(),t={};return e.forEach(e=>{const r=new Date(e.createdAt).toLocaleDateString("zh-CN");t[r]||(t[r]=[]),t[r].push(e)}),t})(),generatedAt:(new Date).toISOString()}),Ua="auth_redirecting",Fa={apiUrl:"/api",useCloud:!1,enableLocalFallback:!1},qa=()=>localStorage.getItem("token"),$a=e=>{localStorage.setItem("token",e)},Ba=()=>{localStorage.removeItem("token")},Va=async(e,t={})=>{const r=qa(),s=`${Fa.apiUrl}${e}`,a={"Content-Type":"application/json",...t.headers};r&&(a.Authorization=`Bearer ${r}`);try{const e=await fetch(s,{...t,headers:a});if(401===e.status&&"true"!==sessionStorage.getItem(Ua))return sessionStorage.setItem(Ua,"true"),setTimeout(()=>sessionStorage.removeItem(Ua),5e3),Ba(),setTimeout(()=>{window.location.href="/"},100),null;if(!e.ok){const t=await e.json();throw new Error(t.message||`API 错误: ${e.status}`)}return await e.json()}catch(n){throw n}},Ja={searchNotifications:async e=>Va("/notifications/search",{method:"GET",body:JSON.stringify({query:e})}),exportNotifications:async e=>Va(`/notifications/export?format=${e}`,{method:"GET"}),batchOperateNotifications:async(e,t)=>Va("/notifications/batch",{method:"POST",body:JSON.stringify({ids:e,operation:t})}),getNotificationStats:async()=>Va("/notifications/stats",{method:"GET"}),generateReport:async()=>Va("/notifications/report",{method:"GET"})},Ha={login:async(e,t)=>{var r;const s=await Va("/auth/login",{method:"POST",body:JSON.stringify({username:e,password:t})});return(null==(r=s.data)?void 0:r.token)&&$a(s.data.token),s},register:async e=>Va("/auth/register",{method:"POST",body:JSON.stringify(e)}),logout:async()=>(Ba(),Va("/auth/logout",{method:"POST"})),getCurrentUser:async()=>Va("/auth/me",{method:"GET"}),updateProfile:async e=>Va("/auth/profile",{method:"PUT",body:JSON.stringify(e)})},Wa={getOrders:async e=>{const t=new URLSearchParams(e).toString();return Va(`/orders?${t}`,{method:"GET"})},getOrderDetail:async e=>Va(`/orders/${e}`,{method:"GET"}),createOrder:async e=>Va("/orders",{method:"POST",body:JSON.stringify(e)}),updateOrder:async(e,t)=>Va(`/orders/${e}`,{method:"PUT",body:JSON.stringify(t)}),cancelOrder:async e=>Va(`/orders/${e}/cancel`,{method:"POST"})},Ga={getProducts:async e=>{const t=new URLSearchParams(e).toString();return Va(`/products?${t}`,{method:"GET"})},getProductDetail:async e=>Va(`/products/${e}`,{method:"GET"}),searchProducts:async e=>Va(`/products/search?q=${e}`,{method:"GET"})},Ka={getDashboardData:async()=>Va("/analytics/dashboard",{method:"GET"}),getOrderStats:async e=>{const t=new URLSearchParams(e).toString();return Va(`/analytics/orders?${t}`,{method:"GET"})},getUserStats:async e=>{const t=new URLSearchParams(e).toString();return Va(`/analytics/users?${t}`,{method:"GET"})},getSalesStats:async e=>{const t=new URLSearchParams(e).toString();return Va(`/analytics/sales?${t}`,{method:"GET"})}},Xa={cloudConfig:Fa,getAuthToken:qa,setAuthToken:$a,clearAuthToken:Ba,isAuthenticated:()=>!!qa(),apiRequest:Va,notificationService:{getAllNotifications:ja,getUnreadNotifications:va,getUnreadCount:wa,addNotification:_a,markAsRead:e=>{const t=ja(),r=t.find(t=>t.id===e);r&&(r.read=!0,localStorage.setItem(ba,JSON.stringify(t)))},markAllAsRead:()=>{const e=ja();e.forEach(e=>{e.read=!0}),localStorage.setItem(ba,JSON.stringify(e))},deleteNotification:e=>{const t=ja().filter(t=>t.id!==e);localStorage.setItem(ba,JSON.stringify(t))},clearAllNotifications:Na,getRecentNotifications:(e=10)=>ja().sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()).slice(0,e),getNotificationsByType:Ea,createOrderNotification:Sa,createSystemNotification:ka,createMessageNotification:Oa,getNotificationStats:Pa},compareService:{getAllCompareItems:ys,addToCompare:bs,removeFromCompare:js,isInCompare:vs,clearCompare:ws,getCompareCount:_s,getCompareStats:()=>({count:_s()}),addMultipleToCompare:e=>e.forEach(e=>bs(e.productId,e.skuId,e.selectedMaterials))},advancedService:Ja,userService:Ha,orderService:Wa,productService:Ga,analyticsService:Ka};function Ya(){const[t,r]=e.useState([]),[s,a]=e.useState(null),[n,i]=e.useState([]),[o,c]=e.useState(!1),[d,u]=e.useState(!1),{compareItems:m,removeFromCompare:h,loadCompareItems:f,isModalOpen:x,closeModal:y}=Ns(),{addItem:b}=gs();e.useEffect(()=>{if(x){f(),j();(async()=>{try{const e=await aa();i(Array.isArray(e)?e:[]),c(!0)}catch(e){i([]),c(!0)}})()}},[x]),e.useEffect(()=>{const e=()=>{f(),j()};return window.addEventListener("compareListUpdated",e),()=>{window.removeEventListener("compareListUpdated",e)}},[]);const j=async()=>{try{const e=await Xa.compareService.getCompareStats();a(e)}catch(e){}};e.useEffect(()=>{m.length>0?(async()=>{const e=[],t=[];await Promise.all(m.map(async r=>{var s;const a=await ea(r.productId)||await Ms(r.productId);if(!a||!(null==(s=a.skus)?void 0:s.length))return t.push({productId:r.productId,skuId:r.skuId}),null;let n;if(r.skuId&&(n=a.skus.find(e=>e._id===r.skuId)),!n&&a.skus.length>0&&(n=a.skus[0]),!n)return void t.push({productId:r.productId,skuId:r.skuId});const i=r.selectedMaterials?`${r.selectedMaterials.fabric||""}|${r.selectedMaterials.filling||""}|${r.selectedMaterials.frame||""}|${r.selectedMaterials.leg||""}`:"";e.push({product:a,sku:n,compareItemId:`${r.productId}-${r.skuId||""}-${i}`,selectedMaterials:r.selectedMaterials})})),t.length>0&&t.forEach(e=>{const t=m.find(t=>t.productId===e.productId&&t.skuId===e.skuId);h(e.productId,e.skuId,null==t?void 0:t.selectedMaterials)}),r(e)})():r([])},[m]);return x?Y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[Y.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:y}),Y.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl flex flex-col transition-all duration-300 "+(d?"w-full h-full rounded-none":"w-[95vw] max-w-6xl max-h-[90vh]"),children:[Y.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-primary-50 to-white rounded-t-xl flex-shrink-0",children:[Y.jsxs("div",{className:"flex items-center gap-3",children:[Y.jsx(O,{className:"h-6 w-6 text-primary-600"}),Y.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"商品对比"}),s&&Y.jsxs("span",{className:"px-3 py-1 bg-primary-100 text-primary-700 text-sm rounded-full",children:[t.length,"/",s.maxItems]})]}),Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx("button",{onClick:()=>u(!d),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:d?"退出全屏":"全屏",children:d?Y.jsx(M,{className:"h-5 w-5"}):Y.jsx(U,{className:"h-5 w-5"})}),Y.jsx("button",{onClick:y,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:Y.jsx(p,{className:"h-6 w-6"})})]})]}),Y.jsx("div",{className:"flex-1 overflow-auto p-6",children:0===t.length?Y.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[Y.jsx(O,{className:"h-16 w-16 text-gray-300 mb-4"}),Y.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"对比列表为空"}),Y.jsx("p",{className:"text-gray-500 mb-6",children:"还没有添加任何商品到对比列表"}),Y.jsx("button",{onClick:y,className:"btn-primary",children:"去选购"})]}):Y.jsx("div",{className:"overflow-x-auto",children:Y.jsxs("table",{className:"w-full",children:[Y.jsx("thead",{children:Y.jsxs("tr",{className:"border-b border-gray-200",children:[Y.jsx("th",{className:"py-4 px-4 text-left text-sm font-semibold bg-gray-50 w-28 sticky left-0 z-10",children:"对比项"}),t.map(e=>{var t,s;return Y.jsxs("th",{className:"py-4 px-4 text-center relative min-w-[200px]",children:[Y.jsx("button",{onClick:()=>(async e=>{r(t=>t.filter(t=>!(t.product._id===e.product._id&&t.sku._id===e.sku._id&&JSON.stringify(t.selectedMaterials)===JSON.stringify(e.selectedMaterials)))),g.success("已移除");try{await h(e.product._id,e.sku._id,e.selectedMaterials)}catch(t){}})(e),className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600 shadow-lg transition-all hover:scale-110 z-20",children:Y.jsx(p,{className:"h-4 w-4"})}),Y.jsxs(l,{to:`/products/${e.product._id}`,onClick:y,children:[Y.jsx("img",{src:Ls((null==(t=e.sku.images)?void 0:t[0])||(null==(s=e.product.images)?void 0:s[0])||"/placeholder.png"),alt:e.product.name,className:"w-full h-36 object-cover rounded-lg mb-2"}),Y.jsx("h3",{className:"font-semibold text-sm hover:text-primary-600 line-clamp-2",children:e.product.name}),e.sku.isPro&&Y.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs rounded",children:"PRO版"})]})]},e.compareItemId)})]})}),Y.jsxs("tbody",{children:[Y.jsxs("tr",{className:"border-b border-gray-200",children:[Y.jsx("td",{className:"py-3 px-4 text-sm font-medium bg-gray-50 sticky left-0 z-10",children:"价格"}),t.map(e=>{const t=e.sku.discountPrice&&e.sku.discountPrice>0&&e.sku.discountPrice<e.sku.price?e.sku.discountPrice:e.sku.price,r=e.sku.materialUpgradePrices||{};let s=0;if(e.selectedMaterials){const t=[];e.selectedMaterials.fabric&&t.push(e.selectedMaterials.fabric),e.selectedMaterials.filling&&t.push(e.selectedMaterials.filling),e.selectedMaterials.frame&&t.push(e.selectedMaterials.frame),e.selectedMaterials.leg&&t.push(e.selectedMaterials.leg),s=t.reduce((e,t)=>e+(r[t]||0),0)}const a=t+s;return Y.jsxs("td",{className:"py-3 px-4 text-center",children:[Y.jsx("div",{className:"text-xl font-bold text-red-600",children:Vs(a)}),e.sku.discountPrice&&e.sku.discountPrice>0&&e.sku.discountPrice<e.sku.price&&Y.jsx("div",{className:"text-sm text-gray-400 line-through",children:Vs(e.sku.price+s)})]},e.compareItemId)})]}),Y.jsxs("tr",{className:"border-b border-gray-200",children:[Y.jsx("td",{className:"py-3 px-4 text-sm font-medium bg-gray-50 sticky left-0 z-10",children:"型号"}),t.map(e=>Y.jsx("td",{className:"py-3 px-4 text-center",children:Y.jsx("div",{className:"text-sm text-gray-700",children:e.sku.code})},e.compareItemId))]}),Y.jsxs("tr",{className:"border-b border-gray-200",children:[Y.jsx("td",{className:"py-3 px-4 text-sm font-medium bg-gray-50 sticky left-0 z-10",children:"规格"}),t.map(e=>Y.jsx("td",{className:"py-3 px-4 text-center",children:Y.jsx("div",{className:"text-sm text-gray-700",children:e.sku.spec||"-"})},e.compareItemId))]}),t.some(e=>{const t=e.sku.material;return t&&"object"==typeof t&&t.fabric})&&Y.jsxs("tr",{className:"border-b border-gray-200",children:[Y.jsx("td",{className:"py-3 px-4 text-sm font-medium bg-gray-50 sticky left-0 z-10",children:"面料"}),t.map(e=>{var t;const r=e.sku.material;let s,a="-";const i=r&&"object"==typeof r&&r.fabric;if(null==(t=e.selectedMaterials)?void 0:t.fabric){a=e.selectedMaterials.fabric;const t=n.find(t=>{var r;return t.name===(null==(r=e.selectedMaterials)?void 0:r.fabric)});s=null==t?void 0:t.image}else i&&(a="未选面料");return Y.jsx("td",{className:"py-3 px-4 text-center",children:Y.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s&&Y.jsx("img",{src:Ls(s),alt:a,className:"w-12 h-12 object-cover rounded border border-gray-200"}),Y.jsx("div",{className:"text-sm "+("未选面料"===a?"text-orange-500":"text-gray-700"),children:a})]})},e.compareItemId)})]}),Y.jsxs("tr",{className:"border-b border-gray-200",children:[Y.jsx("td",{className:"py-3 px-4 text-sm font-medium bg-gray-50 sticky left-0 z-10",children:"尺寸"}),t.map(e=>Y.jsx("td",{className:"py-3 px-4 text-center",children:e.sku.length&&e.sku.width&&e.sku.height?Y.jsxs("div",{className:"text-sm text-gray-700",children:[e.sku.length,"×",e.sku.width,"×",e.sku.height," CM"]}):Y.jsx("div",{className:"text-gray-400 text-sm",children:"-"})},e.compareItemId))]}),Y.jsxs("tr",{children:[Y.jsx("td",{className:"py-3 px-4 text-sm font-medium bg-gray-50 sticky left-0 z-10",children:"操作"}),t.map(e=>Y.jsx("td",{className:"py-3 px-4 text-center",children:Y.jsxs("div",{className:"space-y-2",children:[Y.jsxs("button",{onClick:()=>(e=>{const t=e.sku.discountPrice&&e.sku.discountPrice>0&&e.sku.discountPrice<e.sku.price?e.sku.discountPrice:e.sku.price,r=e.sku.materialUpgradePrices||{};let s=0;if(e.selectedMaterials){const t=[];e.selectedMaterials.fabric&&t.push(e.selectedMaterials.fabric),e.selectedMaterials.filling&&t.push(e.selectedMaterials.filling),e.selectedMaterials.frame&&t.push(e.selectedMaterials.frame),e.selectedMaterials.leg&&t.push(e.selectedMaterials.leg),s=t.reduce((e,t)=>e+(r[t]||0),0)}const a=t+s;b(e.product,e.sku,1,e.selectedMaterials,a),g.success("已添加到购物车")})(e),className:"w-full btn-primary py-2 text-sm flex items-center justify-center gap-2",children:[Y.jsx(P,{className:"h-4 w-4"}),"加入购物车"]}),Y.jsx(l,{to:`/products/${e.product._id}`,onClick:y,className:"block w-full btn-secondary py-2 text-sm text-center",children:"查看详情"})]})},e.compareItemId))]})]})]})})}),t.length>0&&Y.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl flex-shrink-0",children:Y.jsxs("div",{className:"flex items-center justify-between",children:[Y.jsx("p",{className:"text-sm text-gray-600",children:"对比不同商品的规格、材质和价格，帮助您做出最佳选择"}),Y.jsx("button",{onClick:y,className:"btn-secondary",children:"继续选购"})]})})]})]}):null}function Qa(){return Y.jsxs("div",{className:"min-h-screen flex flex-col",children:[Y.jsx(Gs,{}),Y.jsx("main",{className:"flex-1",children:Y.jsx(a,{})}),Y.jsx(Ks,{}),Y.jsx(Xs,{}),Y.jsx(Ya,{})]})}const Za=e.lazy(()=>te(()=>import("./ProductsPage-C4p3Fm6m.js"),__vite__mapDeps([0]))),en=e.lazy(()=>te(()=>import("./ProductDetailPage-BLQySYJi.js"),__vite__mapDeps([0]))),tn=e.lazy(()=>te(()=>import("./ProductSharePage-63yo4JLe.js"),__vite__mapDeps([0]))),rn=e.lazy(()=>te(()=>import("./CartPage-CfF0c4aT.js"),__vite__mapDeps([0]))),sn=e.lazy(()=>te(()=>import("./CheckoutPage-DVbn6PhL.js"),__vite__mapDeps([0]))),an=e.lazy(()=>te(()=>import("./ComparePage-D3GROKUj.js"),__vite__mapDeps([0]))),nn=e.lazy(()=>te(()=>import("./FavoritesPage-DmALEq0C.js"),__vite__mapDeps([0]))),on=e.lazy(()=>te(()=>import("./DesignServicePage-SMf7mfAH.js"),__vite__mapDeps([0]))),ln=e.lazy(()=>te(()=>import("./BuyingServicePage-wZgkDT3J.js"),__vite__mapDeps([0]))),cn=e.lazy(()=>te(()=>import("./PackagesPage-ZKLyUKVq.js"),__vite__mapDeps([0]))),dn=e.lazy(()=>te(()=>import("./PackageDetailPageNew-D-QRqWgX.js"),__vite__mapDeps([0]))),un=e.lazy(()=>te(()=>import("./CategoriesPage-Q5hb-x82.js"),__vite__mapDeps([0]))),mn=e.lazy(()=>te(()=>import("./OrdersPageNew-DGjoj6VB.js"),__vite__mapDeps([0]))),pn=e.lazy(()=>te(()=>import("./AddressesPage-hlAS-qso.js"),__vite__mapDeps([0]))),hn=e.lazy(()=>te(()=>import("./RegisterPage-BB6MRh43.js"),__vite__mapDeps([0]))),fn=e.lazy(()=>te(()=>import("./RoleSelectPage-B34hRkYd.js"),__vite__mapDeps([0]))),gn=e.lazy(()=>te(()=>import("./UserProfilePage-B9Qo_AlD.js"),__vite__mapDeps([0]))),xn=e.lazy(()=>te(()=>import("./BargainListPage-BgGHtzzA.js"),__vite__mapDeps([0]))),yn=e.lazy(()=>te(()=>import("./BargainDetailPage-DyxBwS9T.js"),__vite__mapDeps([0]))),bn=e.lazy(()=>te(()=>import("./AboutPage-DHooZt7A.js"),__vite__mapDeps([0])));e.lazy(()=>te(()=>import("./Dashboard-DIcjhSFw.js"),__vite__mapDeps([0])));const jn=e.lazy(()=>te(()=>import("./ProductManagement-CDnDoROP.js"),__vite__mapDeps([0]))),vn=e.lazy(()=>te(()=>import("./ProductForm-BMjFvpBT.js"),__vite__mapDeps([0]))),wn=e.lazy(()=>te(()=>import("./ProductDashboard-lC10jzmr.js"),__vite__mapDeps([0]))),_n=e.lazy(()=>te(()=>import("./OrderManagementNew2-Du9IaTPe.js"),__vite__mapDeps([0])));e.lazy(()=>te(()=>import("./UserManagement-uO-HFr_I.js"),__vite__mapDeps([0])));const Nn=e.lazy(()=>te(()=>import("./AccountManagement-Dk2hpzlh.js"),__vite__mapDeps([0])));e.lazy(()=>te(()=>import("./ImageManagement-BiuMz2M7.js"),__vite__mapDeps([0])));const En=e.lazy(()=>te(()=>import("./SiteImageManagement-Bu8l0Al8.js"),__vite__mapDeps([0]))),Sn=e.lazy(()=>te(()=>import("./CategoryManagement-DIbPgXhl.js"),__vite__mapDeps([0]))),kn=e.lazy(()=>te(()=>import("./MaterialManagementNew-PuFqreVk.js"),__vite__mapDeps([0]))),On=e.lazy(()=>te(()=>import("./OrderAnalysis-CsjBkV8-.js"),__vite__mapDeps([0]))),Pn=e.lazy(()=>te(()=>import("./RefundManagementNew-CxCI9gnK.js"),__vite__mapDeps([0]))),An=e.lazy(()=>te(()=>import("./CouponManagement-DBH4SxiV.js"),__vite__mapDeps([0]))),Rn=e.lazy(()=>te(()=>import("./PackageManagementPage-DQD_ISCQ.js"),__vite__mapDeps([0]))),Cn=e.lazy(()=>te(()=>import("./PackageListPage-C719gdXh.js"),__vite__mapDeps([0]))),Tn=e.lazy(()=>te(()=>import("./AdminBargainListPage-BBkOY2AF.js"),__vite__mapDeps([0]))),In=e.lazy(()=>te(()=>import("./AdminBargainFormPage-BbL0OcpK.js"),__vite__mapDeps([0]))),Ln=e.lazy(()=>te(()=>import("./BargainDashboardPage-Dlj-HB2e.js"),__vite__mapDeps([0]))),Dn=e.lazy(()=>te(()=>import("./AdminDashboardPage-DqiO0w6B.js"),__vite__mapDeps([0]))),zn=e.lazy(()=>te(()=>import("./DesignerProductEditPage-BBEV3S-3.js"),__vite__mapDeps([0]))),Mn=e.lazy(()=>te(()=>import("./DesignerPackageEditPage-Bdg6lLI5.js"),__vite__mapDeps([0]))),Un=e.lazy(()=>te(()=>import("./PackageProfitPage-C3pueaB6.js"),__vite__mapDeps([0]))),Fn=e.lazy(()=>te(()=>import("./OrderDashboard-Ba6hhcud.js"),__vite__mapDeps([0]))),qn=e.lazy(()=>te(()=>import("./OrderTrashPage-BRkIhJlf.js"),__vite__mapDeps([0]))),$n=e.lazy(()=>te(()=>import("./DesignerOrdersPage-BEtMOp7g.js"),__vite__mapDeps([0]))),Bn=e.lazy(()=>te(()=>import("./DesignerReferredOrdersPage-C8n-zFUA.js"),__vite__mapDeps([0]))),Vn=e.lazy(()=>te(()=>import("./TestConciergeOrderPage-CuHJzn-f.js"),__vite__mapDeps([0]))),Jn=e.lazy(()=>te(()=>import("./UserUnbanPage-CVjD51xK.js"),__vite__mapDeps([0]))),Hn=e.lazy(()=>te(()=>import("./NotificationTestPage-CKDtjUgW.js"),__vite__mapDeps([0]))),Wn=e.lazy(()=>te(()=>import("./NotificationManagementPage-D85kjU9I.js"),__vite__mapDeps([0]))),Gn=e.lazy(()=>te(()=>import("./DesignManagement-6C3X8sHv.js"),__vite__mapDeps([0]))),Kn=e.lazy(()=>te(()=>import("./CustomizationManagement-Dwucw8O3.js"),__vite__mapDeps([0]))),Xn=e.lazy(()=>te(()=>import("./BuyingServiceRequestsPage-BrkIeEPq.js"),__vite__mapDeps([0]))),Yn=e.lazy(()=>te(()=>import("./ActivityDashboard-DbTvDjK5.js"),__vite__mapDeps([0]))),Qn=e.lazy(()=>te(()=>import("./ManufacturerManagement-I8HTPR9C.js"),__vite__mapDeps([0]))),Zn=e.lazy(()=>te(()=>import("./ReferralManagement-Y4dl7bOO.js"),__vite__mapDeps([0]))),ei=e.lazy(()=>te(()=>import("./ManufacturerOrderManagement-BMpe-r7R.js"),__vite__mapDeps([0]))),ti=e.lazy(()=>te(()=>import("./ImageSearchStats-2XWhLKc5.js"),__vite__mapDeps([0]))),ri=e.lazy(()=>te(()=>import("./ManufacturerLogin-PmmsY83n.js"),__vite__mapDeps([0]))),si=e.lazy(()=>te(()=>import("./ManufacturerOrders-B0mCR_Dd.js"),__vite__mapDeps([0]))),ai=({children:t,requireAdmin:r=!1,allowedRoles:s,fallbackPath:a="/"})=>{const{user:n,isAuthenticated:i,token:o}=Le(),[l,c]=e.useState(!1);return e.useEffect(()=>{localStorage.getItem("auth-storage");const e=setTimeout(()=>{c(!0)},0);return()=>clearTimeout(e)},[]),l?o&&!i?Y.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:"恢复认证状态中..."}):i?r&&"admin"!==(null==n?void 0:n.role)&&"super_admin"!==(null==n?void 0:n.role)||s&&n&&!s.includes(n.role)?Y.jsx(m,{to:a,replace:!0}):Y.jsx(Y.Fragment,{children:t}):Y.jsx(m,{to:"/login",replace:!0}):Y.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:"加载中..."})},ni=()=>Y.jsx("div",{className:"flex items-center justify-center min-h-screen",children:Y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});function ii(){const{isOpen:t,mode:r,close:s}=De(),{user:a,isAuthenticated:n}=Le(),[i,o]=e.useState(!1);return e.useEffect(()=>{if(n&&a){const e=`profile_completed_${a._id||a.id}`;if("true"===localStorage.getItem(e))return;const t=a.nickname&&""!==a.nickname.trim(),r=a.gender&&["male","female"].includes(a.gender);if(t&&r)return void localStorage.setItem(e,"true");const s=setTimeout(()=>{o(!0)},500);return()=>clearTimeout(s)}},[n,a]),e.useEffect(()=>{const e=e=>{if("IMG"===e.target.tagName)return e.preventDefault(),!1},t=e=>{if("IMG"===e.target.tagName)return e.preventDefault(),!1},r=document.createElement("style");return r.textContent="\n      img {\n        user-select: none;\n        -webkit-user-drag: none;\n        -moz-user-select: none;\n        -webkit-user-select: none;\n        -ms-user-select: none;\n        pointer-events: auto;\n      }\n    ",document.head.appendChild(r),document.addEventListener("contextmenu",e),document.addEventListener("dragstart",t),()=>{document.removeEventListener("contextmenu",e),document.removeEventListener("dragstart",t),document.head.removeChild(r)}},[]),Y.jsx(ze,{children:Y.jsxs(c,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[Y.jsx(us,{}),Y.jsx(F,{position:"bottom-right",richColors:!0}),Y.jsx(cs,{isOpen:t,onClose:s,initialMode:r}),Y.jsx(ds,{isOpen:i,onClose:()=>o(!1)}),Y.jsx(e.Suspense,{fallback:Y.jsx(ni,{}),children:Y.jsxs(d,{children:[Y.jsxs(u,{path:"/",element:Y.jsx(Qa,{}),children:[Y.jsx(u,{index:!0,element:Y.jsx(m,{to:"/products",replace:!0})}),Y.jsx(u,{path:"products",element:Y.jsx(Za,{})}),Y.jsx(u,{path:"products/:id",element:Y.jsx(en,{})}),Y.jsx(u,{path:"categories",element:Y.jsx(un,{})}),Y.jsx(u,{path:"packages",element:Y.jsx(cn,{})}),Y.jsx(u,{path:"packages/:id",element:Y.jsx(dn,{})}),Y.jsx(u,{path:"share/product/:id",element:Y.jsx(tn,{})}),Y.jsx(u,{path:"cart",element:Y.jsx(rn,{})}),Y.jsx(u,{path:"checkout",element:Y.jsx(sn,{})}),Y.jsx(u,{path:"compare",element:Y.jsx(an,{})}),Y.jsx(u,{path:"favorites",element:Y.jsx(nn,{})}),Y.jsx(u,{path:"orders",element:Y.jsx(mn,{})}),Y.jsx(u,{path:"addresses",element:Y.jsx(pn,{})}),Y.jsx(u,{path:"buying-service",element:Y.jsx(ln,{})}),Y.jsx(u,{path:"design-service",element:Y.jsx(on,{})}),Y.jsx(u,{path:"design",element:Y.jsx(on,{})}),Y.jsx(u,{path:"bargain",element:Y.jsx(xn,{})}),Y.jsx(u,{path:"bargain/:id",element:Y.jsx(yn,{})}),Y.jsx(u,{path:"about",element:Y.jsx(bn,{})}),Y.jsx(u,{path:"profile",element:Y.jsx(ai,{children:Y.jsx(gn,{})})})]}),Y.jsx(u,{path:"/login",element:Y.jsx(m,{to:"/",replace:!0})}),Y.jsx(u,{path:"/register",element:Y.jsx(hn,{})}),Y.jsx(u,{path:"/role-select",element:Y.jsx(ai,{children:Y.jsx(fn,{})})}),Y.jsxs(u,{path:"/admin",element:Y.jsx(ai,{allowedRoles:["admin","super_admin","designer"],children:Y.jsx(hs,{})}),children:[Y.jsx(u,{index:!0,element:Y.jsx(m,{to:"/admin/activity",replace:!0})}),Y.jsx(u,{path:"products",element:Y.jsx(ai,{allowedRoles:["admin","super_admin","designer"],children:Y.jsx(jn,{})})}),Y.jsx(u,{path:"products/new",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(vn,{})})}),Y.jsx(u,{path:"products/edit/:id",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(vn,{})})}),Y.jsx(u,{path:"products/designer-edit/:id",element:Y.jsx(ai,{allowedRoles:["designer"],children:Y.jsx(zn,{})})}),Y.jsx(u,{path:"products/dashboard/:productId",element:Y.jsx(ai,{allowedRoles:["admin","super_admin","designer"],children:Y.jsx(wn,{})})}),Y.jsx(u,{path:"orders",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(_n,{})})}),Y.jsx(u,{path:"orders/trash",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(qn,{})})}),Y.jsx(u,{path:"order-dashboard",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(Fn,{})})}),Y.jsx(u,{path:"users",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(Nn,{})})}),Y.jsx(u,{path:"images",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(En,{})})}),Y.jsx(u,{path:"categories",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(Sn,{})})}),Y.jsx(u,{path:"materials",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(kn,{})})}),Y.jsx(u,{path:"order-analysis",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(On,{})})}),Y.jsx(u,{path:"refunds",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(Pn,{})})}),Y.jsx(u,{path:"coupons",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(An,{})})}),Y.jsx(u,{path:"packages",element:Y.jsx(ai,{allowedRoles:["admin","super_admin","designer"],children:Y.jsx(Cn,{})})}),Y.jsx(u,{path:"packages/new",element:Y.jsx(ai,{allowedRoles:["admin","super_admin","designer"],children:Y.jsx(Rn,{})})}),Y.jsx(u,{path:"packages/edit/:id",element:Y.jsx(ai,{allowedRoles:["admin","super_admin","designer"],children:Y.jsx(Rn,{})})}),Y.jsx(u,{path:"packages/designer-edit/:id",element:Y.jsx(ai,{allowedRoles:["designer"],children:Y.jsx(Mn,{})})}),Y.jsx(u,{path:"packages/profit/:id",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/packages",children:Y.jsx(Un,{})})}),Y.jsx(u,{path:"bargain",element:Y.jsx(ai,{allowedRoles:["admin","super_admin","designer"],children:Y.jsx(Tn,{})})}),Y.jsx(u,{path:"bargain/new",element:Y.jsx(ai,{allowedRoles:["admin","super_admin","designer"],children:Y.jsx(In,{})})}),Y.jsx(u,{path:"bargain/edit/:id",element:Y.jsx(ai,{allowedRoles:["admin","super_admin","designer"],children:Y.jsx(In,{})})}),Y.jsx(u,{path:"bargain-dashboard",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/bargain",children:Y.jsx(Ln,{})})}),Y.jsx(u,{path:"dashboard",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(Dn,{})})}),Y.jsx(u,{path:"designer-orders",element:Y.jsx(ai,{allowedRoles:["designer"],children:Y.jsx($n,{})})}),Y.jsx(u,{path:"designer-referred-orders",element:Y.jsx(ai,{allowedRoles:["designer"],children:Y.jsx(Bn,{})})}),Y.jsx(u,{path:"test-concierge",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(Vn,{})})}),Y.jsx(u,{path:"user-unban",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(Jn,{})})}),Y.jsx(u,{path:"notification-test",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(Hn,{})})}),Y.jsx(u,{path:"notifications",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(Wn,{})})}),Y.jsx(u,{path:"designs",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(Gn,{})})}),Y.jsx(u,{path:"customization",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(Kn,{})})}),Y.jsx(u,{path:"buying-service-requests",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(Xn,{})})}),Y.jsx(u,{path:"activity",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(Yn,{})})}),Y.jsx(u,{path:"manufacturers",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(Qn,{})})}),Y.jsx(u,{path:"referrals",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(Zn,{})})}),Y.jsx(u,{path:"manufacturer-orders",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(ei,{})})}),Y.jsx(u,{path:"image-search-stats",element:Y.jsx(ai,{requireAdmin:!0,fallbackPath:"/admin/products",children:Y.jsx(ti,{})})})]}),Y.jsx(u,{path:"/manufacturer/login",element:Y.jsx(ri,{})}),Y.jsx(u,{path:"/manufacturer/orders",element:Y.jsx(si,{})}),Y.jsx(u,{path:"*",element:Y.jsx(m,{to:"/",replace:!0})})]})})]})})}Q.createRoot(document.getElementById("root")).render(Y.jsx(s.StrictMode,{children:Y.jsx(ii,{})}));export{Aa as $,fa as A,Us as B,ha as C,Os as D,ks as E,Cs as F,Rs as G,Ss as H,Ts as I,As as J,Ps as K,ca as L,la as M,da as N,ma as O,xa as P,ga as Q,pa as R,ua as S,ia as T,ya as U,Sa as V,ka as W,Oa as X,Na as Y,Pa as Z,ja as _,Ns as a,La as a0,Ta as a1,za as a2,Ia as a3,Ra as a4,Ca as a5,Ma as a6,Da as a7,Le as b,Es as c,Ls as d,Ds as e,Vs as f,zs as g,De as h,Bs as i,Y as j,gs as k,oa as l,Ms as m,na as n,aa as o,$r as p,Xa as q,ea as r,is as s,os as t,xs as u,Js as v,$s as w,qs as x,Is as y,Fs as z};
