import{j as e}from"./index-DWFic46w.js";import{r as s}from"./react-vendor-E1AgTUZ9.js";import{g as a}from"./dashboardService-PDSHh-jV.js";import{R as t,F as r,T as d,g as l,h as i,B as n,C as o,X as c,Y as x,a as m,f as h,i as g,j,k as y,l as u,m as v,A as f,b as p,n as b}from"./recharts-wIacPPq0.js";import{T as N,f as w,aM as k,Y as C,ae as M,w as T,_ as O,aP as P}from"./ui-vendor-CQy3HONI.js";const V=[{value:100,name:"浏览",fill:"#8884d8"},{value:80,name:"收藏",fill:"#83a6ed"},{value:50,name:"加购",fill:"#8dd1e1"},{value:40,name:"下单",fill:"#82ca9d"},{value:26,name:"支付",fill:"#a4de6c"}],A=({data:s=V})=>e.jsx(t,{width:"100%",height:200,children:e.jsxs(r,{children:[e.jsx(d,{}),e.jsx(l,{dataKey:"value",data:s,isAnimationActive:!0,children:e.jsx(i,{position:"right",fill:"#000",stroke:"none",dataKey:"name"})})]})}),K=[{name:"高客单价决策者",ltv:4e3,aov:2500},{name:"儿童家具关注者",ltv:3e3,aov:1500},{name:"小户型适配者",ltv:2e3,aov:900},{name:"分享达人",ltv:2780,aov:2e3}],S=({data:s=K})=>e.jsx(t,{width:"100%",height:200,children:e.jsxs(n,{data:s,children:[e.jsx(o,{strokeDasharray:"3 3"}),e.jsx(c,{dataKey:"name",fontSize:12}),e.jsx(x,{}),e.jsx(d,{}),e.jsx(m,{}),e.jsx(h,{dataKey:"ltv",fill:"#8884d8",name:"生命周期价值"}),e.jsx(h,{dataKey:"aov",fill:"#82ca9d",name:"平均客单价"})]})}),F={visits:1250,conversionRate:3.5,orders:42},G=({data:s=F})=>e.jsxs("div",{className:"h-full flex flex-col items-center justify-center space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"分享链接访问量"}),e.jsx("p",{className:"text-4xl font-bold text-gray-800",children:s.visits.toLocaleString()})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"转化率"}),e.jsxs("p",{className:"text-4xl font-bold text-green-600",children:[s.conversionRate.toFixed(1),"%"]})]}),null!=s.orders&&e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"带来订单"}),e.jsx("p",{className:"text-3xl font-semibold text-primary-600",children:s.orders})]})]}),B=[{subject:"模型下载",gold:120,potential:110,fullMark:150},{subject:"方案分享",gold:98,potential:130,fullMark:150},{subject:"模型包下单",gold:86,potential:130,fullMark:150},{subject:"点赞数",gold:99,potential:100,fullMark:150},{subject:"活跃度",gold:85,potential:90,fullMark:150}],E=({data:s=B})=>{const a=s.map(e=>({...e,A:e.gold,B:e.potential}));return e.jsx(t,{width:"100%",height:200,children:e.jsxs(g,{cx:"50%",cy:"50%",outerRadius:"80%",data:a,children:[e.jsx(j,{}),e.jsx(y,{dataKey:"subject",fontSize:12}),e.jsx(u,{angle:30,domain:[0,150]}),e.jsx(v,{name:"金牌设计师",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),e.jsx(v,{name:"潜力设计师",dataKey:"B",stroke:"#82ca9d",fill:"#82ca9d",fillOpacity:.6}),e.jsx(m,{})]})})},R=[{name:"意式轻奢",downloads:4e3,conversion:24},{name:"侘寂风",downloads:3e3,conversion:13},{name:"北欧风",downloads:2e3,conversion:8},{name:"现代简约",downloads:2780,conversion:19}],I=({data:s=R})=>e.jsx(t,{width:"100%",height:200,children:e.jsxs(n,{data:s,children:[e.jsx(o,{strokeDasharray:"3 3"}),e.jsx(c,{dataKey:"name",fontSize:12}),e.jsx(x,{yAxisId:"left",orientation:"left",stroke:"#8884d8"}),e.jsx(x,{yAxisId:"right",orientation:"right",stroke:"#82ca9d"}),e.jsx(d,{}),e.jsx(m,{}),e.jsx(h,{yAxisId:"left",dataKey:"downloads",fill:"#8884d8",name:"模型下载量"}),e.jsx(h,{yAxisId:"right",dataKey:"conversion",fill:"#82ca9d",name:"方案转化率(%)"})]})}),$={summary:{todayGMV:428e3,todayOrders:156,avgOrderValue:2740,activeUsers:2380,flatPriceOrders:23,shareConversion:3.6},summaryTrend:{todayGMVChange:12.5,todayOrdersChange:8.2,avgOrderChange:3.1,activeChange:-1.8,flatPriceChange:5.4,shareChange:.6},orderTrend:[{date:"周一",orders:120,gmv:32e3},{date:"周二",orders:150,gmv:36e3},{date:"周三",orders:140,gmv:34500},{date:"周四",orders:180,gmv:42e3},{date:"周五",orders:210,gmv:52e3},{date:"周六",orders:260,gmv:64e3},{date:"周日",orders:190,gmv:49800}],userBehavior:void 0,tagValue:void 0,viralEffect:{visits:1250,conversionRate:3.8,orders:42},designerContribution:void 0,styleMatch:void 0,hotProducts:[{name:"云朵羽绒沙发",gmv:168e3,orders:56,conversion:18},{name:"岩板电动餐桌",gmv:124e3,orders:33,conversion:21},{name:"法式衣帽间套系",gmv:98e3,orders:22,conversion:14}],flatPrice:{count:23,avgAmount:36800,ratio:18,recent:[{orderNo:"ORD2024112108",customer:"张三",amount:42800,status:"已支付"},{orderNo:"ORD2024112106",customer:"李四",amount:31200,status:"待支付"},{orderNo:"ORD2024112102",customer:"王五",amount:55900,status:"已支付"}]}},z=e=>`¥${e.toLocaleString()}`,D=({title:s,value:a,change:t,icon:r,trend:d="up"})=>e.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:s}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a}),e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-sm",children:["up"===d?e.jsx(O,{className:"h-4 w-4 text-green-500"}):e.jsx(P,{className:"h-4 w-4 text-red-500"}),e.jsxs("span",{className:"up"===d?"text-green-600":"text-red-600",children:["up"===d?"+":"",t.toFixed(1),"%"]}),e.jsx("span",{className:"text-gray-400",children:"vs 上周"})]})]}),e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-primary-50 text-primary-600 flex items-center justify-center",children:e.jsx(r,{className:"h-6 w-6"})})]}),L=()=>{const[r,l]=s.useState(null),[i,n]=s.useState(!0),[h,g]=s.useState(null);s.useEffect(()=>{(async()=>{try{n(!0);const e=await a();e&&(e.summary||e.orderTrend)?(l(e),g(null)):(l(null),g("服务器返回空数据，显示示例数据"))}catch(e){g(e.message||"加载数据失败，显示示例数据"),l(null)}finally{n(!1)}})()},[]);const j=s.useMemo(()=>{var e,s;if(!r)return $;const a=(e,s)=>{var a;return(null==(a=null==r?void 0:r[e])?void 0:a.data)??s};return{summary:r.summary??$.summary,summaryTrend:r.summaryTrend??$.summaryTrend,orderTrend:a("orderTrend",$.orderTrend),userBehavior:a("userBehavior",void 0)??a("userRoleBehavior",void 0)??$.userBehavior,tagValue:a("tagValue",$.tagValue),viralEffect:(null==(e=r.viralEffect)?void 0:e.data)??$.viralEffect,designerContribution:a("designerContribution",$.designerContribution),styleMatch:a("styleMatch",$.styleMatch),hotProducts:(null==(s=r.hotProducts)?void 0:s.data)??$.hotProducts,flatPrice:r.flatPrice??$.flatPrice}},[r]);return i?e.jsx("div",{className:"p-8 text-gray-500",children:"数据加载中..."}):e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen space-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"运营数据总览"}),e.jsx("p",{className:"text-sm text-gray-500",children:"实时汇总订单、用户、内容与一口价策略表现"})]}),h&&e.jsxs("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 text-sm text-amber-700 px-4 py-3",children:["数据接口暂不可用，当前展示本地参考数据。错误信息：",h]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5",children:[e.jsx(D,{title:"今日 GMV",value:z(j.summary.todayGMV),change:j.summaryTrend.todayGMVChange,icon:N}),e.jsx(D,{title:"今日订单",value:`${j.summary.todayOrders.toLocaleString()} 单`,change:j.summaryTrend.todayOrdersChange,icon:w}),e.jsx(D,{title:"平均客单价",value:z(j.summary.avgOrderValue),change:j.summaryTrend.avgOrderChange,icon:k}),e.jsx(D,{title:"活跃用户",value:`${j.summary.activeUsers.toLocaleString()} 人`,change:j.summaryTrend.activeChange,icon:C,trend:j.summaryTrend.activeChange>=0?"up":"down"}),e.jsx(D,{title:"一口价订单",value:`${j.summary.flatPriceOrders} 单`,change:j.summaryTrend.flatPriceChange,icon:M}),e.jsx(D,{title:"分享转化率",value:`${j.summary.shareConversion.toFixed(1)}%`,change:j.summaryTrend.shareChange,icon:T})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"xl:col-span-2 bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"近 7 天订单与GMV 趋势"}),e.jsx("p",{className:"text-xs text-gray-500",children:"订单峰值出现在周六，GMV 与订单量保持正相关"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"数据来源：/dashboard"})]}),e.jsx(t,{width:"100%",height:320,children:e.jsxs(f,{data:j.orderTrend,margin:{left:6,right:12},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorGMV",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3E76FF",stopOpacity:.35}),e.jsx("stop",{offset:"95%",stopColor:"#3E76FF",stopOpacity:0})]})}),e.jsx(o,{strokeDasharray:"3 3",stroke:"#eceff5"}),e.jsx(c,{dataKey:"date",tick:{fontSize:12}}),e.jsx(x,{yAxisId:"left",tickFormatter:e=>`${e}`,tick:{fontSize:12}}),e.jsx(x,{yAxisId:"right",orientation:"right",tickFormatter:e=>`${Math.round(e/1e3)}k`,tick:{fontSize:12}}),e.jsx(d,{formatter:(e,s)=>"gmv"===s?z(e):`${e} 单`}),e.jsx(m,{}),e.jsx(p,{type:"monotone",dataKey:"orders",stroke:"#10B981",strokeWidth:2,yAxisId:"left",name:"订单量"}),e.jsx(b,{type:"monotone",dataKey:"gmv",stroke:"#3E76FF",fillOpacity:1,fill:"url(#colorGMV)",yAxisId:"right",name:"GMV"})]})})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"分享传播表现"}),e.jsx(G,{data:j.viralEffect})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"用户行为漏斗"}),e.jsx("p",{className:"text-xs text-gray-500 mb-6",children:"跟踪浏览→支付全链路，识别流失点"}),e.jsx(A,{data:j.userBehavior})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"标签价值看板"}),e.jsx("p",{className:"text-xs text-gray-500 mb-6",children:"不同标签用户的生命周期价值与客单价"}),e.jsx(S,{data:j.tagValue})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"设计师贡献榜"}),e.jsx(E,{data:j.designerContribution})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"风格匹配转化"}),e.jsx(I,{data:j.styleMatch})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100 flex flex-col",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"热销商品 TOP3"}),e.jsx("div",{className:"space-y-4 flex-1",children:j.hotProducts.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.orders," 单 · 转化 ",s.conversion??0,"%"]})]}),e.jsx("p",{className:"text-base font-semibold text-primary-600",children:z(s.gmv)})]},s.name))})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"一口价策略表现"}),e.jsx("p",{className:"text-xs text-gray-500",children:"统计最近一周的一口价订单执行情况"})]}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"一口价订单数"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:j.flatPrice.count})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"平均金额"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:z(j.flatPrice.avgAmount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"占订单比例"}),e.jsxs("p",{className:"text-xl font-semibold text-gray-900",children:[j.flatPrice.ratio,"%"]})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-500 border-b",children:[e.jsx("th",{className:"py-2",children:"订单号"}),e.jsx("th",{className:"py-2",children:"客户"}),e.jsx("th",{className:"py-2",children:"金额"}),e.jsx("th",{className:"py-2",children:"状态"})]})}),e.jsx("tbody",{children:j.flatPrice.recent.map(s=>e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"py-2 font-medium text-gray-900",children:s.orderNo}),e.jsx("td",{className:"py-2 text-gray-600",children:s.customer}),e.jsx("td",{className:"py-2 font-semibold text-primary-600",children:z(s.amount)}),e.jsx("td",{className:"py-2",children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("已支付"===s.status?"bg-green-50 text-green-600":"待支付"===s.status?"bg-amber-50 text-amber-600":"bg-gray-100 text-gray-500"),children:s.status})})]},s.orderNo))})]})})]})]})};export{L as default};
