import{j as e}from"./index-DWFic46w.js";import{r as s}from"./react-vendor-E1AgTUZ9.js";import{an as t,E as l,x as a,a4 as r,b as i}from"./ui-vendor-CQy3HONI.js";import"./recharts-wIacPPq0.js";function d(){const[d,n]=s.useState([{id:"1",userName:"张三",userPhone:"13800138000",userEmail:"zhangsan@example.com",description:"三室两厅，现代简约风格，预算 5-8 万，家里有宠物",images:["https://via.placeholder.com/200x200?text=Image1"],status:"pending",createdAt:"2024-11-20 10:30",updatedAt:"2024-11-20 10:30",notes:""},{id:"2",userName:"李四",userPhone:"13900139000",userEmail:"lisi@example.com",description:"两室一厅，北欧风格，预算 3-5 万",images:["https://via.placeholder.com/200x200?text=Image2","https://via.placeholder.com/200x200?text=Image3"],status:"in_progress",createdAt:"2024-11-19 15:45",updatedAt:"2024-11-20 09:00",notes:"已分配给设计师王五"}]),[c,x]=s.useState(null),[o,m]=s.useState("all"),[g,p]=s.useState(""),h="all"===o?d:d.filter(e=>e.status===o),u=s=>{const t={pending:{bg:"bg-yellow-50",text:"text-yellow-700",icon:i,label:"待处理"},in_progress:{bg:"bg-blue-50",text:"text-blue-700",icon:a,label:"处理中"},completed:{bg:"bg-green-50",text:"text-green-700",icon:r,label:"已完成"},rejected:{bg:"bg-red-50",text:"text-red-700",icon:a,label:"已拒绝"}}[s],l=t.icon;return e.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 rounded-full ${t.bg} ${t.text} text-sm font-medium`,children:[e.jsx(l,{size:14}),t.label]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"设计管理"}),e.jsx("p",{className:"text-sm text-gray-500",children:"管理用户提交的免费设计需求"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["总计: ",e.jsx("span",{className:"font-bold",children:d.length})," 个需求"]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","pending","in_progress","completed","rejected"].map(s=>e.jsxs("button",{onClick:()=>m(s),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(o===s?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["all"===s?"全部":"pending"===s?"待处理":"in_progress"===s?"处理中":"completed"===s?"已完成":"已拒绝","all"!==s&&e.jsxs("span",{className:"ml-2 text-xs",children:["(",d.filter(e=>e.status===s).length,")"]})]},s))}),e.jsx("div",{className:"card overflow-hidden",children:0===h.length?e.jsx("div",{className:"text-center py-12 text-gray-500",children:e.jsx("p",{children:"暂无设计需求"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"用户信息"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"需求描述"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"图片"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"状态"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"提交时间"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y",children:h.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.userName}),e.jsx("p",{className:"text-gray-600",children:s.userPhone}),s.userEmail&&e.jsx("p",{className:"text-gray-500 text-xs",children:s.userEmail})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:s.description})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex gap-2",children:s.images.map((s,t)=>e.jsx("img",{src:s,alt:`image-${t}`,className:"w-10 h-10 rounded object-cover cursor-pointer hover:opacity-80",onClick:()=>window.open(s,"_blank")},t))})}),e.jsx("td",{className:"px-6 py-4",children:u(s.status)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:s.createdAt}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>x(s),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"查看详情",children:e.jsx(t,{size:18})}),e.jsx("button",{onClick:()=>{return e=s.id,void(confirm("确定要删除这个设计需求吗？")&&n(d.filter(s=>s.id!==e)));var e},className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"删除",children:e.jsx(l,{size:18})})]})})]},s.id))})]})})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b p-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:"设计需求详情"}),e.jsx("button",{onClick:()=>x(null),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"用户信息"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"姓名"}),e.jsx("p",{className:"font-medium",children:c.userName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"电话"}),e.jsx("p",{className:"font-medium",children:c.userPhone})]}),c.userEmail&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"邮箱"}),e.jsx("p",{className:"font-medium",children:c.userEmail})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"需求描述"}),e.jsx("p",{className:"text-gray-700 bg-gray-50 p-4 rounded-lg",children:c.description})]}),c.images.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"上传的图片"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:c.images.map((s,l)=>e.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>window.open(s,"_blank"),children:[e.jsx("img",{src:s,alt:`image-${l}`,className:"w-full h-40 object-cover rounded-lg"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 rounded-lg transition-all flex items-center justify-center",children:e.jsx(t,{className:"text-white opacity-0 group-hover:opacity-100",size:24})})]},l))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"状态管理"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["pending","in_progress","completed","rejected"].map(s=>e.jsx("button",{onClick:()=>{var e,t;e=c.id,t=s,n(d.map(s=>s.id===e?{...s,status:t,updatedAt:(new Date).toLocaleString()}:s)),x({...c,status:s})},className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(c.status===s?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"pending"===s?"待处理":"in_progress"===s?"处理中":"completed"===s?"已完成":"已拒绝"},s))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"备注"}),e.jsx("textarea",{value:g||c.notes||"",onChange:e=>p(e.target.value),placeholder:"添加处理备注...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none resize-none",rows:4})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:["提交时间: ",c.createdAt]}),e.jsxs("p",{children:["更新时间: ",c.updatedAt]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{return e=c.id,n(d.map(s=>s.id===e?{...s,notes:g}:s)),p(""),void x(null);var e},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"保存备注"}),e.jsx("button",{onClick:()=>x(null),className:"flex-1 px-4 py-2 bg-gray-200 text-gray-900 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"关闭"})]})]})]})})]})}export{d as default};
