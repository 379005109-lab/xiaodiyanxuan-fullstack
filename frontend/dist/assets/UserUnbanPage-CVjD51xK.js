import{j as e}from"./index-DWFic46w.js";import{r as s}from"./react-vendor-E1AgTUZ9.js";import{aS as a,a0 as t,u as r,ab as i,x as l}from"./ui-vendor-CQy3HONI.js";import{m as n}from"./framer-motion-7DcRqacn.js";import"./recharts-wIacPPq0.js";const c=e=>{try{const s=JSON.parse(localStorage.getItem("users")||"[]"),a=s.findIndex(s=>s.username===e);return-1!==a&&(s[a].status="active",localStorage.setItem("users",JSON.stringify(s)),!0)}catch(s){return!1}};function o(){const[o,d]=s.useState("xiaodi"),[m,x]=s.useState([]),[u,h]=s.useState(!1),b=()=>{const e=(()=>{try{const e=JSON.parse(localStorage.getItem("users")||"[]").filter(e=>"banned"===e.status);return e.forEach(e=>{}),e}catch(e){return[]}})();x(e),h(!0)};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"container-custom",children:e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(a,{className:"h-8 w-8 text-blue-600"}),"用户解禁工具"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"快速解禁被封禁的用户账号"})]}),e.jsx("div",{className:"card bg-gradient-to-r from-blue-50 to-blue-100 border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-2",children:"快速解禁 xiaodi"}),e.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"xiaodi 是超级管理员账号，点击下方按钮快速解禁"}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsxs("button",{onClick:()=>{(()=>{const e=c("xiaodi");if(e){try{const e=localStorage.getItem("auth-storage");if(e){const s=JSON.parse(e);s.state&&s.state.user&&"xiaodi"===s.state.user.username&&(s.state.user.status="active",localStorage.setItem("auth-storage",JSON.stringify(s)))}}catch(s){}setTimeout(()=>{"undefined"!=typeof window&&(window.location.href="/")},1e3)}return e})()?(r.success("xiaodi 账号已解禁！正在跳转..."),d("")):r.error("解禁失败，请检查用户是否存在")},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold transition-colors flex items-center gap-2",children:[e.jsx(a,{className:"h-4 w-4"}),"解禁 xiaodi"]}),e.jsx("button",{onClick:()=>{const e=((e="xiaodi",s="xiaodi@admin.com",a="admin123")=>{try{const t=JSON.parse(localStorage.getItem("users")||"[]"),r=t.findIndex(s=>s.username===e),i={_id:`user-${Date.now()}`,username:e,email:s,password:a,phone:"13800138000",role:"super_admin",avatar:"/placeholder.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),status:"active",balance:0};return r>=0?t[r]={...t[r],...i,_id:t[r]._id}:t.push(i),localStorage.setItem("users",JSON.stringify(t)),!0}catch(t){return!1}})("xiaodi","xiaodi@admin.com","admin123");e?r.success("超级管理员账号已创建/更新！"):r.error("创建/更新失败")},className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 font-semibold transition-colors",children:"创建/更新超级管理员"})]})]}),e.jsx(t,{className:"h-12 w-12 text-blue-600 flex-shrink-0"})]})}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"手动解禁用户"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"输入用户名"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:o,onChange:e=>d(e.target.value),placeholder:"输入要解禁的用户名",className:"input flex-1"}),e.jsx("button",{onClick:()=>{if(!o.trim())return void r.error("请输入用户名");c(o)?(r.success(`${o} 已解禁！`),d("")):r.error("解禁失败，请检查用户是否存在")},className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-semibold transition-colors",children:"解禁"})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"被封禁的用户"}),e.jsx("button",{onClick:b,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold transition-colors",children:"刷新列表"})]}),u&&m.length>0?e.jsx("div",{className:"space-y-3",children:m.map(s=>e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.username}),e.jsx("p",{className:"text-sm text-gray-600",children:s.email}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["角色: ",s.role]})]}),e.jsx("button",{onClick:()=>{c(s.username),r.success(`${s.username} 已解禁`),b()},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold transition-colors",children:"解禁"})]},s._id))}):u?e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-3",children:[e.jsx(t,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),e.jsx("p",{className:"text-green-700",children:"暂无被封禁的用户"})]}):e.jsx("p",{className:"text-gray-600",children:'点击"刷新列表"查看被封禁的用户'})]}),e.jsxs("div",{className:"card bg-gray-900 text-gray-100",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"控制台命令"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"也可以在浏览器开发者工具的 Console 中执行以下命令："}),e.jsx("div",{className:"space-y-3",children:[{label:"快速解禁 xiaodi",command:"import { unbanXiaodi } from '@/utils/userUnban'; unbanXiaodi()"},{label:"解禁指定用户",command:"import { unbanUser } from '@/utils/userUnban'; unbanUser('username')"},{label:"查看被封禁用户",command:"import { getBannedUsers } from '@/utils/userUnban'; getBannedUsers()"},{label:"创建超级管理员",command:"import { createOrUpdateSuperAdmin } from '@/utils/userUnban'; createOrUpdateSuperAdmin('xiaodi', 'xiaodi@admin.com', 'admin123')"}].map(s=>e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:s.label}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 font-mono",children:s.command})]}),e.jsx("button",{onClick:()=>{return e=s.command,navigator.clipboard.writeText(e),void r.success("命令已复制到剪贴板");var e},className:"p-2 hover:bg-gray-700 rounded-lg transition-colors flex-shrink-0",title:"复制命令",children:e.jsx(i,{className:"h-4 w-4 text-gray-400"})})]},s.label))})]}),e.jsx("div",{className:"card bg-amber-50 border-l-4 border-amber-500",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(l,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-amber-900 mb-2",children:"使用说明"}),e.jsxs("ul",{className:"text-sm text-amber-800 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:'点击"解禁 xiaodi"按钮快速解禁超级管理员账号'}),e.jsx("li",{children:'或在"手动解禁用户"中输入用户名进行解禁'}),e.jsx("li",{children:'点击"刷新列表"查看当前被封禁的所有用户'}),e.jsx("li",{children:"解禁后需要刷新页面才能看到更新"}),e.jsx("li",{children:"也可以在浏览器控制台中执行命令进行操作"})]})]})]})})]})})})}export{o as default};
