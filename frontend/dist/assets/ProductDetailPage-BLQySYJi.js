import{j as e,i as s,k as t,u as r,a as l,b as a,l as i,d as n,e as o,h as c,f as d,m,n as u}from"./index-DWFic46w.js";import{r as x,i as h,u as g,L as f}from"./react-vendor-E1AgTUZ9.js";import{u as p,v as b,d as y,o as v,w as j,H as N,c as w,x as k,I as C,y as P,z as S,V as $,F as O,X as A,C as E,D as F}from"./ui-vendor-CQy3HONI.js";import{S as M}from"./ShareModal-P_wtyJ-J.js";import{a as z}from"./axios-DX3AsQR4.js";import"./recharts-wIacPPq0.js";function B({productId:s}){const[t,r]=x.useState(!1),[l,a]=x.useState({dimensions:"",materials:"",colors:""}),[i,n]=x.useState(!1);return e.jsxs("div",{className:"mt-8 p-6 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"需要个性化定制？"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"告诉我们您期望的尺寸、材质或颜色，我们将为您定制。"})]}),e.jsx("button",{type:"button",onClick:()=>r(!t),className:"px-4 py-2 rounded-lg font-medium transition-colors "+(t?"bg-gray-200 text-gray-700 hover:bg-gray-300":"text-white hover:opacity-90"),style:t?{}:{backgroundColor:"#14452F"},children:t?"收起":"我要定制"})]}),t&&e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!l.dimensions&&!l.materials&&!l.colors)return void p.error("请至少填写一项定制需求");const t=[l.dimensions&&`尺寸：${l.dimensions}`,l.materials&&`材质：${l.materials}`,l.colors&&`颜色：${l.colors}`].filter(Boolean).join(" | "),i={productId:s,contactName:"待补充",contactPhone:"待补充",productType:"定制家具",customizationDetails:t,dimensions:l.dimensions,materials:l.materials,colors:l.colors};n(!0);try{await(async e=>{const s=await fetch("/api/customization",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await s.json();if(!s.ok)throw new Error(t.message||"提交失败");return t})(i);p.success("您的定制需求已提交！我们将尽快与您联系。"),a({dimensions:"",materials:"",colors:""}),r(!1)}catch(o){p.error(o.message||"提交失败，请稍后重试")}finally{n(!1)}},className:"space-y-4 mt-4 pt-4 border-t border-gray-200",children:[e.jsx("input",{type:"text",value:l.dimensions,onChange:e=>a({...l,dimensions:e.target.value}),placeholder:"期望尺寸（如：长2米 × 宽0.9米 × 高0.8米）",className:"input w-full"}),e.jsx("input",{type:"text",value:l.materials,onChange:e=>a({...l,materials:e.target.value}),placeholder:"期望材质（如：科技布、真皮、金属）",className:"input w-full"}),e.jsx("input",{type:"text",value:l.colors,onChange:e=>a({...l,colors:e.target.value}),placeholder:"期望颜色（如：米白色、深灰色）",className:"input w-full"}),e.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:i,children:i?"提交中...":"提交定制需求"})]})]})}const _=async()=>{try{const e=await z.post("/users/track-download");if(e.data.success){const{consecutiveDownloads:s,tagAdded:t,warning:r}=e.data.data;return t?p.error("您的账号已被标记为批量下载，请注意合规使用"):r&&p.warning(r),e.data.data}}catch(e){}return null};function I({trackDownload:t=!0,className:r,...l}){const[a,i]=x.useState(!1);return e.jsx("img",{...l,className:s(r),onContextMenu:async e=>{t&&!a&&(await _(),i(!0),setTimeout(()=>i(!1),3e3))},onDragStart:async e=>{t&&await _()}})}const D="#14452F",L=[{key:"fabric",label:"面料",badgeClass:"bg-blue-50 text-blue-700 border-blue-100",swatchStyle:"from-slate-50 via-slate-100 to-slate-200"},{key:"filling",label:"填充",badgeClass:"bg-green-50 text-green-700 border-green-100",swatchStyle:"from-emerald-50 via-emerald-100 to-emerald-200"},{key:"frame",label:"骨架",badgeClass:"bg-purple-50 text-purple-700 border-purple-100",swatchStyle:"from-indigo-50 via-indigo-100 to-indigo-200"},{key:"leg",label:"脚架",badgeClass:"bg-orange-50 text-orange-700 border-orange-100",swatchStyle:"from-amber-50 via-amber-100 to-amber-200"},{key:"cushion",label:"坐垫",badgeClass:"bg-pink-50 text-pink-700 border-pink-100",swatchStyle:"from-pink-50 via-pink-100 to-pink-200"},{key:"armrest",label:"扶手",badgeClass:"bg-teal-50 text-teal-700 border-teal-100",swatchStyle:"from-teal-50 via-teal-100 to-teal-200"},{key:"backrest",label:"靠背",badgeClass:"bg-indigo-50 text-indigo-700 border-indigo-100",swatchStyle:"from-violet-50 via-violet-100 to-violet-200"},{key:"hardware",label:"五金",badgeClass:"bg-gray-50 text-gray-700 border-gray-100",swatchStyle:"from-gray-50 via-gray-100 to-gray-200"}],T=e=>L.find(s=>s.key===e)||{key:e,label:e,badgeClass:"bg-gray-50 text-gray-700 border-gray-100",swatchStyle:"from-gray-50 via-gray-100 to-gray-200"},U=(e,s)=>e.length?"standard"===s?e.find(e=>!e.isPro)||e[0]:"pro"===s&&e.find(e=>e.isPro)||e[0]:null,R=e=>/\.(mp4|webm|ogg)$/i.test(e),W=e=>{if(!e)return{};if("string"==typeof e)return e?{fabric:[e]}:{};const s={};return Object.entries(e).forEach(([e,t])=>{const r=(e=>e?Array.isArray(e)?e.filter(Boolean):e?[e]:[]:[])(t);r.length>0&&(s[e]=r)}),s},q=e=>{if(!e)return 0;return e.discountPrice&&e.discountPrice>0&&(e.discountPrice??0)<e.price?e.discountPrice:e.price},H={"磨砂皮":"磨砂皮具有细腻的磨砂质感，手感柔软舒适，外观时尚大气。","纳帕A级皮":"纳帕A级皮是顶级真皮，皮质细腻柔软，触感舒适，高端品质。","普通皮":"普通皮革，经济实惠，适合日常使用。具有良好的耐用性和易清洁特性。","全青皮":"全青皮是高级皮革，采用天然植物鞣制工艺，具有独特的质感和气味。","牛皮":"优质牛皮，纹理自然，质感细腻。具有很好的透气性和耐磨性。","绒布":"柔软舒适的绒布面料，触感温暖。易于清洁，适合家庭使用。","麻布":"天然麻布，环保透气，具有独特的质感。适合现代简约风格。","舒软款":"舒软填充，坐感柔软舒适，适合长时间休息。","高密加硬":"高密度填充，支撑性强，不易塌陷，适合喜欢硬坐感的用户。","高回弹":"高回弹海绵，弹性好，久坐不变形，舒适耐用。","55D高回弹海绵":"采用出口级55D高密度聚氨酯海绵，回弹率>55%，经过72小时疲劳测试，十年坐感如初，提供恰到好处的支撑力，保护脊椎健康。适合喜欢偏硬坐感的用户。","70%羽绒+乳胶":"云端包裹感，轻盈柔软，透气性极佳，给您如云端般的舒适体验。","标准骨架":"标准骨架配置，稳固耐用，性价比高。","顶级骨架":"顶级骨架配置，采用优质材料，更加稳固耐用。","俄罗斯落叶松":"采用进口俄罗斯落叶松实木，木质坚硬，纹理清晰，承重力强，使用寿命长。","普通脚架":"标准脚架，稳固实用。","钛合金脚架":"钛合金脚架，轻便坚固，美观大方。","黑钛不锈钢":"采用304不锈钢材质，黑钛电镀工艺，耐腐蚀、耐磨损，外观时尚高端。","泰迪绒":"泰迪绒面料柔软蓬松，触感细腻，保暖性好，外观时尚可爱。","A类泰迪绒":"A类泰迪绒采用优质纤维，柔软亲肤，透气性好，适合家居使用。","A+泰迪绒":"A+泰迪绒是顶级泰迪绒面料，更加柔软蓬松，触感极佳。","B泰迪绒":"B类泰迪绒性价比高，触感舒适，适合日常使用。"},J=(e,s)=>{var t;if(null==s?void 0:s[e])return s[e];const r=null==(t=e.split(/[-–—]/)[0])?void 0:t.trim();if(r&&H[r])return H[r];for(const[l,a]of Object.entries(H))if(e.includes(l))return a;return""},X=(e,s)=>e?e.isPro?q(e):q(e)+((e,s)=>{if(!e||!s)return 0;const t=e.materialUpgradePrices||{};let r=0;return Object.values(s).filter(e=>!!e).forEach(e=>{var s;if(void 0!==t[e])return void(r+=t[e]);const l=null==(s=e.split(/[-–—]/)[0])?void 0:s.trim();if(l&&void 0!==t[l])r+=t[l];else for(const[a,i]of Object.entries(t))if(e.includes(a)&&"number"==typeof i)return void(r+=i)}),r})(e,s):0,V=()=>{const{id:z}=h(),[_,L]=x.useState(null),[V,G]=x.useState(!0),[K,Q]=x.useState(null),[Y,Z]=x.useState(1),[ee,se]=x.useState(""),[te,re]=x.useState(!1),[le,ae]=x.useState("all"),[ie,ne]=x.useState(!0),[oe,ce]=x.useState(!1),[de,me]=x.useState({}),[ue,xe]=x.useState(null),[he,ge]=x.useState(null),[fe,pe]=x.useState({open:!1}),[be,ye]=x.useState(!1),[ve,je]=x.useState([]),[Ne,we]=x.useState({}),[ke,Ce]=x.useState(!1),{addItem:Pe}=t(),{favorites:Se,toggleFavorite:$e,loadFavorites:Oe}=r(),{compareItems:Ae,addToCompare:Ee,loadCompareItems:Fe}=l(),{user:Me,isAuthenticated:ze}=a(),Be=g();x.useEffect(()=>{window.scrollTo(0,0)},[z]),x.useEffect(()=>{ze&&Oe(),Fe()},[ze,Oe,Fe]);const[_e,Ie]=x.useState(!1);x.useEffect(()=>{Ie(!1)},[K]);const De=()=>{!_e&&K&&((async()=>{if(!K)return;const e=W(K.material),s=Object.values(e).flat().filter(Boolean);if(0===s.length)return;const t=s.filter(e=>!Ne[e]);if(t.length>0){const e=await u(t);we(s=>({...s,...e}))}})(),Ie(!0))};x.useEffect(()=>{if(K&&!oe){const e=setTimeout(De,500);return()=>clearTimeout(e)}},[K,oe]);const Le=x.useMemo(()=>{const e={};if(!K)return e;const s=W(K.material);return Object.values(s).flat().forEach(s=>{var t;s&&((null==(t=K.materialImages)?void 0:t[s])?e[s]=K.materialImages[s]:Ne[s]&&(e[s]=Ne[s]))}),e},[K,Ne]),Te=x.useMemo(()=>{if(!_)return[];const e=[...Array.isArray(_.images)?_.images:[],..._.skus.flatMap(e=>e.images||[])].filter(Boolean);return Array.from(new Set(e))},[_]),Ue=x.useMemo(()=>{var e;if(null==(e=null==K?void 0:K.images)?void 0:e.length){const e=K.images.filter(Boolean);if(e.length>0)return e}return Te},[K,Te]),Re=x.useMemo(()=>_?"standard"===le?_.skus.filter(e=>!e.isPro):"pro"===le?_.skus.filter(e=>e.isPro):_.skus:[],[_,le]),We=x.useMemo(()=>{if(!_||!_.skus||0===_.skus.length)return[];const e=[],s=_.skus.some(e=>!e.isPro),t=_.skus.some(e=>e.isPro);return s&&t&&e.push({key:"all",label:"全部款式"}),s&&e.push({key:"standard",label:"标准版"}),t&&e.push({key:"pro",label:"PRO 版"}),e},[_]),qe=x.useMemo(()=>{return(e=(null==_?void 0:_.videos)||(null==_?void 0:_.videoUrls))?(Array.isArray(e)?e:[e]).map(e=>e?"string"==typeof e?e.trim():"object"==typeof e&&(e.url||e.link||e.src)||"":"").filter(Boolean):[];var e},[_]),He=x.useMemo(()=>{return(e=(null==_?void 0:_.files)||(null==_?void 0:_.fileList))?(Array.isArray(e)?e:[e]).map(e=>{var s;if(!e)return null;if("string"==typeof e)return{name:"资料文件",url:e,format:null==(s=e.split(".").pop())?void 0:s.toUpperCase()};const t=e.url||e.link||"";return t?{name:e.name||e.title||"资料文件",url:t,format:e.format||e.type||void 0,size:e.size??(e.filesize?Number(e.filesize):void 0)}:null}).filter(e=>Boolean(e)):[];var e},[_]);x.useEffect(()=>{Ce(!1),i(),we({}),(async()=>{var e,s;if(z){G(!0);try{const r=await m(z);if(L(r),r){const l=(t=r.skus).some(e=>!e.isPro)?"standard":t.some(e=>e.isPro)?"pro":"all";ae(l);const a=U(r.skus,l);Q(a);const i=null==(e=null==a?void 0:a.images)?void 0:e.find(Boolean),n=null==(s=r.images)?void 0:s.find(Boolean);se(i||n||"")}else p.error("未找到该商品")}finally{G(!1),Ce(!0)}var t}})()},[z]),x.useEffect(()=>{var e;if(!Re.length)return Q(null),void me({});if(K&&Re.some(e=>e._id===K._id))return;const s=Re[0];Q(s),(null==(e=null==s?void 0:s.images)?void 0:e.length)&&se(s.images[0])},[Re,K]),x.useEffect(()=>{Ue.length&&se(e=>Ue.includes(e)?e:Ue[0])},[Ue]),x.useEffect(()=>{if(!K)return void me({});const e=W(K.material),s=K.materialUpgradePrices||{},t=K.materialCategories||Object.keys(e);me(r=>{const l={};return t.forEach(t=>{const a=e[t]||[];1===a.length?l[t]=a[0]:K.isPro?l[t]=((e,s)=>e.length?e.reduce((e,t)=>{const r=(null==s?void 0:s[t])??0;return e?r>((null==s?void 0:s[e])??0)?t:e:t},null):null)(a,s):a.length>1&&r[t]&&a.includes(r[t])?l[t]=r[t]:l[t]=null}),l})},[K]);const Je=e=>{var s,t;Q(e);const r=null==(s=e.images)?void 0:s.find(Boolean),l=Te[0]||(null==(t=null==_?void 0:_.images)?void 0:t[0])||"";se(r||l),Z(1)},Xe=e=>{Z(s=>Math.max(1,s+e))},Ve=()=>{if(!K)return null;const e=W(K.material),s=K.materialCategories||Object.keys(e),t={};for(const r of s){const s=e[r]||[],l=de[r]||(1===s.length?s[0]:void 0),a=T(r);if(s.length>1&&!l)return void p.error(`请选择${a.label}`);t[r]=l}return t},Ge=()=>pe({open:!1}),Ke=x.useMemo(()=>Ue.findIndex(e=>e===ee),[Ue,ee]),Qe=e=>{if(!Ue.length)return;const s=Ke>=0?Ke:0,t="prev"===e?(s-1+Ue.length)%Ue.length:(s+1)%Ue.length;se(Ue[t])};if(V)return e.jsx("div",{className:"container-custom py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-square bg-gray-200 rounded-2xl animate-pulse"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(s=>e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-lg animate-pulse"},s))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4 animate-pulse"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 animate-pulse"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-1/3 animate-pulse"}),e.jsx("div",{className:"h-24 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-12 bg-gray-200 rounded animate-pulse"})]})]})});if(!_)return e.jsx("div",{className:"container-custom py-12 text-center",children:"商品不存在"});const Ye=K?K.price:_.basePrice,Ze=null==K?void 0:K.discountPrice,es=K?W(K.material):null;K?q(K):_.basePrice;const ss=(()=>{if(!K)return;const e=W(K.material),s=K.materialCategories||Object.keys(e),t={};return s.forEach(s=>{const r=e[s]||[];t[s]=de[s]||(1===r.length?r[0]:null)}),t})(),ts=K?X(K,ss):_.basePrice,rs=!!_&&Se.some(e=>{if(!e||!e.product)return!1;return("string"==typeof e.product?e.product:e.product._id)===_._id}),ls=e=>{var s,t,r,l,a;return e?Le[e]?Le[e]:(null==(r=null==K?void 0:K.materialImages)?void 0:r[e])?K.materialImages[e]:Ne[e]?Ne[e]:(null==(l=null==K?void 0:K.images)?void 0:l[0])||(null==(a=_.images)?void 0:a[0])||"":(null==(s=null==K?void 0:K.images)?void 0:s[0])||(null==(t=_.images)?void 0:t[0])||""},as=e=>{if(!e)return"";if("string"==typeof e)return e;if("string"==typeof e.value)return e.value;if(["length","width","height"].every(s=>void 0!==e[s]&&null!==e[s])){const s=e.unit||"CM";return`${e.length} x ${e.width} x ${e.height} ${s}`}return""},is=Array.isArray(_.specifications)?_.specifications.map((e,s)=>({name:(null==e?void 0:e.name)||`规格${s+1}`,value:as(e)})):Object.entries(_.specifications||{}).map(([e,s])=>({name:e,value:"string"==typeof s?s:String(s??"")}));return e.jsxs("div",{className:"bg-gray-50",children:[e.jsxs("div",{className:"container-custom max-w-[1440px] mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm mb-6",children:[e.jsxs("button",{onClick:()=>Be(-1),className:"text-gray-600 hover:text-primary-600 flex items-center gap-1",children:[e.jsx(b,{className:"h-4 w-4"}),"返回"]}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx(f,{to:"/",className:"text-gray-600 hover:text-primary-600",children:"首页"}),e.jsx(y,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{onClick:()=>Be(-1),className:"text-gray-600 hover:text-primary-600 cursor-pointer",children:"商城"}),e.jsx(y,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 font-medium",children:_.name})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1.6fr_1fr] gap-12 items-start",children:[e.jsxs("div",{className:"lg:sticky lg:top-8 lg:self-start",children:[e.jsxs("div",{className:"relative w-full bg-white rounded-3xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3]",children:[he?e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"w-1/2 h-full border-r border-gray-200 bg-white",children:ee?R(ee)?e.jsx("video",{src:n(ee),controls:!0,className:"w-full h-full object-contain"}):e.jsx(I,{src:o(ee,800),alt:_.name,className:"w-full h-full object-contain",loading:"eager"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"暂无图片"})}),e.jsx("div",{className:"w-1/2 h-full bg-gray-50 flex items-center justify-center p-4",children:e.jsx("img",{src:n(he),alt:"材质预览",className:"max-w-full max-h-full object-contain rounded-lg shadow-sm"})})]}):e.jsx(e.Fragment,{children:ee?R(ee)?e.jsx("video",{src:n(ee),controls:!0,className:"absolute inset-0 w-full h-full object-contain bg-black"}):e.jsx(I,{src:o(ee,800),alt:_.name,className:"absolute inset-0 w-full h-full object-contain bg-white",loading:"eager"}):e.jsx("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center text-gray-400",children:"暂无图片"})}),e.jsxs("button",{type:"button",onClick:()=>ye(!0),className:"absolute bottom-4 right-4 inline-flex items-center gap-2 rounded-full bg-black/70 text-white text-xs px-4 py-2 z-10",children:[e.jsx(v,{className:"h-3.5 w-3.5"}),"全部图片"]})]}),Ue.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>Qe("prev"),className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white shadow p-2 rounded-full",children:e.jsx(b,{className:"h-5 w-5 text-gray-700"})}),e.jsx("button",{type:"button",onClick:()=>Qe("next"),className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white shadow p-2 rounded-full",children:e.jsx(y,{className:"h-5 w-5 text-gray-700"})})]}),Ue.length>0&&e.jsxs("span",{className:"absolute bottom-4 right-4 text-xs px-3 py-1 rounded-full bg-black/60 text-white",children:[Ke+1,"/",Ue.length]})]}),e.jsx("div",{className:"mt-4 flex gap-3 overflow-x-auto pb-2",children:Ue.map((t,r)=>e.jsx("button",{onClick:()=>se(t),className:s("w-24 flex-shrink-0 border rounded-xl overflow-hidden transition-all",ee===t?"border-primary-600 ring-2 ring-primary-100":"border-gray-200"),children:R(t)?e.jsx("div",{className:"w-full h-20 flex items-center justify-center bg-black text-white text-xs",children:"视频"}):e.jsx("img",{src:o(t,100),alt:`thumbnail ${r+1}`,className:"w-full h-20 object-cover",loading:"lazy"})},r))})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"产品系列"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:_.name})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("button",{type:"button",onClick:()=>re(!0),className:"flex items-center gap-1 text-gray-600 hover:text-gray-900","aria-label":"分享",children:[e.jsx(j,{className:"h-4 w-4"})," 分享"]}),e.jsx("button",{type:"button",onClick:async()=>{if(!_)return;const{isAuthenticated:e}=a.getState();if(!e)return p.error("请先登录后再收藏商品"),void c.getState().openLogin();try{const e=await $e(_);p.success(e?"已加入收藏":"已取消收藏")}catch(s){p.error("操作失败，请重试")}},className:s("p-2 rounded-full border transition-colors",rs?"border-red-200 bg-red-50 text-red-500":"border-gray-200 text-gray-500 hover:border-gray-400"),"aria-label":rs?"取消收藏":"收藏",children:e.jsx(N,{className:s("h-5 w-5 sm:h-6 sm:w-6",rs?"fill-red-500 text-red-500":"")})})]})]}),e.jsxs("div",{className:"sticky top-20 z-40 bg-white p-4 rounded-2xl shadow-lg mb-4 border border-gray-100",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-2 truncate",children:_.name}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"当前价格"}),e.jsx("span",{className:"text-2xl font-bold text-red-600",children:d(ts)}),!(null==K?void 0:K.isPro)&&Ze&&Ze>0&&Ye&&Ye>Ze&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-red-50 text-red-600",children:"限时优惠"}),e.jsx("span",{className:"text-xs text-gray-400 line-through",children:d(Ye)})]}),(null==K?void 0:K.isPro)&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-yellow-100 text-yellow-800",children:"PRO一口价"}),We.length>1&&e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"版本："}),We.map(t=>e.jsx("button",{onClick:()=>(e=>{ae(e);const s=U((null==_?void 0:_.skus)||[],e);s&&Je(s)})(t.key),className:s("px-3 py-1 rounded-full text-xs border transition-colors",le===t.key?"text-white":"text-gray-600 border-gray-200 hover:border-gray-400"),style:le===t.key?{backgroundColor:D,borderColor:D}:{},children:t.label},t.key))]})]}),(null==K?void 0:K.isPro)&&e.jsx("div",{className:"mt-2 rounded-lg border border-yellow-200 bg-yellow-50 px-3 py-2",children:e.jsxs("p",{className:"text-xs font-semibold text-yellow-900",children:["PRO 专业版: ",K.proFeature||"更高端材质与功能升级"]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm mb-6 p-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-2xl bg-white",children:[e.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 text-left",onClick:()=>ne(e=>!e),children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"选择规格"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["当前 ",Re.length," 款 · 支持单品 / 套餐 / 组合"]})]}),e.jsx(w,{className:s("h-4 w-4 text-gray-500 transition-transform",ie?"-rotate-90":"rotate-0")})]}),!ie&&e.jsx("div",{className:"border-t border-gray-100 p-4",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[0===Re.length&&e.jsx("div",{className:"p-8 rounded-xl border border-dashed border-gray-300 text-center col-span-full",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(k,{className:"h-12 w-12 text-gray-400"}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"pro"===le?"该商品暂无 PRO 版本":"standard"===le?"该商品暂无标准版本":"暂无可选规格"}),e.jsx("p",{className:"text-xs text-gray-500",children:"请选择其他版本或联系客服咨询"})]})}),Re.map(t=>{var r;const l=(null==K?void 0:K._id)===t._id,a=X(t),i=(null==(r=is.find(e=>e.name===t.spec))?void 0:r.value)||`${t.length}x${t.width}x${t.height}cm`;return e.jsxs("button",{onClick:()=>{(e=>{ae(s=>"all"===s?e.isPro?"pro":"standard":s)})(t),Je(t)},className:s("w-full px-5 py-3 rounded-xl border text-left bg-white transition-shadow hover:shadow-md flex flex-col gap-1",l?"shadow-[0_8px_24px_rgba(31,100,255,0.12)]":"border-gray-200"),style:l?{borderColor:D,backgroundColor:"#f0fdf4"}:{},children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-sm font-semibold text-gray-900",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:t.spec||t.code||"默认规格"}),t.isPro&&e.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-yellow-100 text-yellow-700",children:"PRO"})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-lg font-bold text-red-600",children:d(a)}),t.discountPrice&&t.discountPrice>0&&t.discountPrice<t.price&&e.jsx("span",{className:"text-xs text-gray-400 line-through",children:d(t.price)})]})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1 leading-relaxed",children:["尺寸：",i]})]},t._id)})]})})]}),K&&e.jsxs("div",{className:"border border-gray-200 rounded-2xl bg-white mt-4",children:[e.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 text-left",onClick:()=>{ce(e=>!e),De()},children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"选择材质"}),e.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:"参考材质卡片，点击即可切换"})]}),e.jsx(w,{className:s("h-4 w-4 text-gray-500 transition-transform",oe?"-rotate-90":"rotate-0")})]}),!oe&&e.jsx("div",{className:"border-t border-gray-100 p-4 space-y-5",children:ke?e.jsx(e.Fragment,{children:(()=>{const t=[...(K.materialCategories||Object.keys(es||{})).filter(e=>((null==es?void 0:es[e])||[]).length>0)].sort((e,s)=>"fabric"===e||"面料"===e?-1:"fabric"===s||"面料"===s?1:0),r=H;return t.map((t,l)=>{var a;const i=T(t),c=(null==es?void 0:es[t])||[],m=de[t]||(1===c.length?c[0]:null),u=m?(null==(a=K.materialUpgradePrices)?void 0:a[m])??0:0,x={},h=[];return c.forEach(e=>{let s="other";if(e.includes("磨砂皮"))s="磨砂皮";else if(e.includes("纳帕A级皮")||e.includes("纳帕"))s="纳帕A级皮";else if(e.includes("全青皮"))s="全青皮";else if(e.includes("普通皮"))s="普通皮";else if(e.includes("牛皮"))s="牛皮";else if(e.includes("绒布"))s="绒布";else if(e.includes("麻布"))s="麻布";else if(e.includes("舒软款"))s="舒软款";else if(e.includes("高密加硬"))s="高密加硬";else if(e.includes("高回弹"))s="高回弹";else if(e.includes("国产桉木")||e.includes("普通蛇形弹簧")||e.includes("普通弹簧"))s="标准骨架";else if(e.includes("落叶松")||e.includes("加厚龙骨")||e.includes("锰钢"))s="顶级骨架";else if(e.includes("普通脚架")||e.includes("国产脚架"))s="普通脚架";else if(e.includes("钛合金"))s="钛合金脚架";else{const t=e.split(/[-–—]/);t.length>1&&(s=t[0].trim())}x[s]||(x[s]=[],h.push(s)),x[s].push(e)}),e.jsxs("div",{className:"space-y-3",children:[l>0&&e.jsx("div",{className:"border-t border-gray-200 pt-4 mt-4"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:i.label}),e.jsx("span",{className:"text-xs text-gray-400",children:c.length?`${c.length} 种`:"未设置"}),m&&u>0&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",d(u)]})]}),c.length>0&&e.jsx("div",{className:"space-y-4",children:h.map(t=>e.jsxs("div",{children:["other"!==t&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:t}),e.jsx("button",{type:"button",onClick:()=>{return e=i.key,s=x[t][0],void pe({open:!0,section:e,material:s});var e,s},className:"p-1 text-blue-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:`查看${t}详细介绍`,children:e.jsx(C,{className:"w-3.5 h-3.5"})})]}),e.jsx("div",{className:"flex flex-wrap gap-4",children:x[t].map(t=>{var r,l;const a=m===t,n=1===c.length,d=ls(t),u=((e,s)=>{if(!s||0===Object.keys(s).length)return 0;if(void 0!==s[e])return s[e];for(const[t,r]of Object.entries(s))if(e.startsWith(t+"-")||e.startsWith(t+"—"))return r;for(const[t,r]of Object.entries(s))if(e.includes(t))return r;return 0})(t,K.materialUpgradePrices),x=t.split(/[-–—]/),h=x.length>1?x[0].trim():"",g=x.length>1?x.slice(1).join("-").trim():t;return e.jsxs("button",{type:"button",onClick:()=>!n&&((e,s)=>{if(((null==es?void 0:es[e])||[]).length<=1)return;if(de[e]===s){const t=ue===e;xe(t?null:e);const r=ls(s);ge(t?null:r||null)}else{me(t=>({...t,[e]:s})),xe(e);const t=ls(s);ge(t||null)}})(i.key,t),className:s("flex flex-col items-center gap-1.5 relative w-[72px]",n?"cursor-default":"cursor-pointer"),disabled:n,children:[!(null==K?void 0:K.isPro)&&u>0&&e.jsxs("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] px-1.5 py-0.5 rounded-full font-medium shadow-sm z-10",children:["+¥",u]}),e.jsx("span",{className:s("w-14 h-14 rounded-lg border-2 flex items-center justify-center overflow-hidden transition-all",a?"border-[#1F64FF] shadow-[0_4px_12px_rgba(31,100,255,0.25)]":"border-transparent hover:border-gray-300"),children:d&&d!==((null==(r=null==K?void 0:K.images)?void 0:r[0])||(null==(l=null==_?void 0:_.images)?void 0:l[0]))?e.jsx("img",{src:o(d,80),alt:t,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("span",{className:s("w-full h-full flex items-center justify-center text-[10px] font-medium rounded-md text-gray-600 bg-gray-100 p-1 text-center leading-tight"),children:g.slice(0,6)})}),e.jsxs("div",{className:"text-center w-full",children:[h&&e.jsx("p",{className:"text-[10px] text-gray-400 truncate",children:h}),e.jsx("p",{className:"text-xs text-gray-600 truncate",children:g})]})]},t)})})]},t))}),ue===i.key&&m&&(()=>{var s,t;const l=ls(m),a=(null==(s=null==K?void 0:K.materialDescriptions)?void 0:s[m])||r[null==(t=m.split(/[-–—]/)[0])?void 0:t.trim()]||"";if(!l&&!a)return null;const i=m.split(/[-–—]/),o=i.length>1?i.slice(1).join("-").trim():m,c=i.length>1?i[0].trim():"";return e.jsx("div",{className:"mt-4 bg-gray-50 rounded-xl p-4 border border-gray-200",children:e.jsxs("div",{className:"flex gap-4",children:[l&&e.jsx("div",{className:"flex-shrink-0 w-32 h-32 rounded-lg border border-gray-200 bg-white overflow-hidden",children:e.jsx("img",{src:n(l),alt:m,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-bold text-gray-900",children:c?`${c} ${o}`:m}),e.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded",children:"工艺详解"})]}),a&&e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:a})]})]})})})()]},i.key)})})()}):e.jsxs("div",{className:"space-y-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(s=>e.jsx("div",{className:"w-14 h-14 bg-gray-200 rounded-lg"},s))})]})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-800 mb-2",children:"数量"}),e.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg w-fit",children:[e.jsx("button",{onClick:()=>Xe(-1),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-l-md",children:e.jsx(P,{className:"h-4 w-4"})}),e.jsx("span",{className:"px-6 py-1 font-semibold text-gray-800",children:Y}),e.jsx("button",{onClick:()=>Xe(1),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-r-md",children:e.jsx(S,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>{if(!_||!K)return void p.error("请选择商品规格");const e=Ve();e&&(Pe(_,K,Y,e,X(K,e)),p.success("已添加到购物车"))},className:"py-3 rounded-lg text-white font-semibold text-base hover:shadow-md transition-all duration-200 flex items-center justify-center gap-2",style:{backgroundColor:D},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),"加入购物车"]}),e.jsx("button",{onClick:async()=>{if(!_||!K)return void p.error("请选择商品规格");const e=Ve();if(!e)return;const s=await Ee(_._id,K._id,e);p[s.success?"success":"error"](s.message)},className:"py-3 rounded-lg border font-medium transition-all duration-200 text-base",style:{borderColor:D,color:D,backgroundColor:"#f0fdf4"},children:"加入对比"})]}),e.jsx("button",{onClick:()=>{if(!_||!K)return void p.error("请选择商品规格");const e=Ve();e&&(Pe(_,K,Y,e,X(K,e)),Be("/checkout"))},className:"w-full py-3 rounded-lg bg-red-600 text-white font-semibold text-base hover:bg-red-700 transition-all duration-200",children:"立即购买"})]})]})]}),e.jsxs("div",{className:"mt-10 grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"card p-6 min-h-[280px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"})," 视频演示"]}),e.jsx("span",{className:"text-xs text-gray-400",children:qe.length>0?`${qe.length} 个视频`:"暂无视频"})]}),qe.length>0?e.jsx("div",{className:"grid grid-cols-2 gap-3",children:qe.map((s,t)=>{var r;const l=(null==(r=_.videoTitles)?void 0:r[t])||`${_.name} - 视频${t+1}`,a=`video-${t}`,i=R(s);return e.jsxs("button",{type:"button",onClick:()=>{var e;if(i){const s=document.getElementById(a);s&&(document.pictureInPictureElement&&document.exitPictureInPicture(),s.play(),null==(e=s.requestPictureInPicture)||e.call(s).catch(e=>{var t;null==(t=s.requestFullscreen)||t.call(s)}))}else window.open(s,"_blank","noopener,noreferrer")},className:"relative group aspect-video rounded-lg overflow-hidden bg-gray-900 hover:ring-2 hover:ring-primary-500 transition-all cursor-pointer",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center mx-auto mb-2 group-hover:bg-white/30 transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-white ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})})}),e.jsx("p",{className:"text-white text-sm font-medium px-2",children:l}),e.jsx("p",{className:"text-white/70 text-xs mt-1",children:i?"点击播放画中画":"点击跳转观看"})]})}),i&&e.jsx("video",{id:a,src:s,className:"hidden",preload:"metadata",controls:!0,onEnded:()=>{document.pictureInPictureElement&&document.exitPictureInPicture()}})]},t)})}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[e.jsx($,{className:"h-10 w-10 mb-3"}),e.jsx("p",{children:"暂未添加视频"})]})]}),e.jsxs("div",{className:"card p-6 min-h-[280px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5"})," 设计文件下载"]}),e.jsxs("span",{className:"text-xs text-gray-400",children:[He.length>0?`${He.length} 个文件`:"暂无文件"," · 登录后下载"]})]}),He.length>0?e.jsx("div",{className:"space-y-4",children:(()=>{const s={},t={dwg:"CAD专区",dxf:"CAD专区",max:"3DMAX专区",fbx:"FBX专区",obj:"OBJ专区",skp:"SketchUp专区",blend:"Blender专区","3ds":"3DS专区",pdf:"PDF文档",other:"其他文件"};return He.forEach(e=>{var r;const l=(e.format||(null==(r=e.name)?void 0:r.split(".").pop())||"other").toLowerCase(),a=t[l]?l:"other";s[a]||(s[a]=[]),s[a].push(e)}),Object.entries(s).map(([s,r])=>e.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:t[s]||"其他文件"}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",r.length,")"]})]}),e.jsx("div",{className:"divide-y divide-gray-100",children:r.map((s,t)=>{var r,l;const a=(null==(r=s.format)?void 0:r.toLowerCase())||"file",i=`${_.name}.${a}`,n=s.name||i;return e.jsxs("button",{type:"button",onClick:()=>(async e=>{var s;if(!Me)return p.error("请先登录账号后再下载资料"),void c.getState().openLogin();if(e.url)try{const t=e.url.startsWith("http")?e.url:`/api/files/${e.url}`,r=(null==(s=e.format)?void 0:s.toLowerCase())||"file",l=`${_.name}.${r}`,a=await fetch(t),i=await a.blob(),n=window.URL.createObjectURL(i),o=document.createElement("a");o.href=n,o.download=l,document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(n),document.body.removeChild(o),p.success(`正在下载 ${l}`)}catch(t){p.error("下载失败，请稍后重试")}else p.error("文件地址不存在")})(s),className:"w-full flex items-center justify-between px-4 py-3 hover:bg-primary-50 text-left",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm",children:n}),e.jsxs("p",{className:"text-xs text-gray-400",children:[(null==(l=s.format)?void 0:l.toUpperCase())||"未知"," · ",s.size?`${(s.size/1024/1024).toFixed(1)}MB`:"大小待定",s.uploadTime&&` · ${s.uploadTime}`]})]}),e.jsx("span",{className:"text-sm text-primary-600 font-medium",children:"下载"})]},t)})})]},s))})()}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[e.jsx(O,{className:"h-10 w-10 mb-3"}),e.jsx("p",{children:"暂未上传设计文件"})]})]})]}),e.jsx("div",{className:"mt-12",children:e.jsx(B,{productId:_._id})})]}),e.jsx(M,{isOpen:te,onClose:()=>re(!1)}),be&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"全部图片"}),e.jsx("p",{className:"text-xs text-gray-500",children:"可多选下载，需登录账号才可下载"})]}),e.jsx("button",{onClick:()=>ye(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(A,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-4 overflow-auto grid grid-cols-2 md:grid-cols-3 gap-4",children:Ue.map((t,r)=>{const l=ve.includes(t);return e.jsxs("button",{type:"button",onClick:()=>{return e=t,void je(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e]);var e},className:s("relative rounded-2xl overflow-hidden border transition-all",l?"border-primary-500 ring-2 ring-primary-200":"border-gray-200"),children:[R(t)?e.jsx("div",{className:"w-full h-40 flex items-center justify-center bg-black text-white text-sm",children:"视频"}):e.jsx("img",{src:n(t),alt:`gallery-${r}`,className:"w-full h-40 object-cover"}),e.jsx("span",{className:"absolute top-2 right-2 h-7 w-7 rounded-full flex items-center justify-center bg-white/90 text-gray-700 border",children:l?e.jsx(E,{className:"h-4 w-4 text-primary-600"}):r+1})]},r)})}),e.jsxs("div",{className:"p-4 border-t bg-gray-50 flex items-center justify-between sticky bottom-0",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700",children:["已选 ",e.jsx("span",{className:"text-primary-600 font-bold",children:ve.length})," 张"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-900 font-medium",onClick:()=>{je([]),ye(!1)},children:"取消"}),e.jsxs("button",{type:"button",className:"px-6 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:ve.length>0?"#1F64FF":"#e5e7eb",color:ve.length>0?"white":"#9ca3af"},onClick:async()=>{if(ve.length){if(!Me)return p.error("请先登录账号后再下载图片"),void c.getState().openLogin();p.success(`开始下载 ${ve.length} 张图片`);for(let s=0;s<ve.length;s++){const t=ve[s];try{const e=n(t),r=`${(null==_?void 0:_.name)||"product"}-${s+1}.jpg`,l=document.createElement("a");l.href=e,l.download=r,l.target="_blank",l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l),s<ve.length-1&&await new Promise(e=>setTimeout(e,500))}catch(e){p.error(`图片 ${s+1} 下载失败`)}}}else p.error("请先选择需要下载的图片")},disabled:0===ve.length,children:[e.jsx(F,{className:"h-4 w-4"})," 下载所选 (",ve.length,")"]})]})]})]})}),fe.open&&fe.section&&fe.material&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto p-8 relative",children:[e.jsx("button",{type:"button",className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600",onClick:Ge,children:e.jsx(A,{className:"h-5 w-5"})}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-4",children:fe.material}),e.jsx("div",{className:"rounded-2xl overflow-hidden border-2 border-gray-200 mb-6 shadow-lg",children:e.jsx("img",{src:n(ls(fe.material)),alt:fe.material,className:"w-full h-96 object-cover",loading:"eager"})}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 mb-4",children:[e.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-3",children:"材质说明"}),e.jsx("p",{className:"text-base text-gray-700 leading-relaxed whitespace-pre-wrap",children:J(fe.material,null==K?void 0:K.materialDescriptions)||"该材质暂未提供详细说明。"})]}),e.jsx("button",{type:"button",className:"w-full py-4 rounded-xl text-white font-semibold text-lg shadow-lg hover:opacity-90 transition-opacity",style:{backgroundColor:D},onClick:Ge,children:"关闭"})]})})]})};export{V as default};
