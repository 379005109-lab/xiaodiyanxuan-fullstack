import{s as e,j as s,f as a}from"./index-DWFic46w.js";import{i as t,u as l,r}from"./react-vendor-E1AgTUZ9.js";import{u as c,v as i,aM as n,aa as d}from"./ui-vendor-CQy3HONI.js";import{m as x}from"./framer-motion-7DcRqacn.js";import"./recharts-wIacPPq0.js";function m(){const{id:m}=t(),o=l(),[p,h]=r.useState(null),[j,g]=r.useState(0),[N,u]=r.useState(0),[b,f]=r.useState(!0),[v,y]=r.useState(!1);r.useEffect(()=>{w()},[m]);const w=async()=>{f(!0);try{if(m){const s=await e.get(`/packages/${m}`);if(s.data.success&&s.data.data){const e=s.data.data;h(e),g(e.channelPrice||.7*e.basePrice),u(e.designerPrice||.6*e.basePrice)}else c.error("å¥—é¤ä¸å­˜åœ¨"),o("/admin/packages")}}catch(s){c.error("åŠ è½½å¥—é¤å¤±è´¥"),o("/admin/packages")}finally{f(!1)}};if(b)return s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!p)return s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-600",children:"å¥—é¤ä¸å­˜åœ¨"})});const k=p.price-j,C=p.price-N,P=(k/p.price*100).toFixed(1),S=(C/p.price*100).toFixed(1);return s.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>o("/admin/packages"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(i,{className:"h-6 w-6 text-gray-700"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:p.name}),s.jsx("p",{className:"text-gray-600 mt-1",children:"åˆ©æ¶¦ç®¡ç†"})]})]}),s.jsxs("div",{className:"card",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"å¥—é¤ä¿¡æ¯"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"å¥—é¤åç§°"}),s.jsx("p",{className:"font-medium",children:p.name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"åŒ…å«å•†å“"}),s.jsxs("p",{className:"font-medium",children:[p.productCount," ä»¶"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"å•†å“ç±»åˆ«"}),s.jsxs("p",{className:"font-medium",children:[p.categoryCount," ç±»"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"å¥—é¤å”®ä»·"}),s.jsx("p",{className:"font-medium text-red-600",children:a(p.price)})]})]})]}),s.jsxs("div",{className:"card",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2",children:[s.jsx(n,{className:"h-6 w-6 text-green-600"}),"åˆ©æ¶¦ç®¡ç†"]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"border border-blue-200 rounded-lg p-6 bg-blue-50",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"æ¸ é“åŠè®¾è®¡å¸ˆä»·æ ¼"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"æ¸ é“ä»·æ ¼ (Channel Price)"}),s.jsxs("div",{className:"relative max-w-xs",children:[s.jsx("span",{className:"absolute left-3 top-3 text-gray-500",children:"Â¥"}),s.jsx("input",{type:"number",value:j,onChange:e=>g(parseFloat(e.target.value)||0),className:"input pl-8 w-full",step:"0.01",min:"0"})]}),s.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"ğŸ’¡ è®¾ç½®æ¸ é“åˆä½œä¼™ä¼´çš„é‡‡è´­ä»·æ ¼"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"è®¾è®¡å¸ˆä»·æ ¼ (Designer Price)"}),s.jsxs("div",{className:"relative max-w-xs",children:[s.jsx("span",{className:"absolute left-3 top-3 text-gray-500",children:"Â¥"}),s.jsx("input",{type:"number",value:N,onChange:e=>u(parseFloat(e.target.value)||0),className:"input pl-8 w-full",step:"0.01",min:"0"})]}),s.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"ğŸ’¡ è®¾ç½®è®¾è®¡å¸ˆçš„é‡‡è´­ä»·æ ¼"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"border border-green-200 rounded-lg p-6 bg-green-50",children:[s.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-4",children:"æ¸ é“åˆ©æ¶¦"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"å¥—é¤å”®ä»·"}),s.jsx("span",{className:"font-semibold text-lg",children:a(p.price)})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"æ¸ é“ä»·æ ¼"}),s.jsx("span",{className:"font-semibold text-lg",children:a(j)})]}),s.jsxs("div",{className:"border-t border-green-200 pt-3 flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-semibold text-green-900",children:"åˆ©æ¶¦"}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-bold text-xl text-green-600",children:a(k)}),s.jsxs("div",{className:"text-xs text-green-600",children:["(",P,"%)"]})]})]})]})]}),s.jsxs("div",{className:"border border-purple-200 rounded-lg p-6 bg-purple-50",children:[s.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"è®¾è®¡å¸ˆåˆ©æ¶¦"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"å¥—é¤å”®ä»·"}),s.jsx("span",{className:"font-semibold text-lg",children:a(p.price)})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"è®¾è®¡å¸ˆä»·æ ¼"}),s.jsx("span",{className:"font-semibold text-lg",children:a(N)})]}),s.jsxs("div",{className:"border-t border-purple-200 pt-3 flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-semibold text-purple-900",children:"åˆ©æ¶¦"}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-bold text-xl text-purple-600",children:a(C)}),s.jsxs("div",{className:"text-xs text-purple-600",children:["(",S,"%)"]})]})]})]})]})]}),s.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-amber-900",children:[s.jsx("strong",{children:"ğŸ’¡ å»ºè®®ï¼š"})," æ¸ é“ä»·æ ¼é€šå¸¸è®¾ç½®ä¸ºå”®ä»·çš„ 60-70%ï¼Œè®¾è®¡å¸ˆä»·æ ¼è®¾ç½®ä¸ºå”®ä»·çš„ 50-65%ï¼Œä»¥ä¿è¯åˆç†çš„åˆ©æ¶¦ç©ºé—´ã€‚"]})})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>o("/admin/packages"),className:"btn-secondary",children:"å–æ¶ˆ"}),s.jsxs("button",{onClick:async()=>{if(p){y(!0);try{(await e.put(`/packages/${p._id}`,{channelPrice:j,designerPrice:N})).data.success?(c.success("åˆ©æ¶¦è®¾ç½®å·²ä¿å­˜"),o("/admin/packages")):c.error("ä¿å­˜å¤±è´¥")}catch(s){c.error("ä¿å­˜å¤±è´¥")}finally{y(!1)}}},disabled:v,className:"btn-primary flex items-center gap-2",children:[s.jsx(d,{className:"h-5 w-5"}),v?"ä¿å­˜ä¸­...":"ä¿å­˜åˆ©æ¶¦è®¾ç½®"]})]})]})}export{m as default};
