import{j as e,f as s,m as a}from"./index-DWFic46w.js";import{i as t,u as r,r as l}from"./react-vendor-E1AgTUZ9.js";import{J as n,an as i,f as m,H as d}from"./ui-vendor-CQy3HONI.js";import{m as c}from"./framer-motion-7DcRqacn.js";import{R as x,L as o,C as h,X as y,Y as j,T as u,a as g,b as p}from"./recharts-wIacPPq0.js";function v(){var v,f;const{productId:N}=t(),b=r(),[w,k]=l.useState("month"),[M,C]=l.useState(null),[S,I]=l.useState(!0),K=l.useMemo(()=>M?{views:Math.floor(5e3*Math.random())+1e3,sales:Math.floor(500*Math.random())+50,favorites:Math.floor(300*Math.random())+20}:{views:0,sales:0,favorites:0},[M]),q=l.useMemo(()=>{const e=((null==M?void 0:M.basePrice)||0)*(K.sales||0);return{week:.2*e,month:e,quarter:3.2*e,year:12*e}},[M,K]),A=l.useMemo(()=>"week"===w?[{name:"周一",sales:12,revenue:2400},{name:"周二",sales:19,revenue:2210},{name:"周三",sales:15,revenue:2290},{name:"周四",sales:22,revenue:2e3},{name:"周五",sales:28,revenue:2181},{name:"周六",sales:35,revenue:2500},{name:"周日",sales:31,revenue:2100}]:"month"===w?[{name:"第1周",sales:87,revenue:17400},{name:"第2周",sales:95,revenue:19e3},{name:"第3周",sales:112,revenue:22400},{name:"第4周",sales:128,revenue:25600}]:"quarter"===w?[{name:"1月",sales:234,revenue:46800},{name:"2月",sales:267,revenue:53400},{name:"3月",sales:289,revenue:57800}]:[{name:"1月",sales:234,revenue:46800},{name:"2月",sales:267,revenue:53400},{name:"3月",sales:289,revenue:57800},{name:"4月",sales:312,revenue:62400},{name:"5月",sales:298,revenue:59600},{name:"6月",sales:334,revenue:66800},{name:"7月",sales:356,revenue:71200},{name:"8月",sales:378,revenue:75600},{name:"9月",sales:401,revenue:80200},{name:"10月",sales:423,revenue:84600},{name:"11月",sales:445,revenue:89e3},{name:"12月",sales:467,revenue:93400}],[w]),B=l.useMemo(()=>(null==M?void 0:M.skus)?M.skus.map((e,s)=>({name:e.spec||`规格${s+1}`,sales:Math.floor(200*Math.random())+10,revenue:Math.floor(5e4*Math.random())+5e3})):[],[M]);if(l.useMemo(()=>{(async()=>{if(N)try{const e=await a(N);C(e)}catch(e){}finally{I(!1)}})()},[N]),S)return e.jsx("div",{className:"text-center py-12",children:"加载中..."});if(!M)return e.jsx("div",{className:"text-center py-12",children:"商品不存在"});const F=q[w],L=A.reduce((e,s)=>e+s.sales,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>b("/admin/products"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[e.jsx(n,{className:"h-5 w-5"}),"返回商品列表"]}),e.jsxs("h1",{className:"text-3xl font-bold",children:[M.name," - 数据看板"]})]}),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-6 flex items-center gap-6",children:[(null==(v=M.images)?void 0:v[0])&&e.jsx("img",{src:M.images[0],alt:M.name,className:"w-24 h-24 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:M.name}),e.jsx("p",{className:"text-gray-600 mb-3",children:M.description||"暂无描述"}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"基础价格"}),e.jsx("p",{className:"text-lg font-semibold",children:s(M.basePrice)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"SKU数量"}),e.jsx("p",{className:"text-lg font-semibold",children:(null==(f=M.skus)?void 0:f.length)||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"分类"}),e.jsx("p",{className:"text-lg font-semibold",children:M.category})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"浏览量"}),e.jsx("h3",{className:"text-3xl font-bold",children:K.views.toLocaleString()}),e.jsx("p",{className:"text-xs text-green-600 mt-2",children:"↑ 12.5% vs 上周"})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(i,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"销售量"}),e.jsx("h3",{className:"text-3xl font-bold",children:K.sales}),e.jsx("p",{className:"text-xs text-green-600 mt-2",children:"↑ 8.3% vs 上周"})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(m,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"收藏数"}),e.jsx("h3",{className:"text-3xl font-bold",children:K.favorites}),e.jsx("p",{className:"text-xs text-green-600 mt-2",children:"↑ 5.2% vs 上周"})]}),e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(d,{className:"h-6 w-6 text-red-600"})})]})})]}),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"收益统计"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>k("week"),className:"px-3 py-1 rounded-lg text-sm font-medium transition-all "+("week"===w?"bg-primary-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"周"}),e.jsx("button",{onClick:()=>k("month"),className:"px-3 py-1 rounded-lg text-sm font-medium transition-all "+("month"===w?"bg-primary-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"月"}),e.jsx("button",{onClick:()=>k("quarter"),className:"px-3 py-1 rounded-lg text-sm font-medium transition-all "+("quarter"===w?"bg-primary-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"季"}),e.jsx("button",{onClick:()=>k("year"),className:"px-3 py-1 rounded-lg text-sm font-medium transition-all "+("year"===w?"bg-primary-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"年"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"总销售额"}),e.jsx("h3",{className:"text-2xl font-bold text-blue-900",children:s(F)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"销售件数"}),e.jsx("h3",{className:"text-2xl font-bold text-green-900",children:L})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"平均单价"}),e.jsx("h3",{className:"text-2xl font-bold text-purple-900",children:s(F/(L||1))})]})]})]}),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"销售趋势"}),e.jsx(x,{width:"100%",height:300,children:e.jsxs(o,{data:A,children:[e.jsx(h,{strokeDasharray:"3 3"}),e.jsx(y,{dataKey:"name"}),e.jsx(j,{yAxisId:"left"}),e.jsx(j,{yAxisId:"right",orientation:"right"}),e.jsx(u,{}),e.jsx(g,{}),e.jsx(p,{yAxisId:"left",type:"monotone",dataKey:"sales",stroke:"#3B82F6",strokeWidth:2,name:"销售件数"}),e.jsx(p,{yAxisId:"right",type:"monotone",dataKey:"revenue",stroke:"#10B981",strokeWidth:2,name:"销售额"})]})})]}),B.length>0&&e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"SKU销售排名"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-600",children:"规格"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-600",children:"销售件数"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-600",children:"销售额"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-600",children:"占比"})]})}),e.jsx("tbody",{children:B.map((a,t)=>{const r=B.reduce((e,s)=>e+s.revenue,0),l=(a.revenue/r*100).toFixed(1);return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-sm font-medium",children:a.name}),e.jsx("td",{className:"py-3 px-4 text-sm",children:a.sales}),e.jsx("td",{className:"py-3 px-4 text-sm",children:s(a.revenue)}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${l}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600",children:[l,"%"]})]})})]},t)})})]})})]})]})}export{v as default};
