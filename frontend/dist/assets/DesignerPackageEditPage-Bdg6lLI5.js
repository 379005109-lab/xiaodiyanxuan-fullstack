import{j as e,f as s}from"./index-DWFic46w.js";import{i as a,u as t,r as l}from"./react-vendor-E1AgTUZ9.js";import{u as r,v as c,aa as i}from"./ui-vendor-CQy3HONI.js";import{m as d}from"./framer-motion-7DcRqacn.js";import"./recharts-wIacPPq0.js";function n(){const{id:n}=a(),x=t(),[m,o]=l.useState(null),[h,p]=l.useState(0),[j,g]=l.useState(!0),[b,N]=l.useState(!1);l.useEffect(()=>{u()},[n]);const u=()=>{g(!0);try{if(n){const e=JSON.parse(localStorage.getItem("packages")||"[]").find(e=>e.id===parseInt(n,10));e?(o(e),p(e.price)):(r.error("å¥—é¤ä¸å­˜åœ¨"),x("/admin/packages"))}}catch(e){r.error("åŠ è½½å¥—é¤å¤±è´¥")}finally{g(!1)}};return j?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):m?e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>x("/admin/packages"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(c,{className:"h-6 w-6 text-gray-700"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:m.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:"è®¾è®¡å¸ˆå¥—é¤ä»·æ ¼ç¼–è¾‘"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"å¥—é¤ä¿¡æ¯"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"å¥—é¤åç§°"}),e.jsx("p",{className:"font-medium",children:m.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"åŒ…å«å•†å“"}),e.jsxs("p",{className:"font-medium",children:[m.productCount," ä»¶"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"å•†å“ç±»åˆ«"}),e.jsxs("p",{className:"font-medium",children:[m.categoryCount," ç±»"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"å¥—é¤æ ‡ç­¾"}),e.jsxs("p",{className:"font-medium",children:[m.tags.length," ä¸ª"]})]})]})]}),m.image&&e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"å¥—é¤ä¸»å›¾"}),e.jsx("img",{src:m.image,alt:m.name,className:"w-full max-w-md h-auto rounded-lg object-cover"})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"å¥—é¤ä»·æ ¼"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"å¥—é¤å”®ä»·"}),e.jsxs("div",{className:"relative max-w-xs",children:[e.jsx("span",{className:"absolute left-3 top-3 text-gray-500",children:"Â¥"}),e.jsx("input",{type:"number",value:h,onChange:e=>p(parseFloat(e.target.value)||0),className:"input pl-8 w-full",step:"0.01",min:"0"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"ğŸ’¡ è®¾ç½®å¥—é¤å¯¹å¤–å±•ç¤ºçš„ä»·æ ¼"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"ä»·æ ¼å˜æ›´"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-700",children:"åŸä»·"}),e.jsx("p",{className:"text-lg font-semibold text-blue-900",children:s(m.price)})]}),e.jsx("div",{className:"text-blue-500",children:"â†’"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-700",children:"æ–°ä»·"}),e.jsx("p",{className:"text-lg font-semibold text-blue-900",children:s(h)})]})]})]})]})]}),m.designerPrice&&e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"åˆ©æ¶¦ä¿¡æ¯"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border border-purple-200 rounded-lg p-4 bg-purple-50",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"å¥—é¤å”®ä»·"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 mb-4",children:s(m.price)}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"æ‚¨çš„é‡‡è´­ä»·"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900 mb-4",children:s(m.designerPrice)}),e.jsxs("div",{className:"border-t border-purple-200 pt-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"åˆ©æ¶¦ç©ºé—´"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:s(m.price-m.designerPrice)}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["åˆ©æ¶¦ç‡: ",((m.price-m.designerPrice)/m.price*100).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"border border-blue-200 rounded-lg p-4 bg-blue-50",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"æ¸ é“é‡‡è´­ä»·"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 mb-4",children:m.channelPrice?s(m.channelPrice):"æœªè®¾ç½®"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"æ‚¨çš„é‡‡è´­ä»·"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 mb-4",children:s(m.designerPrice)}),e.jsxs("div",{className:"border-t border-blue-200 pt-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"ä»·æ ¼å·®å¼‚"}),e.jsx("p",{className:"text-2xl font-bold "+(m.designerPrice<(m.channelPrice||0)?"text-green-600":"text-red-600"),children:m.channelPrice?s(Math.abs(m.channelPrice-m.designerPrice)):"-"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:m.channelPrice&&m.designerPrice<m.channelPrice?"âœ“ æ‚¨çš„ä»·æ ¼æ›´ä¼˜æƒ ":m.channelPrice?"âš  æ‚¨çš„ä»·æ ¼è¾ƒé«˜":""})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>x("/admin/packages"),className:"btn-secondary",children:"å–æ¶ˆ"}),e.jsxs("button",{onClick:()=>{if(m){N(!0);try{const e=JSON.parse(localStorage.getItem("packages")||"[]"),s=e.findIndex(e=>e.id===m.id);-1!==s&&(e[s]={...e[s],price:h},localStorage.setItem("packages",JSON.stringify(e)),r.success("å¥—é¤å·²ä¿å­˜"),x("/admin/packages"))}catch(e){r.error("ä¿å­˜å¤±è´¥")}finally{N(!1)}}},disabled:b,className:"btn-primary flex items-center gap-2",children:[e.jsx(i,{className:"h-5 w-5"}),b?"ä¿å­˜ä¸­...":"ä¿å­˜"]})]})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"å¥—é¤ä¸å­˜åœ¨"})})}export{n as default};
