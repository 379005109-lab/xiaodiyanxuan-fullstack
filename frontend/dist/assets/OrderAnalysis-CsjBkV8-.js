import{s as e,j as s,f as a}from"./index-DWFic46w.js";import{r as t}from"./react-vendor-E1AgTUZ9.js";import{m as r}from"./framer-motion-7DcRqacn.js";import{ar as i,Y as l,T as n,ae as c,K as d,al as o,aL as m,aM as x,aN as h,aO as p}from"./ui-vendor-CQy3HONI.js";import"./recharts-wIacPPq0.js";function g(){const[g,u]=t.useState(null),[y,j]=t.useState(!0),[N,v]=t.useState("30");t.useEffect(()=>{f()},[N]);const f=async()=>{j(!0);try{const s=await e.get(`/orders/analysis?days=${N}`);s.data.success&&u(s.data.data)}catch(s){u(b())}finally{j(!1)}},b=()=>({hourlyDistribution:Array.from({length:24},(e,s)=>({hour:s,count:Math.floor(20*Math.random()),revenue:Math.floor(5e4*Math.random())})),weekdayDistribution:["周一","周二","周三","周四","周五","周六","周日"].map(e=>({day:e,count:Math.floor(50*Math.random()),revenue:Math.floor(1e5*Math.random())})),monthlyTrend:["1月","2月","3月","4月","5月","6月"].map(e=>({month:e,count:Math.floor(200*Math.random()),revenue:Math.floor(5e5*Math.random())})),topProducts:[{name:"柯布西耶沙发",count:15,revenue:293700},{name:"地平线沙发",count:12,revenue:215880},{name:"蛋椅",count:10,revenue:89900},{name:"巴塞罗那椅",count:8,revenue:71920},{name:"天鹅椅",count:6,revenue:53940}],categoryDistribution:[{category:"沙发",count:45,percentage:35},{category:"椅子",count:38,percentage:30},{category:"桌子",count:25,percentage:20},{category:"灯具",count:12,percentage:10},{category:"其他",count:6,percentage:5}],customerStats:{totalCustomers:156,repeatCustomers:42,repeatRate:26.9,avgOrdersPerCustomer:1.8},amountDistribution:[{range:"0-5000",count:25,percentage:20},{range:"5000-10000",count:35,percentage:28},{range:"10000-20000",count:30,percentage:24},{range:"20000-50000",count:25,percentage:20},{range:"50000+",count:10,percentage:8}],conversionStats:{cartToOrder:45.2,orderToPaid:78.5,paidToComplete:92.3}});return y?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):g?s.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"订单分析"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"深度分析订单数据，洞察业务趋势"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:N,onChange:e=>v(e.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"7",children:"最近7天"}),s.jsx("option",{value:"30",children:"最近30天"}),s.jsx("option",{value:"90",children:"最近90天"}),s.jsx("option",{value:"365",children:"最近一年"})]}),s.jsxs("button",{onClick:f,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[s.jsx(i,{className:"h-4 w-4"}),"刷新"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card bg-gradient-to-br from-blue-50 to-blue-100",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(l,{className:"h-8 w-8 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"总客户数"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:g.customerStats.totalCustomers})]})]})}),s.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card bg-gradient-to-br from-green-50 to-green-100",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(n,{className:"h-8 w-8 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"复购客户"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:g.customerStats.repeatCustomers})]})]})}),s.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card bg-gradient-to-br from-purple-50 to-purple-100",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(c,{className:"h-8 w-8 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"复购率"}),s.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[g.customerStats.repeatRate,"%"]})]})]})}),s.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card bg-gradient-to-br from-orange-50 to-orange-100",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(d,{className:"h-8 w-8 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"人均订单数"}),s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:g.customerStats.avgOrdersPerCustomer})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[s.jsx(o,{className:"h-5 w-5 text-primary-600"}),"热销商品 TOP5"]}),s.jsx("div",{className:"space-y-3",children:g.topProducts.map((e,t)=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold "+(0===t?"bg-yellow-400 text-yellow-900":1===t?"bg-gray-300 text-gray-700":2===t?"bg-orange-300 text-orange-800":"bg-gray-100 text-gray-600"),children:t+1}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:e.name}),s.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[s.jsxs("span",{children:["销量: ",e.count]}),s.jsxs("span",{children:["收入: ",a(e.revenue)]})]})]})]},t))})]}),s.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"card",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[s.jsx(m,{className:"h-5 w-5 text-primary-600"}),"品类分布"]}),s.jsx("div",{className:"space-y-3",children:g.categoryDistribution.map((e,a)=>{const t=["bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-gray-400"];return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{children:e.category}),s.jsxs("span",{children:[e.percentage,"%"]})]}),s.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full ${t[a%t.length]} transition-all`,style:{width:`${e.percentage}%`}})})]},a)})})]}),s.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"card",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[s.jsx(x,{className:"h-5 w-5 text-primary-600"}),"订单金额分布"]}),s.jsx("div",{className:"space-y-3",children:g.amountDistribution.map((e,a)=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsxs("span",{children:["¥",e.range]}),s.jsxs("span",{children:[e.count," 单 (",e.percentage,"%)"]})]}),s.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-primary-500 transition-all",style:{width:`${e.percentage}%`}})})]},a))})]}),s.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"card",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[s.jsx(h,{className:"h-5 w-5 text-primary-600"}),"转化漏斗"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"bg-blue-100 rounded-lg p-4 text-center",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"加购 → 下单"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[g.conversionStats.cartToOrder,"%"]})]}),s.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 -bottom-2",children:s.jsx(h,{className:"h-4 w-4 text-gray-400"})})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"bg-green-100 rounded-lg p-4 text-center",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"下单 → 支付"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[g.conversionStats.orderToPaid,"%"]})]}),s.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 -bottom-2",children:s.jsx(h,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("div",{children:s.jsxs("div",{className:"bg-purple-100 rounded-lg p-4 text-center",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"支付 → 完成"}),s.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[g.conversionStats.paidToComplete,"%"]})]})})]})]})]}),s.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"card",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[s.jsx(p,{className:"h-5 w-5 text-primary-600"}),"每周订单分布"]}),s.jsx("div",{className:"grid grid-cols-7 gap-2",children:g.weekdayDistribution.map((e,a)=>{const t=Math.max(...g.weekdayDistribution.map(e=>e.count)),r=e.count/t*100;return s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"h-32 flex items-end justify-center mb-2",children:s.jsx("div",{className:"w-full bg-primary-500 rounded-t-lg transition-all hover:bg-primary-600",style:{height:`${r}%`,minHeight:"8px"}})}),s.jsx("p",{className:"text-sm font-medium",children:e.day}),s.jsxs("p",{className:"text-xs text-gray-500",children:[e.count," 单"]})]},a)})})]})]}):null}export{g as default};
