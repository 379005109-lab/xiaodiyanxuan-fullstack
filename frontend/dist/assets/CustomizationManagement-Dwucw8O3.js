import{b as e,p as t,j as s}from"./index-DWFic46w.js";import{r as a}from"./react-vendor-E1AgTUZ9.js";import{u as l}from"./ui-vendor-CQy3HONI.js";import"./recharts-wIacPPq0.js";function r(){const[r,i]=a.useState([]),[c,n]=a.useState(!0),[d,x]=a.useState(null),{token:o}=e();a.useEffect(()=>{m()},[]);const m=async()=>{var e,s;try{if(!o)return void l.error("è¯·å…ˆç™»å½•");const e=await t.get("/api/customization",{headers:{Authorization:`Bearer ${o}`}});i(e.data.data||[])}catch(a){l.error("åŠ è½½å®šåˆ¶éœ€æ±‚å¤±è´¥: "+((null==(s=null==(e=a.response)?void 0:e.data)?void 0:s.message)||a.message))}finally{n(!1)}},h={pending:{label:"å¾…å¤„ç†",color:"bg-yellow-100 text-yellow-800"},contacted:{label:"å·²è”ç³»",color:"bg-blue-100 text-blue-800"},quoted:{label:"å·²æŠ¥ä»·",color:"bg-indigo-100 text-indigo-800"},confirmed:{label:"å·²ç¡®è®¤",color:"bg-purple-100 text-purple-800"},in_production:{label:"ç”Ÿäº§ä¸­",color:"bg-orange-100 text-orange-800"},completed:{label:"å·²å®Œæˆ",color:"bg-green-100 text-green-800"},cancelled:{label:"å·²å–æ¶ˆ",color:"bg-red-100 text-red-800"}};return c?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"å®šåˆ¶åŒ–éœ€æ±‚ç®¡ç†"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"ç®¡ç†å®¢æˆ·æäº¤çš„å®šåˆ¶åŒ–éœ€æ±‚"})]}),0===r.length?s.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:s.jsx("p",{className:"text-gray-500",children:"æš‚æ— å®šåˆ¶éœ€æ±‚"})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"å®¢æˆ·ä¿¡æ¯"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"äº§å“ç±»åž‹"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"å®šåˆ¶éœ€æ±‚"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"çŠ¶æ€"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"æäº¤æ—¶é—´"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"æ“ä½œ"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map(e=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.contactName}),s.jsx("div",{className:"text-sm text-gray-500",children:e.contactPhone}),e.contactEmail&&s.jsx("div",{className:"text-sm text-gray-500",children:e.contactEmail})]}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.productType}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm text-gray-900 max-w-xs",children:[e.dimensions&&s.jsxs("div",{children:["ðŸ“ å°ºå¯¸: ",e.dimensions]}),e.materials&&s.jsxs("div",{children:["ðŸŽ¨ æè´¨: ",e.materials]}),e.colors&&s.jsxs("div",{children:["ðŸŒˆ é¢œè‰²: ",e.colors]}),!e.dimensions&&!e.materials&&!e.colors&&s.jsx("div",{className:"truncate",title:e.customizationDetails,children:e.customizationDetails})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("select",{value:e.status,onChange:s=>(async(e,s)=>{try{if(!o)return void l.error("è¯·å…ˆç™»å½•");await t.put(`/api/customization/${e}`,{status:s},{headers:{Authorization:`Bearer ${o}`}}),l.success("çŠ¶æ€å·²æ›´æ–°"),m()}catch(a){l.error("æ›´æ–°çŠ¶æ€å¤±è´¥")}})(e._id,s.target.value),className:`text-xs px-2 py-1 rounded-full ${h[e.status].color}`,children:[s.jsx("option",{value:"pending",children:"å¾…å¤„ç†"}),s.jsx("option",{value:"contacted",children:"å·²è”ç³»"}),s.jsx("option",{value:"quoted",children:"å·²æŠ¥ä»·"}),s.jsx("option",{value:"confirmed",children:"å·²ç¡®è®¤"}),s.jsx("option",{value:"in_production",children:"ç”Ÿäº§ä¸­"}),s.jsx("option",{value:"completed",children:"å·²å®Œæˆ"}),s.jsx("option",{value:"cancelled",children:"å·²å–æ¶ˆ"})]})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(e.createdAt).toLocaleString("zh-CN")}),s.jsxs("td",{className:"px-6 py-4 text-right text-sm space-x-2",children:[s.jsx("button",{onClick:()=>x(e),className:"text-blue-600 hover:text-blue-800",children:"æŸ¥çœ‹"}),s.jsx("button",{onClick:()=>(async e=>{if(confirm("ç¡®å®šè¦åˆ é™¤è¿™æ¡å®šåˆ¶éœ€æ±‚å—ï¼Ÿ"))try{if(!o)return void l.error("è¯·å…ˆç™»å½•");await t.delete(`/api/customization/${e}`,{headers:{Authorization:`Bearer ${o}`}}),l.success("å·²åˆ é™¤"),m()}catch(s){l.error("åˆ é™¤å¤±è´¥")}})(e._id),className:"text-red-600 hover:text-red-800",children:"åˆ é™¤"})]})]},e._id))})]})}),d&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold",children:"å®šåˆ¶éœ€æ±‚è¯¦æƒ…"}),s.jsx("button",{onClick:()=>x(null),className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"å®¢æˆ·å§“å"}),s.jsx("p",{className:"text-gray-900",children:d.contactName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"è”ç³»ç”µè¯"}),s.jsx("p",{className:"text-gray-900",children:d.contactPhone})]})]}),d.contactEmail&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"é‚®ç®±"}),s.jsx("p",{className:"text-gray-900",children:d.contactEmail})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"äº§å“ç±»åž‹"}),s.jsx("p",{className:"text-gray-900",children:d.productType})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"è¯¦ç»†éœ€æ±‚"}),s.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:d.customizationDetails})]}),d.dimensions&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"å°ºå¯¸è¦æ±‚"}),s.jsx("p",{className:"text-gray-900",children:d.dimensions})]}),d.materials&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"æè´¨è¦æ±‚"}),s.jsx("p",{className:"text-gray-900",children:d.materials})]}),d.colors&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"é¢œè‰²è¦æ±‚"}),s.jsx("p",{className:"text-gray-900",children:d.colors})]}),d.budget&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"é¢„ç®—"}),s.jsxs("p",{className:"text-gray-900",children:["Â¥",d.budget]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"æäº¤æ—¶é—´"}),s.jsx("p",{className:"text-gray-900",children:new Date(d.createdAt).toLocaleString("zh-CN")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"å½“å‰çŠ¶æ€"}),s.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm ${h[d.status].color}`,children:h[d.status].label})]})]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{onClick:()=>x(null),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300",children:"å…³é—­"})})]})})})]})]})}export{r as default};
