import{j as e}from"./index-DWFic46w.js";import{r as s}from"./react-vendor-E1AgTUZ9.js";import{aR as t,ar as a,E as r,a0 as l,x as c,u as n}from"./ui-vendor-CQy3HONI.js";import{m as d}from"./framer-motion-7DcRqacn.js";import"./recharts-wIacPPq0.js";const i=()=>({customer:(()=>{const e={_id:"test-customer-001",username:"丫丫",email:"yaya@test.com",phone:"13875695196",role:"customer",avatar:"/placeholder.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),status:"active",balance:0},s=JSON.parse(localStorage.getItem("test_users")||"[]"),t=s.findIndex(s=>s._id===e._id);return t>=0?s[t]=e:s.push(e),localStorage.setItem("test_users",JSON.stringify(s)),e})(),backendOrder:(()=>{const e={id:"test-order-backend-001",orderNo:`TEST${(new Date).toISOString().slice(0,10).replace(/-/g,"")}001`,title:"丫丫定制",status:"pending",source:"backend",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),totalAmount:5999,items:[{id:"item-1",name:"北欧简约沙发",type:"product",image:"/placeholder.svg",quantity:1,price:3999,selections:{"颜色":"灰色","尺寸":"2.5米"}},{id:"item-2",name:"定制茶几",type:"product",image:"/placeholder.svg",quantity:1,price:2e3,selections:{"材质":"实木"}}],note:"这是一个后台推送的测试订单",address:"浙江省杭州市西湖区",phone:"13875695196",contactName:"丫丫"},s=JSON.parse(localStorage.getItem("customer_orders")||"[]");return s.unshift(e),localStorage.setItem("customer_orders",JSON.stringify(s)),e})(),selfOrder:(()=>{const e={id:"test-order-self-001",orderNo:`SELF${(new Date).toISOString().slice(0,10).replace(/-/g,"")}001`,title:"丫丫自己下单",status:"pending",source:"self",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),totalAmount:8999,items:[{id:"item-3",name:"现代风格床架",type:"product",image:"/placeholder.svg",quantity:1,price:5999,selections:{"颜色":"白色","尺寸":"1.8米"}},{id:"item-4",name:"床头柜",type:"product",image:"/placeholder.svg",quantity:2,price:1500,selections:{"材质":"橡木"}}],note:"这是一个客户自己下单的测试订单",address:"浙江省杭州市西湖区",phone:"13875695196",contactName:"丫丫"},s=JSON.parse(localStorage.getItem("customer_orders")||"[]");return s.unshift(e),localStorage.setItem("customer_orders",JSON.stringify(s)),e})()});function o(){const[o,m]=s.useState(!1),[x,h]=s.useState(null),[g,p]=s.useState([]),[j,N]=s.useState([]);s.useEffect(()=>{b()},[]);const b=()=>{const e=JSON.parse(localStorage.getItem("test_users")||"[]").find(e=>"test-customer-001"===e._id)||null,s=JSON.parse(localStorage.getItem("customer_orders")||"[]").filter(e=>e.id.startsWith("test-order-")),t=JSON.parse(localStorage.getItem("concierge_orders")||"[]");h(e),p(s),N(t),m(!!e)};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"container-custom",children:e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"代客下单测试"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"创建测试客户和订单，验证代客下单流程"})]}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsxs("button",{onClick:()=>{try{i(),b(),n.success("测试数据已初始化！")}catch(e){n.error("初始化失败")}},className:"btn-primary flex items-center gap-2",children:[e.jsx(t,{className:"h-4 w-4"}),"初始化测试数据"]}),e.jsxs("button",{onClick:()=>{b(),n.success("已刷新数据！")},className:"btn-secondary flex items-center gap-2",children:[e.jsx(a,{className:"h-4 w-4"}),"刷新数据"]}),e.jsxs("button",{onClick:()=>{if(confirm("确定要清理所有测试数据吗？"))try{(()=>{localStorage.removeItem("test_users");const e=JSON.parse(localStorage.getItem("customer_orders")||"[]").filter(e=>!e.id.startsWith("test-order-"));localStorage.setItem("customer_orders",JSON.stringify(e))})(),b(),n.success("测试数据已清理！")}catch(e){n.error("清理失败")}},className:"px-4 py-2 rounded-lg bg-red-50 text-red-600 hover:bg-red-100 font-semibold flex items-center gap-2 transition-colors",children:[e.jsx(r,{className:"h-4 w-4"}),"清理测试数据"]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"测试客户信息"}),x?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(l,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:"客户已创建"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"用户名"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:x.username})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"电话"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:x.phone})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"邮箱"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:x.email})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"角色"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:x.role})]})]})]}):e.jsxs("div",{className:"flex items-center gap-2 text-amber-600",children:[e.jsx(c,{className:"h-5 w-5"}),e.jsx("span",{children:"请先初始化测试数据"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4",children:["测试订单 (",g.length,")"]}),g.length>0?e.jsx("div",{className:"space-y-3",children:g.map(s=>e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.title}),e.jsx("p",{className:"text-xs text-gray-600",children:s.orderNo})]}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold "+("backend"===s.source?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"),children:"backend"===s.source?"后台推送":"客户自己下单"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["商品数: ",s.items.length," | 总价: ¥",s.totalAmount]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["创建时间: ",new Date(s.createdAt).toLocaleString()]})]},s.id))}):e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(c,{className:"h-5 w-5"}),e.jsx("span",{children:"暂无测试订单"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4",children:["代客下单推送记录 (",j.length,")"]}),j.length>0?e.jsx("div",{className:"space-y-3",children:j.map((s,t)=>e.jsxs("div",{className:"p-4 border border-green-200 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:["订单 #",t+1]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["客户: ",s.customerName]})]}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700",children:"已推送"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["商品数: ",s.items.length," | 总价: ¥",s.totalAmount]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["推送时间: ",new Date(s.createdAt).toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["客户电话: ",s.customerPhone]})]},t))}):e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(c,{className:"h-5 w-5"}),e.jsx("span",{children:"暂无推送记录"})]})]}),e.jsxs("div",{className:"card bg-blue-50 border-l-4 border-blue-500",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-900",children:"测试流程"}),e.jsxs("ol",{className:"space-y-3 text-blue-900",children:[e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"font-bold flex-shrink-0",children:"1."}),e.jsx("span",{children:'点击"初始化测试数据"按钮，创建测试客户（丫丫）和测试订单'})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"font-bold flex-shrink-0",children:"2."}),e.jsx("span",{children:'进入前端"我的订单"页面，查看测试订单'})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"font-bold flex-shrink-0",children:"3."}),e.jsx("span",{children:'点击订单的"代客下单"按钮，进入代客下单模式'})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"font-bold flex-shrink-0",children:"4."}),e.jsx("span",{children:"在购物车页面可以编辑商品，然后输入客户电话号码（13875695196）"})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"font-bold flex-shrink-0",children:"5."}),e.jsx("span",{children:'点击"提交代客下单"按钮，订单会被推送'})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"font-bold flex-shrink-0",children:"6."}),e.jsx("span",{children:'推送的订单会显示在"代客下单推送记录"中'})]})]})]}),e.jsxs("div",{className:"card bg-amber-50 border-l-4 border-amber-500",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-amber-900",children:"后台接收点"}),e.jsxs("div",{className:"space-y-3 text-amber-900",children:[e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-amber-200",children:[e.jsx("p",{className:"font-semibold mb-1",children:'✅ 前端"我的订单"页面'}),e.jsx("p",{className:"text-sm",children:"显示所有订单（包括后台推送和客户自己下单的订单）"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-amber-200",children:[e.jsx("p",{className:"font-semibold mb-1",children:"✅ 前端Header订单下拉菜单"}),e.jsx("p",{className:"text-sm",children:"显示最近5个订单，可快速发起代客下单"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-amber-200",children:[e.jsx("p",{className:"font-semibold mb-1",children:'✅ 设计师后台"我的订单"'}),e.jsx("p",{className:"text-sm",children:"设计师可以查看并发起代客下单"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-amber-200",children:[e.jsx("p",{className:"font-semibold mb-1",children:"✅ localStorage: concierge_orders"}),e.jsx("p",{className:"text-sm",children:"存储所有推送的代客下单记录"})]})]})]})]})})})}export{o as default};
