import{j as s}from"./index-DWFic46w.js";import{r as e}from"./react-vendor-E1AgTUZ9.js";import{ar as a,P as t,au as l,w as r,T as c}from"./ui-vendor-CQy3HONI.js";import"./recharts-wIacPPq0.js";const d=()=>{const[d,i]=e.useState([]),[n,x]=e.useState(!1);e.useEffect(()=>{o()},[]);const o=async()=>{x(!0);try{const s=localStorage.getItem("token"),e=await fetch("/api/bargains/products",{headers:{Authorization:`Bearer ${s}`}}),a=await e.json();a.success&&i(a.data||[])}catch(s){}finally{x(!1)}},m={totalProducts:d.length,activeProducts:d.filter(s=>"active"===s.status).length,totalBargains:d.reduce((s,e)=>s+(e.totalBargains||0),0),successBargains:d.reduce((s,e)=>s+(e.successBargains||0),0)},h=[...d].sort((s,e)=>(e.totalBargains||0)-(s.totalBargains||0)).slice(0,5);return s.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[s.jsx("h1",{className:"text-3xl font-bold mb-6",children:"砍价裂变数据看板"}),s.jsx("div",{className:"flex justify-end mb-4",children:s.jsxs("button",{onClick:o,disabled:n,className:"btn btn-secondary flex items-center gap-2",children:[s.jsx(a,{size:16,className:n?"animate-spin":""}),"刷新数据"]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md flex items-center gap-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:s.jsx(t,{className:"text-blue-500"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500 text-sm",children:"砍价商品数"}),s.jsx("p",{className:"text-2xl font-bold",children:m.totalProducts})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md flex items-center gap-4",children:[s.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:s.jsx(l,{className:"text-green-500"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500 text-sm",children:"上架中"}),s.jsx("p",{className:"text-2xl font-bold",children:m.activeProducts})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md flex items-center gap-4",children:[s.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:s.jsx(r,{className:"text-purple-500"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500 text-sm",children:"总发起砍价"}),s.jsx("p",{className:"text-2xl font-bold",children:m.totalBargains})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md flex items-center gap-4",children:[s.jsx("div",{className:"bg-orange-100 p-3 rounded-full",children:s.jsx(c,{className:"text-orange-500"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500 text-sm",children:"砍价成功"}),s.jsx("p",{className:"text-2xl font-bold",children:m.successBargains})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"热门砍价商品"}),0===h.length?s.jsx("p",{className:"text-gray-500 text-center py-8",children:"暂无砍价商品数据"}):s.jsx("div",{className:"space-y-4",children:h.map((e,a)=>s.jsxs("div",{className:"flex items-center p-4 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center font-bold mr-4",children:a+1}),s.jsxs("div",{className:"flex-grow",children:[s.jsx("p",{className:"font-semibold",children:e.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["¥",e.originalPrice," → ¥",e.targetPrice]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-bold text-lg text-blue-600",children:e.totalBargains||0}),s.jsx("p",{className:"text-xs text-gray-400",children:"发起次数"})]}),s.jsxs("div",{className:"text-right ml-6",children:[s.jsx("p",{className:"font-bold text-lg text-green-600",children:e.successBargains||0}),s.jsx("p",{className:"text-xs text-gray-400",children:"成功次数"})]})]},e._id))})]})]})};export{d as default};
