<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ¸…ç©ºè´­ç‰©è½¦ - æè´¨åŠ ä»·ä¿®å¤å·¥å…·</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .container {
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      padding: 40px;
      max-width: 800px;
      width: 100%;
    }
    h1 {
      color: #2d3748;
      font-size: 32px;
      margin-bottom: 10px;
      text-align: center;
    }
    .subtitle {
      color: #718096;
      text-align: center;
      margin-bottom: 30px;
      font-size: 16px;
    }
    .warning {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 15px;
      margin-bottom: 30px;
      border-radius: 8px;
    }
    .warning-title {
      font-weight: bold;
      color: #856404;
      margin-bottom: 8px;
    }
    .warning-text {
      color: #856404;
      line-height: 1.6;
    }
    .info {
      background: #d1ecf1;
      border-left: 4px solid #17a2b8;
      padding: 15px;
      margin-bottom: 30px;
      border-radius: 8px;
    }
    .info-title {
      font-weight: bold;
      color: #0c5460;
      margin-bottom: 8px;
    }
    .info-text {
      color: #0c5460;
      line-height: 1.6;
    }
    .info-text code {
      background: rgba(0,0,0,0.1);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
    }
    .button-group {
      display: flex;
      gap: 15px;
      margin-bottom: 30px;
    }
    button {
      flex: 1;
      padding: 15px 30px;
      font-size: 16px;
      font-weight: 600;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .btn-danger {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
    }
    .btn-danger:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(245,87,108,0.3);
    }
    .btn-success {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      color: white;
    }
    .btn-success:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(79,172,254,0.3);
    }
    .data-display {
      background: #f7fafc;
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
    }
    .data-title {
      font-weight: bold;
      color: #2d3748;
      margin-bottom: 10px;
      font-size: 18px;
    }
    pre {
      background: #2d3748;
      color: #48bb78;
      padding: 15px;
      border-radius: 8px;
      overflow-x: auto;
      font-size: 13px;
      line-height: 1.5;
      max-height: 400px;
      overflow-y: auto;
    }
    .status {
      text-align: center;
      padding: 15px;
      border-radius: 12px;
      margin-top: 20px;
      font-weight: 600;
    }
    .status-success {
      background: #c6f6d5;
      color: #22543d;
    }
    .status-error {
      background: #fed7d7;
      color: #742a2a;
    }
    .steps {
      background: #edf2f7;
      border-radius: 12px;
      padding: 20px;
      margin-top: 30px;
    }
    .steps-title {
      font-weight: bold;
      color: #2d3748;
      margin-bottom: 15px;
      font-size: 18px;
    }
    .step {
      margin-bottom: 12px;
      padding-left: 25px;
      position: relative;
      color: #4a5568;
      line-height: 1.6;
    }
    .step::before {
      content: "âœ“";
      position: absolute;
      left: 0;
      color: #48bb78;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ›’ è´­ç‰©è½¦æ•°æ®æ¸…é™¤å·¥å…·</h1>
    <p class="subtitle">ä¿®å¤æè´¨åŠ ä»·æ˜¾ç¤ºé—®é¢˜</p>

    <div class="warning">
      <div class="warning-title">âš ï¸ ä¸ºä»€ä¹ˆéœ€è¦æ¸…ç©ºè´­ç‰©è½¦ï¼Ÿ</div>
      <div class="warning-text">
        è´­ç‰©è½¦ä¸­çš„æ—§æ•°æ®ä½¿ç”¨äº†æ—§ç‰ˆæœ¬çš„æè´¨åŠ ä»·é€»è¾‘ã€‚æ–°ç‰ˆæœ¬æ”¹è¿›äº†åŠ ä»·è®¡ç®—æ–¹å¼ï¼Œä½¿ç”¨ç±»åˆ«åŒ¹é…æ¥æ­£ç¡®æ˜¾ç¤º"å…¨é’çš®-æ©˜è‰²"ã€"å…¨é’çš®-ç™½è‰²"ç­‰æè´¨çš„åŠ ä»·ä¿¡æ¯ã€‚
æ¸…ç©ºè´­ç‰©è½¦åé‡æ–°æ·»åŠ å•†å“ï¼Œæ‰èƒ½ä½¿ç”¨æ–°çš„åŠ ä»·é€»è¾‘ã€‚
      </div>
    </div>

    <div class="info">
      <div class="info-title">ğŸ“ æ–°é€»è¾‘è¯´æ˜</div>
      <div class="info-text">
        â€¢ SKUè®¾ç½®ï¼š<code>{ "å…¨é’çš®": 1000 }</code><br>
        â€¢ ç”¨æˆ·é€‰æ‹©ï¼š<code>"å…¨é’çš®-æ©˜è‰²"</code><br>
        â€¢ ç³»ç»Ÿæå–ç±»åˆ«ï¼š<code>"å…¨é’çš®"</code><br>
        â€¢ æ‰¾åˆ°åŠ ä»·ï¼š<code>1000å…ƒ</code><br>
        â€¢ ä¿å­˜æ˜ å°„ï¼š<code>{ "å…¨é’çš®-æ©˜è‰²": 1000 }</code><br>
        â€¢ æ˜¾ç¤ºï¼š<code>é¢æ–™: å…¨é’çš®-æ©˜è‰² +Â¥1000</code>
      </div>
    </div>

    <div class="button-group">
      <button class="btn-danger" onclick="clearCart()">æ¸…ç©ºè´­ç‰©è½¦</button>
      <button class="btn-success" onclick="viewCart()">æŸ¥çœ‹è´­ç‰©è½¦æ•°æ®</button>
    </div>

    <div id="dataDisplay" class="data-display" style="display:none;">
      <div class="data-title">å½“å‰è´­ç‰©è½¦æ•°æ®ï¼š</div>
      <pre id="cartData"></pre>
    </div>

    <div id="status"></div>

    <div class="steps">
      <div class="steps-title">ğŸ“‹ ä¿®å¤æ­¥éª¤ï¼š</div>
      <div class="step">ç‚¹å‡»"æ¸…ç©ºè´­ç‰©è½¦"æŒ‰é’®</div>
      <div class="step">å›åˆ°å•†å“è¯¦æƒ…é¡µ</div>
      <div class="step">é€‰æ‹©æè´¨ï¼ˆä¾‹å¦‚ï¼š"å…¨é’çš®-æ©˜è‰²"ï¼‰</div>
      <div class="step">åŠ å…¥è´­ç‰©è½¦</div>
      <div class="step">æŸ¥çœ‹è´­ç‰©è½¦ï¼Œåº”è¯¥èƒ½çœ‹åˆ°ï¼š<code>é¢æ–™: å…¨é’çš®-æ©˜è‰² +Â¥1000</code></div>
      <div class="step">è¿›å…¥ç»“ç®—é¡µé¢ï¼Œæ£€æŸ¥"å•†å“æ¸…å•"å’Œ"è®¢å•æ‘˜è¦"</div>
      <div class="step">æäº¤è®¢å•åï¼Œåœ¨"æˆ‘çš„è®¢å•"ä¸­ä¹Ÿåº”è¯¥èƒ½çœ‹åˆ°æè´¨åŠ ä»·</div>
    </div>
  </div>

  <script>
    function clearCart() {
      try {
        localStorage.removeItem('cart-storage')
        
        const status = document.getElementById('status')
        status.className = 'status status-success'
        status.textContent = 'âœ… è´­ç‰©è½¦å·²æ¸…ç©ºï¼ç°åœ¨å¯ä»¥é‡æ–°æ·»åŠ å•†å“äº†ã€‚'
        status.style.display = 'block'
        
        // éšè—æ•°æ®æ˜¾ç¤º
        document.getElementById('dataDisplay').style.display = 'none'
        
        setTimeout(() => {
          status.style.display = 'none'
        }, 5000)
      } catch (error) {
        const status = document.getElementById('status')
        status.className = 'status status-error'
        status.textContent = 'âŒ æ¸…ç©ºå¤±è´¥ï¼š' + error.message
        status.style.display = 'block'
      }
    }

    function viewCart() {
      try {
        const cartData = localStorage.getItem('cart-storage')
        const dataDisplay = document.getElementById('dataDisplay')
        const cartDataPre = document.getElementById('cartData')
        
        if (!cartData) {
          cartDataPre.textContent = 'è´­ç‰©è½¦ä¸ºç©º'
        } else {
          const parsed = JSON.parse(cartData)
          cartDataPre.textContent = JSON.stringify(parsed, null, 2)
          
          // æ£€æŸ¥æè´¨åŠ ä»·æ•°æ®
          const items = parsed.state?.items || []
          if (items.length > 0) {
            const firstItem = items[0]
            console.log('ç¬¬ä¸€ä¸ªå•†å“çš„æè´¨:', firstItem.selectedMaterials)
            console.log('ç¬¬ä¸€ä¸ªå•†å“çš„åŠ ä»·æ˜ å°„:', firstItem.materialUpgradePrices)
          }
        }
        
        dataDisplay.style.display = 'block'
        
        const status = document.getElementById('status')
        status.className = 'status status-success'
        status.textContent = 'âœ… æ•°æ®å·²æ˜¾ç¤ºï¼Œè¯·æ£€æŸ¥Consoleäº†è§£æ›´å¤šè¯¦æƒ…ã€‚'
        status.style.display = 'block'
        
        setTimeout(() => {
          status.style.display = 'none'
        }, 3000)
      } catch (error) {
        const status = document.getElementById('status')
        status.className = 'status status-error'
        status.textContent = 'âŒ è¯»å–å¤±è´¥ï¼š' + error.message
        status.style.display = 'block'
      }
    }

    // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥è´­ç‰©è½¦
    window.addEventListener('load', () => {
      const cartData = localStorage.getItem('cart-storage')
      if (cartData) {
        const parsed = JSON.parse(cartData)
        const itemCount = parsed.state?.items?.length || 0
        if (itemCount > 0) {
          const status = document.getElementById('status')
          status.className = 'status status-error'
          status.textContent = `âš ï¸ è´­ç‰©è½¦ä¸­æœ‰ ${itemCount} ä»¶å•†å“ä½¿ç”¨æ—§æ•°æ®æ ¼å¼ï¼Œå»ºè®®æ¸…ç©ºåé‡æ–°æ·»åŠ ã€‚`
          status.style.display = 'block'
        }
      }
    })
  </script>
</body>
</html>
