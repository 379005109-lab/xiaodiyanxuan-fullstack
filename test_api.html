<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xiaodiyanxuan-api æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        .endpoint {
            margin: 20px 0;
            padding: 15px;
            background-color: #f9f9f9;
            border-left: 4px solid #007bff;
            border-radius: 4px;
        }
        .endpoint h3 {
            margin: 0 0 10px 0;
            color: #007bff;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .response {
            margin-top: 10px;
            padding: 10px;
            background-color: #e8f4f8;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 300px;
            overflow-y: auto;
        }
        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
        .status.success {
            background-color: #28a745;
            color: white;
        }
        .status.error {
            background-color: #dc3545;
            color: white;
        }
        .status.loading {
            background-color: #ffc107;
            color: black;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ xiaodiyanxuan-api æµ‹è¯•å·¥å…·</h1>
        <p>API åœ°å€: <strong>https://pkochbpmcgaa.sealoshzh.site/api/</strong></p>

        <div class="endpoint">
            <h3>ä¸»é¡µ <span class="status loading" id="status-home">å¾…æµ‹è¯•</span></h3>
            <button onclick="testEndpoint('/api/', 'home')">æµ‹è¯•</button>
            <div class="response" id="response-home"></div>
        </div>

        <div class="endpoint">
            <h3>å¥åº·æ£€æŸ¥ <span class="status loading" id="status-health">å¾…æµ‹è¯•</span></h3>
            <button onclick="testEndpoint('/api/health', 'health')">æµ‹è¯•</button>
            <div class="response" id="response-health"></div>
        </div>

        <div class="endpoint">
            <h3>ç”¨æˆ·åˆ—è¡¨ <span class="status loading" id="status-users">å¾…æµ‹è¯•</span></h3>
            <button onclick="testEndpoint('/api/users', 'users')">æµ‹è¯•</button>
            <div class="response" id="response-users"></div>
        </div>

        <div class="endpoint">
            <h3>äº§å“åˆ—è¡¨ <span class="status loading" id="status-products">å¾…æµ‹è¯•</span></h3>
            <button onclick="testEndpoint('/api/products', 'products')">æµ‹è¯•</button>
            <div class="response" id="response-products"></div>
        </div>

        <div class="endpoint">
            <h3>è®¢å•åˆ—è¡¨ <span class="status loading" id="status-orders">å¾…æµ‹è¯•</span></h3>
            <button onclick="testEndpoint('/api/orders', 'orders')">æµ‹è¯•</button>
            <div class="response" id="response-orders"></div>
        </div>

        <div class="endpoint">
            <h3>å…¨éƒ¨æµ‹è¯•</h3>
            <button onclick="testAll()">è¿è¡Œå…¨éƒ¨æµ‹è¯•</button>
        </div>
    </div>

    <script>
        const baseUrl = 'https://pkochbpmcgaa.sealoshzh.site';

        async function testEndpoint(path, id) {
            const statusEl = document.getElementById(`status-${id}`);
            const responseEl = document.getElementById(`response-${id}`);
            
            statusEl.textContent = 'æµ‹è¯•ä¸­...';
            statusEl.className = 'status loading';
            responseEl.textContent = 'åŠ è½½ä¸­...';

            try {
                const response = await fetch(baseUrl + path);
                const data = await response.json();
                
                statusEl.textContent = `âœ… æˆåŠŸ (${response.status})`;
                statusEl.className = 'status success';
                responseEl.textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                statusEl.textContent = `âŒ å¤±è´¥`;
                statusEl.className = 'status error';
                responseEl.textContent = `é”™è¯¯: ${error.message}`;
            }
        }

        async function testAll() {
            const endpoints = [
                { path: '/api/', id: 'home' },
                { path: '/api/health', id: 'health' },
                { path: '/api/users', id: 'users' },
                { path: '/api/products', id: 'products' },
                { path: '/api/orders', id: 'orders' }
            ];

            for (const endpoint of endpoints) {
                await testEndpoint(endpoint.path, endpoint.id);
                await new Promise(resolve => setTimeout(resolve, 500));
            }
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•
        window.addEventListener('load', () => {
            console.log('é¡µé¢å·²åŠ è½½ï¼Œå‡†å¤‡è‡ªåŠ¨æµ‹è¯•...');
            setTimeout(testAll, 500);
        });
    </script>
</body>
</html>
