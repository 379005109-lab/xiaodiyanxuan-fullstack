# 后端开发需求清单

## 📋 概述

这是小程序前端对接后端 API 的需求清单。后端需要实现以下接口，接口规范详见 `API接口对接文档.md`。

## 🎯 核心功能模块

### 1. 用户认证模块
- [ ] 微信登录接口 `POST /api/auth/wxlogin`
- [ ] 获取用户信息接口 `GET /api/user/info`

### 2. 首页模块
- [ ] 获取首页数据接口 `GET /api/home`
  - 全屏大图
  - 新品推进图
  - 轮播图
  - 风格列表
  - 本周热门商品

### 3. 商品模块
- [ ] 获取商品列表接口 `GET /api/goods/list`
  - 支持分类筛选
  - 支持风格筛选
  - 支持关键词搜索
  - 支持排序（综合、销量、价格）
  - 支持分页
- [ ] 获取商品详情接口 `GET /api/goods/:id`
  - 包含商品基本信息
  - 包含规格配置（尺寸、材质、填充物、框架、脚部等）
  - 每个规格都有额外加价信息
- [ ] 搜索商品接口 `GET /api/goods/search`

### 4. 分类和风格模块
- [ ] 获取分类列表接口 `GET /api/categories`
- [ ] 获取风格列表接口 `GET /api/styles`

### 5. 收藏模块
- [ ] 获取收藏列表接口 `GET /api/favorites`
- [ ] 添加收藏接口 `POST /api/favorites`
- [ ] 取消收藏接口 `DELETE /api/favorites/:goodsId`

### 6. 购物车模块
- [ ] 获取购物车接口 `GET /api/cart`
- [ ] 添加到购物车接口 `POST /api/cart`
  - 需要保存商品规格信息
- [ ] 更新购物车商品数量接口 `PUT /api/cart/:cartId`
- [ ] 删除购物车商品接口 `DELETE /api/cart/:cartId`

### 7. 订单模块
- [ ] 创建订单接口 `POST /api/orders`
  - 支持普通订单和套餐订单
  - 需要保存商品列表和规格信息
  - 需要保存收货信息
- [ ] 获取订单列表接口 `GET /api/orders`
  - 支持按状态筛选
  - 支持分页
- [ ] 获取订单详情接口 `GET /api/orders/:orderId`
- [ ] 取消订单接口 `POST /api/orders/:orderId/cancel`
- [ ] 确认收货接口 `POST /api/orders/:orderId/confirm`

### 8. 砍价模块（可选）
- [ ] 获取砍价商品列表接口 `GET /api/bargain/goods`
- [ ] 发起砍价接口 `POST /api/bargain/start`
- [ ] 获取我的砍价列表接口 `GET /api/bargain/my`
- [ ] 帮好友砍价接口 `POST /api/bargain/:bargainId/help`

### 9. 地址模块
- [ ] 获取地址列表接口 `GET /api/addresses`
- [ ] 添加地址接口 `POST /api/addresses`
- [ ] 更新地址接口 `PUT /api/addresses/:addressId`
- [ ] 删除地址接口 `DELETE /api/addresses/:addressId`

### 10. 优惠券模块（可选）
- [ ] 获取优惠券列表接口 `GET /api/coupons`

## 📊 数据结构要求

### 商品数据结构
商品需要支持复杂的规格配置：
- **尺寸（sizes）**：不同尺寸有不同的加价
- **材质组（materialsGroups）**：每个材质组包含多个颜色选项
- **填充物（fills）**：不同填充物有不同加价
- **框架（frames）**：不同框架有不同加价
- **脚部（legs）**：不同脚部有不同加价

每个规格选项都需要：
- 名称
- 额外加价（extra）
- 是否为高级选项（better）
- 图片

### 订单数据结构
订单需要保存：
- 订单类型（普通订单/套餐订单）
- 商品列表（包含每个商品的规格信息）
- 收货信息
- 订单状态流转

## 🔐 认证要求

- 所有需要用户信息的接口都需要 Token 认证
- Token 通过请求头传递：`Authorization: Bearer {token}`
- Token 在微信登录时获取

## 📝 响应格式要求

所有接口统一返回格式：
```json
{
  "code": 0,        // 0 或 200 表示成功
  "message": "success",
  "data": {
    // 实际数据
  }
}
```

## 🚀 优先级建议

### 第一阶段（核心功能）
1. 用户认证
2. 商品列表和详情
3. 订单创建和查询
4. 收藏功能

### 第二阶段（完善功能）
1. 购物车
2. 地址管理
3. 订单操作（取消、确认收货）

### 第三阶段（扩展功能）
1. 砍价功能
2. 优惠券功能

## ⚠️ 注意事项

1. **HTTPS 要求**：小程序必须使用 HTTPS，需要配置 SSL 证书
2. **域名备案**：小程序使用的域名必须已备案
3. **跨域问题**：小程序不需要处理 CORS，但需要确保接口正常响应
4. **数据格式**：严格按照接口文档的数据格式返回
5. **错误处理**：统一错误码和错误信息格式

## 📞 对接沟通

- 接口文档：`API接口对接文档.md`
- 前端代码：已实现 API 调用，等待后端接口
- 测试地址：可在微信开发者工具中测试

如有问题，请参考接口文档或联系前端开发人员。

