<!-- ZenLife 2.0 砍价专区 - 玻璃拟态顶部 -->
<view class="bargain-header-wrap">
	<view class="header-title">砍价专区</view>
	<view class="my-bargain-btn" bindtap="goMyBargain">我的砍价</view>
</view>

<scroll-view class="scrollarea" scroll-y enhanced show-scrollbar="{{false}}">
	<view class="page">
		<!-- 筛选弹窗 -->
		<view class="filter-popup" wx:if="{{showFilterPopup}}" bindtap="onCloseFilterPopup">
			<view class="filter-popup-content" catchtap="">
				<view class="filter-popup-title">{{activeFilter === 'style' ? '选择风格' : '选择品类'}}</view>
				<view class="filter-options">
					<block wx:if="{{activeFilter === 'style'}}">
						<view class="filter-option {{selectedStyle === item ? 'active' : ''}}" 
							wx:for="{{styleOptions}}" wx:key="*this"
							data-type="style" data-value="{{item}}" bindtap="onSelectFilterOption">
							{{item}}
						</view>
					</block>
					<block wx:if="{{activeFilter === 'category'}}">
						<view class="filter-option {{selectedCategory === item ? 'active' : ''}}" 
							wx:for="{{categoryOptions}}" wx:key="*this"
							data-type="category" data-value="{{item}}" bindtap="onSelectFilterOption">
							{{item}}
						</view>
					</block>
				</view>
			</view>
		</view>

		<!-- ZenLife 2.0 砍价商品列表 - BargainRowItem -->
		<view class="bargain-list">
			<view class="bargain-card" wx:for="{{goodsList}}" wx:key="id" data-id="{{item.id}}" bindtap="onViewDetail">
				<!-- 左侧图片区 - 带助力标签 -->
				<view class="bargain-image">
					<image src="{{item.cover}}" mode="aspectFill"></image>
					<view class="helper-tag">
						<view class="helper-dot"></view>
						<text>{{item.cutCount || 0}}人助力</text>
					</view>
				</view>
				<!-- 右侧信息区 -->
				<view class="bargain-info">
					<view class="bargain-top">
						<view class="bargain-name">{{item.name}}</view>
						<view class="bargain-desc">{{item.subtitle || item.description || '精选优质材料，匠心工艺制作'}}</view>
					</view>
					<view class="bargain-bottom">
						<view class="bargain-prices">
							<text class="origin-price">¥{{item.origin}}</text>
							<text class="current-price">¥ {{item.price}}</text>
						</view>
						<view class="cut-btn" data-id="{{item.id}}" catchtap="onStartBargain">砍一刀</view>
					</view>
				</view>
			</view>
		</view>

		<view class="my-bargain" wx:if="{{myBargains.length > 0}}">
			<view class="section-title-new">我的砍价</view>
			<block wx:for="{{myBargains}}" wx:key="id">
				<view class="my-bargain-card" data-id="{{item.id}}" bindtap="onViewMyBargain">
					<view class="my-bargain-row">
						<image class="my-bargain-img" src="{{item.cover}}" mode="aspectFill"></image>
						<view class="my-bargain-info">
							<view class="my-bargain-header">
								<text class="my-bargain-name">{{item.name}}</text>
								<text class="my-bargain-status">进行中</text>
							</view>
							<view class="my-bargain-prices">
								<text class="my-bargain-target">目标价 ¥{{item.price}}</text>
								<text class="my-bargain-origin">原价 ¥{{item.origin}}</text>
							</view>
							<view class="my-bargain-progress-wrap">
								<view class="my-bargain-progress-bar">
									<view class="my-bargain-progress-fill" style="width: {{Math.min(100, Math.round(item.progress * 100))}}%;"></view>
								</view>
								<text class="my-bargain-remain">还差 ¥{{item.remain}}</text>
							</view>
						</view>
					</view>
					<view class="my-bargain-btns">
						<button class="my-bargain-btn invite" open-type="share" data-id="{{item.id}}">邀请好友助力</button>
						<button class="my-bargain-btn cancel" bindtap="onCancelMyBargain" data-id="{{item.id}}" catchtap="">取消</button>
					</view>
				</view>
			</block>
		</view>

		<view class="rules">
			<view class="rule-header">规则说明</view>
			<view class="rule-body">
				<text>每人每日可砍 3 次；砍价有效期 24 小时；满足条件可提现。</text>
			</view>
		</view>
	</view>
</scroll-view>


