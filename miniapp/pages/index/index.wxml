<navigation-bar title="å°è¿ªä¸¥é€‰" back="{{false}}" color="black" background="#FFF"></navigation-bar>
<scroll-view class="page-scroll" scroll-y enhanced show-scrollbar="{{false}}" bounces="{{true}}" bindscrolltolower="onReachBottom">
<view class="page">

	<!-- ========== Hero Banner è½®æ’­ ========== -->
	<view class="hero-section">
		<swiper class="hero-swiper" indicator-dots="{{false}}" autoplay="{{autoPlay}}" interval="5000" duration="700" circular current="{{currentBanner}}" bindchange="onBannerChange">
			<block wx:for="{{banners}}" wx:key="id">
				<swiper-item>
					<view class="hero-slide" bindtap="onBannerTap" data-index="{{index}}" data-item="{{item}}">
						<image class="hero-img" src="{{item.image || item.poster}}" mode="aspectFill"></image>
						<view class="hero-gradient"></view>
						<view class="hero-content">
							<view class="hero-title">{{item.title}}</view>
							<view class="hero-subtitle">{{item.subtitle}}</view>
							<view class="hero-btn">
								<text>äº†è§£æ›´å¤š</text>
								<text class="hero-btn-arrow ri ri-arrow-right-line"></text>
							</view>
						</view>
					</view>
				</swiper-item>
			</block>
		</swiper>
		<!-- æŒ‡ç¤ºå™¨ -->
		<view class="hero-indicators">
			<block wx:for="{{banners}}" wx:key="id">
				<view class="hero-dot {{currentBanner === index ? 'active' : ''}}" bindtap="goToSlide" data-index="{{index}}"></view>
			</block>
		</view>
	</view>

	<!-- ========== ç ä»·ä¸“åŒº ========== -->
	<view class="section" wx:if="{{bargainProducts.length > 0}}">
		<view class="section-header">
			<view class="section-header-left">
				<view class="section-title">ç ä»·ä¸“åŒº</view>
				<view class="section-desc">é‚€è¯·å¥½å‹å¸®ç ï¼Œè¶…ä½ä»·å¸¦å›å®¶</view>
			</view>
			<view class="section-more" bindtap="goMoreBargain">
				<text>å…¨éƒ¨</text>
				<text class="more-arrow ri ri-arrow-right-s-line"></text>
			</view>
		</view>
		<scroll-view class="bargain-scroll" scroll-x enhanced show-scrollbar="{{false}}">
			<view class="bargain-list">
				<block wx:for="{{bargainProducts}}" wx:key="id">
					<view class="bargain-card" bindtap="goBargainDetail" data-id="{{item.id}}">
						<view class="bargain-img-wrap">
							<image class="bargain-img" src="{{item.image}}" mode="aspectFill"></image>
							<view class="bargain-countdown">
								<text class="countdown-icon ri ri-time-line"></text>
								<text>{{item.countdown || '00:00:00'}}</text>
							</view>
						</view>
						<view class="bargain-info">
							<view class="bargain-name text-ellipsis-2">{{item.name}}</view>
							<view class="bargain-progress-wrap">
								<view class="bargain-progress-bar">
									<view class="bargain-progress-fill" style="width: {{item.progress}}%"></view>
								</view>
								<text class="bargain-progress-text">{{item.progress}}%</text>
							</view>
							<view class="bargain-price-row">
								<text class="bargain-price"><text class="price-symbol">Â¥</text>{{item.currentPrice}}</text>
								<text class="bargain-original-price">Â¥{{item.originalPrice}}</text>
							</view>
						</view>
					</view>
				</block>
			</view>
		</scroll-view>
		<view class="bargain-entry-btn" bindtap="goMoreBargain">
			<text>æŸ¥çœ‹å…¨éƒ¨ç ä»·å•†å“</text>
			<text class="more-arrow ri ri-arrow-right-s-line"></text>
		</view>
	</view>

	<!-- ========== æ–°å“æ¨è ========== -->
	<view class="section" wx:if="{{recommendProducts.length > 0}}">
		<view class="section-header">
			<view class="section-header-left">
				<view class="section-title">æ–°å“æ¨è</view>
				<view class="section-desc">ç²¾é€‰ä¼˜è´¨å®¶å…·ï¼Œå·¥å‚ç›´å‘</view>
			</view>
			<view class="section-more" bindtap="goMoreProducts">
				<text>æ›´å¤š</text>
				<text class="more-arrow ri ri-arrow-right-s-line"></text>
			</view>
		</view>
		<view class="recommend-list">
			<block wx:for="{{recommendProducts}}" wx:key="id">
				<view class="recommend-item" bindtap="goProductDetail" data-id="{{item._id || item.id}}">
					<image class="recommend-img" src="{{item.image || item.thumbnail}}" mode="aspectFill"></image>
					<view class="recommend-info">
						<view class="recommend-name text-ellipsis">{{item.name}}</view>
						<view class="recommend-highlight">{{item.highlight || item.description}}</view>
						<view class="recommend-bottom">
							<view class="recommend-price-wrap">
								<text class="recommend-price"><text class="price-symbol">Â¥</text>{{item.price}}</text>
								<text class="recommend-original-price" wx:if="{{item.originalPrice}}">Â¥{{item.originalPrice}}</text>
							</view>
							<text class="recommend-sales" wx:if="{{item.sales}}">å·²å”® {{item.sales}}</text>
						</view>
					</view>
				</view>
				<view class="recommend-divider" wx:if="{{index < recommendProducts.length - 1}}"></view>
			</block>
		</view>
	</view>

	<!-- ========== ç©ºé—´çµæ„Ÿ ========== -->
	<view class="section">
		<view class="section-header">
			<view class="section-header-left">
				<view class="section-title">ç©ºé—´çµæ„Ÿ</view>
				<view class="section-desc">å±•å…å®æ™¯ï¼Œæ‰€è§å³æ‰€å¾—</view>
			</view>
			<view class="section-more" bindtap="goCategory">
				<text>æ›´å¤š</text>
				<text class="more-arrow ri ri-arrow-right-s-line"></text>
			</view>
		</view>
		<view class="space-grid">
			<block wx:for="{{spaces}}" wx:key="id">
				<view class="space-card" bindtap="goSpaceDetail" data-item="{{item}}">
					<image class="space-img" src="{{item.image}}" mode="aspectFill"></image>
					<view class="space-overlay"></view>
					<view class="space-text">
						<view class="space-title">{{item.title}}</view>
						<view class="space-subtitle">{{item.subtitle}}</view>
					</view>
				</view>
			</block>
		</view>
	</view>

	<!-- ========== ç²¾é€‰å¥½ç‰© ========== -->
	<view class="section" wx:if="{{featuredProducts.length > 0}}">
		<view class="section-header">
			<view class="section-header-left">
				<view class="section-title">ç²¾é€‰å¥½ç‰©</view>
				<view class="section-desc">æºå¤´å·¥å‚ï¼Œå“è´¨ä¿éšœ</view>
			</view>
			<view class="section-more" bindtap="goMoreProducts">
				<text>æ›´å¤š</text>
				<text class="more-arrow ri ri-arrow-right-s-line"></text>
			</view>
		</view>
		<view class="featured-grid">
			<block wx:for="{{featuredProducts}}" wx:key="id">
				<view class="featured-card" bindtap="goProductDetail" data-id="{{item._id || item.id}}">
					<view class="featured-img-wrap">
						<image class="featured-img" src="{{item.image || item.thumbnail}}" mode="aspectFill"></image>
					</view>
					<view class="featured-info">
						<view class="featured-name text-ellipsis-2">{{item.name}}</view>
						<view class="featured-highlight" wx:if="{{item.highlight}}">{{item.highlight}}</view>
						<view class="featured-price-row">
							<text class="featured-price"><text class="price-symbol">Â¥</text>{{item.price}}</text>
							<text class="featured-original" wx:if="{{item.originalPrice}}">Â¥{{item.originalPrice}}</text>
						</view>
					</view>
				</view>
			</block>
		</view>
	</view>

	<!-- ========== åº—é“ºä¿¡æ¯ ========== -->
	<view class="section shop-section">
		<view class="shop-card" bindtap="goShopInfo">
			<view class="shop-main">
				<image class="shop-logo" src="{{shopInfo.logo}}" mode="aspectFill" wx:if="{{shopInfo.logo}}"></image>
				<view class="shop-logo-placeholder" wx:else>
					<text>å°</text>
				</view>
				<view class="shop-info">
					<view class="shop-name-row">
						<text class="shop-name">{{shopInfo.name}}</text>
						<view class="shop-verified" wx:if="{{shopInfo.isVerified}}">
							<text>âœ“ å·²è®¤è¯</text>
						</view>
					</view>
					<view class="shop-address text-ellipsis">{{shopInfo.address}}</view>
				</view>
			</view>
			<view class="shop-actions">
				<view class="shop-action-btn" catchtap="callShop">
					<text>ğŸ“ è”ç³»</text>
				</view>
				<view class="shop-action-btn" catchtap="goShopInfo">
					<text>ğŸª è¿›åº—</text>
				</view>
			</view>
		</view>
	</view>

	<!-- åº•éƒ¨å ä½ -->
	<view style="height: 160rpx;"></view>
</view>
</scroll-view>
