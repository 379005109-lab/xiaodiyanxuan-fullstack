<navigation-bar title="åœ°å€ç®¡ç†" back="{{true}}" color="black" background="#FFFFFF"></navigation-bar>
<scroll-view class="scrollarea" scroll-y enhanced show-scrollbar="{{false}}">
<view class="page">
	<view class="addr-list" wx:if="{{addresses.length > 0}}">
		<block wx:for="{{addresses}}" wx:key="id">
			<view class="addr-card" bindtap="onEditAddress" data-id="{{item.id}}">
				<view class="addr-top">
					<text class="addr-name">{{item.name}}</text>
					<text class="addr-phone">{{item.phone}}</text>
					<text class="addr-tag" wx:if="{{item.isDefault}}">é»˜è®¤</text>
				</view>
				<text class="addr-detail">{{item.address}}</text>
				<view class="addr-actions">
					<text class="addr-act" catchtap="onSetDefault" data-id="{{item.id}}" wx:if="{{!item.isDefault}}">è®¾ä¸ºé»˜è®¤</text>
					<text class="addr-act" catchtap="onEditAddress" data-id="{{item.id}}">ç¼–è¾‘</text>
					<text class="addr-act addr-del" catchtap="onDeleteAddress" data-id="{{item.id}}">åˆ é™¤</text>
				</view>
			</view>
		</block>
	</view>

	<view class="empty" wx:else>
		<text class="empty-icon">ğŸ“</text>
		<text class="empty-text">æš‚æ— æ”¶è´§åœ°å€</text>
		<text class="empty-tip">æ·»åŠ åœ°å€ï¼Œæ–¹ä¾¿å¿«æ·è´­ç‰©</text>
	</view>
</view>
</scroll-view>

<!-- åº•éƒ¨æ·»åŠ æŒ‰é’® -->
<view class="bottom-bar">
	<view class="add-btn" bindtap="onAddAddress">+ æ·»åŠ æ–°åœ°å€</view>
</view>

<!-- åœ°å€ç¼–è¾‘å¼¹çª— -->
<view class="modal-mask" wx:if="{{showModal}}" catchtap="onCloseModal">
	<view class="modal-box" catchtap="stopPropagation">
		<view class="modal-header">
			<text class="modal-title">{{editingAddress ? 'ç¼–è¾‘åœ°å€' : 'æ·»åŠ åœ°å€'}}</text>
			<view class="modal-close" bindtap="onCloseModal">âœ•</view>
		</view>
		<view class="modal-body">
			<input class="modal-input" placeholder="å§“å" value="{{formData.name}}" bindinput="onNameInput" />
			<input class="modal-input" placeholder="æ‰‹æœºå·" type="number" value="{{formData.phone}}" bindinput="onPhoneInput" />
			<input class="modal-input" placeholder="è¯¦ç»†åœ°å€" value="{{formData.address}}" bindinput="onAddressInput" />
			<view class="modal-check" bindtap="onToggleDefault">
				<view class="check-dot {{formData.isDefault ? 'checked' : ''}}">{{formData.isDefault ? 'âœ“' : ''}}</view>
				<text class="check-text">è®¾ä¸ºé»˜è®¤åœ°å€</text>
			</view>
		</view>
		<view class="modal-footer">
			<button class="modal-btn btn-cancel" bindtap="onCloseModal">å–æ¶ˆ</button>
			<button class="modal-btn btn-save" bindtap="onSaveAddress">ä¿å­˜</button>
		</view>
	</view>
</view>
