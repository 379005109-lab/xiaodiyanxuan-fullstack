<!-- ä¼˜æƒ åˆ¸é€‰æ‹©é¡µ â€” Apple é£æ ¼ -->
<navigation-bar title="é€‰æ‹©ä¼˜æƒ åˆ¸" back="{{true}}" color="black" background="#FFFFFF"></navigation-bar>
<view class="page">
  <view class="content">
    <view class="coupon-list" wx:if="{{coupons.length > 0}}">
      <block wx:for="{{coupons}}" wx:key="_id">
        <view class="coupon-card {{item.disabled ? 'disabled' : ''}} {{selectedId === (item._id || item.id) ? 'selected' : ''}}" bindtap="selectCoupon" data-item="{{item}}">
          <view class="coupon-left">
            <text class="coupon-amount"><text class="coupon-symbol">Â¥</text>{{item.discount || item.amount}}</text>
            <text class="coupon-condition">æ»¡{{item.minAmount || 0}}å¯ç”¨</text>
          </view>
          <view class="coupon-right">
            <view class="coupon-name">{{item.name || item.title}}</view>
            <view class="coupon-expire">{{item.expireDate || 'é™æ—¶ä½¿ç”¨'}}</view>
          </view>
          <view class="coupon-check" wx:if="{{selectedId === (item._id || item.id)}}">âœ“</view>
        </view>
      </block>
    </view>

    <view class="no-coupon-btn" bindtap="noCoupon">
      <text>ä¸ä½¿ç”¨ä¼˜æƒ åˆ¸</text>
    </view>

    <view class="empty-state" wx:if="{{coupons.length === 0 && !loading}}">
      <text class="empty-icon">ğŸ«</text>
      <text class="empty-text">æš‚æ— å¯ç”¨ä¼˜æƒ åˆ¸</text>
    </view>
  </view>
</view>
