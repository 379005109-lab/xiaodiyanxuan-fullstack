<view class="page">
	<!-- ZenLife 2.0 é¡¶éƒ¨æ ‡é¢˜æ  -->
	<view class="mall-header">
		<view class="header-title">å•†åŸ</view>
		<view class="header-actions">
			<view class="action-btn {{viewMode==='grid'?'active':''}}" bindtap="toggleViewMode" data-mode="grid">
				<text class="iconfont">âŠ</text>
			</view>
			<view class="action-btn" bindtap="openFilter">
				<text class="iconfont">â–½</text>
			</view>
		</view>
	</view>

	<!-- æœç´¢æ¡† -->
	<view class="search-bar">
		<view class="search-icon">ğŸ”</view>
		<input class="search-input" placeholder="æœç´¢æ²™å‘ã€æ¡Œæ¤…..." value="{{searchText}}" bindinput="onSearchInput" confirm-type="search" bindconfirm="onSearchConfirm" />
	</view>

	<!-- ç­›é€‰æ ‡ç­¾ -->
	<view class="filter-tabs">
		<view class="tab-item {{sortKey==='comprehensive'?'active':''}}" data-key="comprehensive" bindtap="onTapSort">
			<text>ç»¼åˆ</text>
			<view class="tab-dot" wx:if="{{sortKey==='comprehensive'}}"></view>
		</view>
		<view class="tab-item {{sortKey==='sales'?'active':''}}" data-key="sales" bindtap="onTapSort">é”€é‡</view>
		<view class="tab-item {{sortKey==='price'?'active':''}}" data-key="price" bindtap="onTapPrice">ä»·æ ¼</view>
		<view class="tab-item" bindtap="openCategory">ç±»åˆ«</view>
		<view class="tab-item {{showStylePopup?'active':''}}" bindtap="toggleStyle">é£æ ¼</view>
	</view>

	<!-- é£æ ¼å¼¹çª— -->
	<view class="style-popup" wx:if="{{showStylePopup}}">
		<view class="style-list">
			<block wx:for="{{styles}}" wx:key="*this">
				<view class="style-tag {{selectedStyle===item?'active':''}}" data-style="{{item}}" bindtap="onSelectStyle">{{item}}</view>
			</block>
		</view>
		<view class="style-actions">
			<button class="btn-reset" bindtap="resetStyle">é‡ç½®</button>
			<button class="btn-apply" bindtap="applyStyle">ç¡®å®š</button>
		</view>
	</view>

	<!-- ç±»åˆ«æŠ½å±‰é®ç½© -->
	<view class="drawer-mask {{showCategoryDrawer?'active':''}}" wx:if="{{showCategoryDrawer}}" bindtap="closeCategory"></view>
	<!-- å·¦ä¾§ç±»åˆ«æŠ½å±‰ -->
	<view class="drawer" wx:if="{{showCategoryDrawer}}">
		<scroll-view scroll-y class="drawer-list">
			<block wx:for="{{categories}}" wx:key="id">
				<view class="drawer-item {{selectedCategory===item.id?'active':''}}" data-id="{{item.id}}" data-name="{{item.name}}" bindtap="onSelectCategory">{{item.name}}</view>
			</block>
		</scroll-view>
	</view>

	<!-- å•†å“åˆ—è¡¨ - ç½‘æ ¼æ¨¡å¼ -->
	<scroll-view scroll-y class="goods-scroll" wx:if="{{viewMode==='grid'}}">
		<view class="goods-grid">
			<block wx:for="{{filteredGoods}}" wx:key="id">
				<view class="goods-card" bindtap="goDetail" data-id="{{item.id}}">
					<view class="card-image">
						<image src="{{item.thumb || item.cover || item.image || item.pic}}" mode="aspectFill"></image>
					</view>
					<view class="card-info">
						<view class="card-name">{{item.name}}</view>
						<view class="card-desc">{{item.subtitle || item.material || ''}}</view>
						<view class="card-bottom">
							<view class="card-price">Â¥{{item.price}}</view>
							<view class="card-cart-btn">ğŸ›’</view>
						</view>
					</view>
				</view>
			</block>
		</view>
		<view style="height: 200rpx;"></view>
	</scroll-view>

	<!-- å•†å“åˆ—è¡¨ - å¤§å›¾æ¨¡å¼ -->
	<scroll-view scroll-y class="goods-scroll" wx:else>
		<view class="goods-list-large">
			<block wx:for="{{filteredGoods}}" wx:key="id">
				<view class="goods-card-large" bindtap="goDetail" data-id="{{item.id}}">
					<view class="card-header">
						<view class="card-title">{{item.name}}</view>
						<view class="card-fav">â™¡</view>
					</view>
					<view class="card-subtitle">{{item.subtitle || item.material || ''}}</view>
					<view class="card-image-large">
						<image src="{{item.thumb || item.cover || item.image || item.pic}}" mode="aspectFill"></image>
					</view>
					<view class="card-footer">
						<view class="footer-left">
							<view class="price-label">PRICE</view>
							<view class="price-value">Â¥{{item.price}}</view>
						</view>
						<view class="footer-btn">ğŸ›’ åŠ å…¥è´­ç‰©è½¦</view>
					</view>
				</view>
			</block>
		</view>
		<view style="height: 200rpx;"></view>
	</scroll-view>
</view>


