<view class="page-container">
	<!-- 顶部导航栏 -->
	<view class="top-bar" style="padding-top: {{statusBarHeight}}px;">
		<view class="top-bar-inner">
			<view class="top-title">商品库</view>
		</view>
		<!-- 搜索栏 -->
		<view class="search-row">
			<view class="search-input-wrap" bindtap="goSearch">
				<text class="search-icon-text ri ri-search-line"></text>
				<text class="search-placeholder">搜索商品/品牌/空间</text>
			</view>
			<view class="camera-btn" bindtap="onCameraTap"><text class="ri ri-camera-line"></text></view>
		</view>
	</view>

	<!-- 主体布局：左侧分类 + 右侧内容 -->
	<view class="main-body" style="top: {{topBarHeight}}px;">
		<!-- 左侧类目栏 -->
		<scroll-view class="side-bar" scroll-y enhanced show-scrollbar="{{false}}">
			<block wx:for="{{categories}}" wx:key="id">
				<view class="side-item {{selectedCategory === item.id ? 'active' : ''}}" data-id="{{item.id}}" bindtap="onSelectCategory">
					<view class="side-indicator" wx:if="{{selectedCategory === item.id}}"></view>
					<text class="side-text">{{item.name}}</text>
				</view>
			</block>
		</scroll-view>

		<!-- 右侧内容区 -->
		<scroll-view class="content-area" scroll-y enhanced show-scrollbar="{{false}}">
			<!-- 加载骨架 -->
			<view class="skeleton" wx:if="{{isLoading}}">
				<view class="skeleton-cover"></view>
				<view class="skeleton-grid">
					<view class="skeleton-item" wx:for="{{[1,2,3,4]}}" wx:key="*this">
						<view class="skeleton-img"></view>
						<view class="skeleton-text"></view>
					</view>
				</view>
			</view>

			<!-- 正常内容 -->
			<view class="content-inner" wx:if="{{!isLoading && currentSpace}}">
				<!-- 空间主视觉卡 -->
				<view class="cover-card">
					<image class="cover-img" src="{{currentSpace.coverImage}}" mode="aspectFill"></image>
					<view class="cover-gradient"></view>
					<view class="cover-info">
						<view class="cover-name">{{currentSpace.name}}</view>
						<view class="cover-desc">{{currentSpace.description}}</view>
						<view class="cover-btn" bindtap="handleViewAll">查看全部</view>
					</view>
				</view>

				<!-- 细分类目 -->
				<view class="sub-section">
					<view class="sub-title">细分类目</view>
					<view class="sub-grid">
						<block wx:for="{{currentSpace.subCategories}}" wx:key="id">
							<view class="sub-card" bindtap="handleSubCategoryClick" data-id="{{item.id}}">
								<view class="sub-img-wrap">
									<image class="sub-img" src="{{item.image}}" mode="aspectFill"></image>
								</view>
								<view class="sub-name">{{item.name}}</view>
							</view>
						</block>
					</view>
				</view>
			</view>

			<!-- 空状态 -->
			<view class="empty-content" wx:if="{{!isLoading && !currentSpace}}">
				<text class="empty-icon-text ri ri-inbox-line"></text>
				<text class="empty-msg">暂无该空间内容</text>
			</view>

			<view style="height: 120rpx;"></view>
		</scroll-view>
	</view>
</view>
