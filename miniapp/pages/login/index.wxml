<view class="page-container">
	<!-- 底部背景 -->
	<view class="bg-bottom">
		<image class="bg-img" src="https://readdy.ai/api/search-image?query=luxury%20minimalist%20bedroom%20interior&width=720&height=1280&seq=login-bg-001&orientation=portrait" mode="aspectFill"></image>
		<view class="bg-mask"></view>
	</view>

	<!-- 导航栏 -->
	<view class="nav-bar" style="padding-top: {{statusBarHeight}}px;">
		<view class="nav-content">
			<view class="nav-back" bindtap="goBack">
				<text class="ri ri-arrow-left-s-line nav-back-icon"></text>
			</view>
			<view class="nav-title">登录</view>
			<view class="nav-placeholder"></view>
		</view>
	</view>

	<!-- 主内容区 -->
	<scroll-view class="scroll-area" scroll-y style="top: {{navBarHeight}}px;">
		<!-- Logo 和欢迎语 -->
		<view class="welcome-section">
			<view class="logo-wrap">
				<text class="ri ri-home-smile-line logo-icon"></text>
			</view>
			<view class="welcome-title">欢迎回来</view>
			<view class="welcome-desc">登录后享受更多会员专属权益</view>
		</view>

		<!-- 登录方式切换 -->
		<view class="tab-switch">
			<view class="tab-item {{loginType === 'account' ? 'active' : ''}}" bindtap="switchLoginType" data-type="account">账号密码登录</view>
			<view class="tab-item {{loginType === 'phone' ? 'active' : ''}}" bindtap="switchLoginType" data-type="phone">手机号登录</view>
		</view>

		<!-- 账号密码登录表单 -->
		<view class="form-section" wx:if="{{loginType === 'account'}}">
			<view class="input-group">
				<view class="input-icon-wrap">
					<text class="ri ri-user-line input-icon"></text>
				</view>
				<input class="form-input" type="text" placeholder="请输入账号/手机号" value="{{account}}" bindinput="onAccountInput" />
			</view>

			<view class="input-group">
				<view class="input-icon-wrap">
					<text class="ri ri-lock-line input-icon"></text>
				</view>
				<input class="form-input input-with-suffix" type="{{showPassword ? 'text' : 'password'}}" password="{{!showPassword}}" placeholder="请输入密码" value="{{password}}" bindinput="onPasswordInput" />
				<view class="input-suffix" bindtap="togglePassword">
					<text class="ri {{showPassword ? 'ri-eye-line' : 'ri-eye-off-line'}} suffix-icon"></text>
				</view>
			</view>

			<view class="forgot-row">
				<view class="forgot-btn" bindtap="onForgotPassword">忘记密码？</view>
			</view>

			<button class="login-btn {{isAccountLoginDisabled ? 'disabled' : ''}}" disabled="{{isAccountLoginDisabled}}" bindtap="handleAccountLogin">登录</button>
		</view>

		<!-- 手机号登录表单 -->
		<view class="form-section" wx:if="{{loginType === 'phone'}}">
			<view class="input-group">
				<view class="input-icon-wrap">
					<text class="ri ri-smartphone-line input-icon"></text>
				</view>
				<input class="form-input" type="number" placeholder="请输入手机号" maxlength="11" value="{{phone}}" bindinput="onPhoneInput" />
			</view>

			<view class="input-group">
				<view class="input-icon-wrap">
					<text class="ri ri-shield-check-line input-icon"></text>
				</view>
				<input class="form-input input-with-suffix" type="number" placeholder="请输入验证码" maxlength="6" value="{{verifyCode}}" bindinput="onCodeInput" />
				<view class="code-btn {{countdown > 0 || isSending ? 'disabled' : ''}}" bindtap="handleSendCode">
					<text wx:if="{{isSending}}">发送中...</text>
					<text wx:elif="{{countdown > 0}}">{{countdown}}s</text>
					<text wx:else>获取验证码</text>
				</view>
			</view>

			<button class="login-btn {{isPhoneLoginDisabled ? 'disabled' : ''}} mt-extra" disabled="{{isPhoneLoginDisabled}}" bindtap="handlePhoneLogin">登录</button>
		</view>

		<!-- 协议勾选 -->
		<view class="terms-row">
			<view class="terms-checkbox {{agreeTerms ? 'checked' : ''}}" bindtap="toggleTerms">
				<text class="ri ri-check-line terms-check-icon" wx:if="{{agreeTerms}}"></text>
			</view>
			<view class="terms-text">
				<text>我已阅读并同意</text>
				<text class="terms-link" bindtap="viewUserAgreement">《用户协议》</text>
				<text>和</text>
				<text class="terms-link" bindtap="viewPrivacyPolicy">《隐私政策》</text>
			</view>
		</view>

		<!-- 分割线 -->
		<view class="divider-row">
			<view class="divider-line"></view>
			<text class="divider-text">其他登录方式</text>
			<view class="divider-line"></view>
		</view>

		<!-- 微信一键登录 -->
		<view class="third-party-row">
			<view class="third-btn wechat-btn" bindtap="handleWxLogin">
				<text class="ri ri-wechat-fill third-icon"></text>
			</view>
		</view>

		<view style="height: 120rpx;"></view>
	</scroll-view>
</view>
