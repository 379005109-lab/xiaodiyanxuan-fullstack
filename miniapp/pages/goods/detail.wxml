<!--å•†å“è¯¦æƒ…-->
<view class="container" wx:if="{{goods}}">
  <!-- å•†å“å›¾ç‰‡è½®æ’­ -->
  <swiper class="goods-swiper" indicator-dots autoplay circular>
    <swiper-item wx:for="{{goods.images}}" wx:key="index">
      <image src="{{item}}" mode="aspectFill" class="goods-image"
        bindtap="previewImage" data-index="{{index}}"/>
    </swiper-item>
  </swiper>

  <!-- å•†å“ä¿¡æ¯ -->
  <view class="goods-info">
    <view class="price-row">
      <text class="price">Â¥{{totalPrice}}</text>
      <text class="original-price" wx:if="{{goods.originalPrice > goods.price}}">
        Â¥{{goods.originalPrice}}
      </text>
    </view>
    <text class="goods-name">{{goods.name}}</text>
    <view class="tags">
      <text class="tag" wx:if="{{goods.sales}}">å·²å”®{{goods.sales}}ä»¶</text>
      <text class="tag">{{goods.style || 'ç°ä»£é£æ ¼'}}</text>
    </view>
  </view>

  <!-- è§„æ ¼é€‰æ‹© -->
  <view class="spec-section">
    <!-- å°ºå¯¸ -->
    <view class="spec-item" wx:if="{{goods.sizes.length > 0}}">
      <text class="spec-title">å°ºå¯¸</text>
      <view class="spec-options">
        <view class="spec-option {{selectedSize.id === item.id ? 'active' : ''}}"
          wx:for="{{goods.sizes}}" wx:key="id"
          bindtap="selectSize" data-index="{{index}}">
          <text>{{item.name}}</text>
          <text class="dims" wx:if="{{item.dims}}">{{item.dims}}</text>
          <text class="extra" wx:if="{{item.extra > 0}}">+Â¥{{item.extra}}</text>
        </view>
      </view>
    </view>

    <!-- æè´¨ -->
    <view class="spec-item" wx:if="{{goods.materialsGroups.length > 0}}">
      <text class="spec-title">æè´¨</text>
      <view class="spec-options">
        <view class="spec-option {{selectedMaterial.id === item.id ? 'active' : ''}}"
          wx:for="{{goods.materialsGroups}}" wx:key="id"
          bindtap="selectMaterial" data-index="{{index}}">
          {{item.name}}
        </view>
      </view>
    </view>

    <!-- é¢œè‰² -->
    <view class="spec-item" wx:if="{{selectedMaterial.colors.length > 0}}">
      <text class="spec-title">é¢œè‰²</text>
      <view class="color-options">
        <view class="color-option {{selectedColor.id === item.id ? 'active' : ''}}"
          wx:for="{{selectedMaterial.colors}}" wx:key="id"
          bindtap="selectColor" data-index="{{index}}">
          <image src="{{item.image}}" mode="aspectFill" wx:if="{{item.image}}"/>
          <text>{{item.name}}</text>
        </view>
      </view>
    </view>

    <!-- æ•°é‡ -->
    <view class="spec-item quantity-row">
      <text class="spec-title">æ•°é‡</text>
      <view class="quantity-control">
        <view class="qty-btn" bindtap="changeQuantity" data-type="minus">-</view>
        <text class="qty-num">{{quantity}}</text>
        <view class="qty-btn" bindtap="changeQuantity" data-type="plus">+</view>
      </view>
    </view>
  </view>

  <!-- å•†å“æè¿° -->
  <view class="desc-section" wx:if="{{goods.description}}">
    <text class="section-title">å•†å“æè¿°</text>
    <text class="desc-text">{{goods.description}}</text>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-bar">
    <view class="action-btns">
      <view class="action-btn" bindtap="addToCart">
        <text class="action-icon">ğŸ›’</text>
        <text>åŠ å…¥è´­ç‰©è½¦</text>
      </view>
    </view>
    <view class="buy-btn" bindtap="buyNow">ç«‹å³è´­ä¹°</view>
  </view>
</view>

<!-- åŠ è½½ä¸­ -->
<view class="loading" wx:if="{{loading}}">
  <text>åŠ è½½ä¸­...</text>
</view>
